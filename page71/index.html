<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page71/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/2013/05/19/3/">О Ноде.js</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-05-19T16:38:37+00:00">
        May 19, 2013
    </time>

    <a href="/tag/nodejs/" rel="tag">nodejs</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Несмотря на то, что я числюсь программистом на Питоне, первый же
проект дали пилить на Ноде. Раньше я эту платформу щупал только в
плане экспериментов, теперь же пришлось столкнуться в продакшене. Имею
сказать следующее.</p>

<p>Нода - уже вполне зрелый, устойчивый продукт. Несмотря на малую
версию, под нее написано множество библиотек, фреймворков,
шаблонизаторов, ORM. Нода без нареканий работает на Винде, для
разработки не нужна виртуалка. Есть хороший менеджер пакетов npm,
позволяющий одной командой устанавливать пакеты и
зависимости. Работать с Нодой очень удобно.</p>

<p>Но - приходится полностью менять концепцию мышления. В Ноде
практически все асинхронно - то есть выполняется хрен знает когда. Это
значит, что стандартное последовательное выполнение операторов здесь
работает иначе. Например, в каком-нибудь Питоне мы сначала читаем
данные из базы, потом записываем их в файл. В Ноде та же операция
записи в файл выполняется в коллбеке, который выполнится в коллбеке,
который передан в функцию запроса к базе. Да, все мы связывались с
этим в классическом Джаваскрипте, но тут масштабы серьезнее -
приходится юзать фабрики коллбеков и библиотеки вроде async, которые
придают подобным кренделям хоть какой-то стройный вид.</p>

<p>Но все же, и от такого асинхронного подхода можно получать
удовольствие.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/05/19/2/">Это больше чем ежедневная привычка</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-05-19T16:15:31+00:00">
        May 19, 2013
    </time>

    <a href="/tag/google/" rel="tag">google</a>, <a href="/tag/rss/" rel="tag">rss</a>, <a href="/tag/hitler/" rel="tag">hitler</a>

</div>


            <div class="entry">
                
                    <p>Что бы Гугл не возомнил, закрытие ридера - большая ошибка. Потому что
нельзя безнаказанно отфутболить полмиллиона юзеров, объявив, что
сервис убыточный и бла-бла-бла. За этим последует потеря лояльности
аудитории. Уж кому другому, но не Гуглу жаловаться на финансовые
издержки сервиса, который отполирован и работает без обновлений уже
несколько лет.</p>

<p>Как объяснить суть трагедии непосвященному человеку? Лучше за меня это
сделает Гитлер. Вождь германского народа узнал о закрытии любимого
сервиса:</p>

<iframe width="640" height="360" src="http://www.youtube.com/embed/A25VgNZDQ08?feature=player_detailpage" allowfullscreen=""></iframe>

<p>Ридер Гугла был абсолютным монополистом среди РСС-агрегаторов. Поэтому
другие компании свернули разработки, логично полагая, что
конкурировать с Гуглом невозможно, тем более что еще никому не удалось
монетизировать этот бизнес. Вот и вышло так, что приткнуться
полумиллиону пользователям некуда.</p>

<p>Да, есть Фидли и другие поделки, но пока что в крайне сыром
состоянии. Тем более, что все хотят изобрести велосипед и не могут
повторить простой и удобный гугловский интерфейс без идиотских
наворотов - слева ленты, справа контент. Привыкнув за несколько лет к
лаконичному интерфейсу, начинаешь испытывать дикую фрустрацию при
переходе на новую читалку.</p>

<p>Понятно, что дело не в деньгах - многие пользователи заявляли о
готовности платить Гуглу за сохранение ридера - а в стремлении Гугла
затащить гиков в социальный бордель, в котором якобы новости
распространяются быстрее.</p>

<p>Социальщина, мать ее.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/05/19/1/">Переезд</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-05-19T15:43:30+00:00">
        May 19, 2013
    </time>

    <a href="/tag/voronezh/" rel="tag">voronezh</a>, <a href="/tag/dataart/" rel="tag">dataart</a>, <a href="/tag/work/" rel="tag">work</a>

</div>


            <div class="entry">
                
                    <p>Как же давно я ничего не писал! Виной тому переезд и
трудоустройство. Теперь я проживаю в Воронеже и работаю в
<a href="http://www.dataart.ru/contacts/voronezh.htm">Датаарте</a>. Процесс
устройства туда – целая история, которую я надеюсь рано или поздно
завершить и выложить. А пока что хочу сказать, что в Датаарте клево,
впереди много работы, Воронеж нравится, и все хорошо.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/04/01/1/">Вы</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-04-01T01:57:03+00:00">
        Apr 1, 2013
    </time>

    <a href="/tag/idiots/" rel="tag">idiots</a>

</div>


            <div class="entry">
                
                    <p>В интернете болезнь - все пишут “вы” с большой буквы. Идиотизм авторов
меня поражает. Не понимая контекста обращения, лепят “Вас”, “Вам”,
“Ваш”. Особо упоротые тупо лепят капсом - “ВАМ”, “ВАШ”. При этом
игнорируют орфографию, пунктуацию, но “вы” с большой - это для них
святое. В ответ на замечание каждый идиот с пафосом отвечает, что
всего лишь соблюдает правила русского языка. Лучше бы голову включили!</p>

<p>“Вы”, “ваш” и т.д. следует всегда писать с маленькой буквы. Этому есть
простое объяснение: “вы” - это уже уважительное обращение, в отличии
от “ты”. “Вы” (с маленькой) подчеркивает уважительное отношение к
собеседнику или выражает неравенство статусов - обращение подчиненного
начальнику, например. Этого уже достаточно. Вы же не тыкаете
директору, как своему коллеге? Вы не равны - “вы” в обращении это
подтверждает. Поэтому приемы вроде “Вы” и “ВЫ” означают лживое
подобострастие и подхалимство.</p>

<p>Я всю жизнь писал все обращения, заявления и деловые письма с
обращением на “вы”, “ваш”. И ничего особенного не случалось. А людей,
присылавших мне корреспонденцию с “Вы”, сторонился - часто
оказывалось, не зря.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/03/25/1/">Почему я ушел с Друпал.ру</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-03-25T06:40:18+00:00">
        Mar 25, 2013
    </time>

    <a href="/tag/drupal/" rel="tag">drupal</a>

</div>


            <div class="entry">
                
                    <p>В последнее время я почти не захожу на Друпал.ру. Просматриваю новости
с главной в Гуглоридере, чтобы быть в курсе ключевых событий — выходе
новой версии Друпала, крупных сборищах, тенденций разработки. Но на
жаркие форумные дискуссии или подробные ответы в личку, как в былые
времена, меня уже не хватает. Этому есть основания посерьезней
нехватки времени.</p>

<p>Я вижу несколько причин отказа от ресурса. Первая — это потеря
интереса к Друпалу и системам управления в целом. С переходом на
высокоуровневые фреймворки типа Джанги и Фласка я перестал нуждаться в
нагромождении модулей и хуков. Теперь, когда мне нужна та или иная
функциональность, я просто пишу код в нужном месте, и все работает. В
Друпале и других движках недостаточно простого кода — он обязательно
должен быть обернут в какой-то хук/класс/костыль, который система
вызовет сама хрен знает когда. В итоге исчезает ясность проекта,
потому что теперь мы опираемся на чужую архитектуру, выполненную не
так, как бы мне хотелось.</p>

<p>Очень сильно Друпал разочаровал меня, когда я решил вести блог — после
нескольких дней подбора и допиливания модулей я просто снес наработки
и поставил Эгею — лучший движок для блога. И, как ни парадоксально,
Друпал сдает в разработке сайтов сообществ — для чего он как бы и
предназначался. Потому что из коробки в нем нет ничего, что могут
предложить специализированные движки — группы, френды, инвайты,
рейтинги, галереи и т.д.</p>

<p>Некоторое время назад сеть наводнили слухи о кризисе Друпала, большей
частью высосанные из пальца. Кривая развития Друпала лишь уменьшила
уклон, но недоброжелатели уже открыли рты, что бы кричать о кризисе
Друпала. Это не значит, конечно, что у Друпала нет проблем.</p>

<p>У него одна большая проблема — неверная ориентация в первую очередь на
программистов. Друпал бесконечно удален от простого пользователя. Это
не КМС, а безумный конструктор, который нужно пилить и пилить, пилить
и пилить, чтобы получить на выходе что-то годное. Бесконечная лапша о
том, что есть бездна готовых модулей на все случаи жизни, заставляет
все новых и новых пользователей ставить Друпал на Денвер и спрашивать
на форуме в тысячный раз, как сделать галерею. Друзья, это ложь — либо
ты сам пишешь код, либо платишь наемному программисту. В Друпале так
было и будет — активно разрабатываются лишь сотня-другая модулей,
остальные брошены, так как писались кем-то давно под особые
требования.</p>

<p>Блоги на Вордпрессе ведут писатели, врачи, политики, обычные люди —
потому что система, пусть и весьма кривая, сразу заточена под нужды
пользователя. Не понимаю, что мешает добавить в дистриб Друпала
несколько установочных профилей — блог, копоративный сайт, портал —
чтобы после установки можно было сразу получить готовый к эксплуатации
блог с визуальны редактором, видео- и аудио проигрывателем,
метатегами, сео-мишурой и тд.?</p>

<p>Короче, Дрису и Ко нужно пересмотреть образ Друпала. Сейчас он
совершенно невнятный — пропагандируется для пользователей, а на деле
пользователю не подвластен.</p>

<p>Другая, более важная причина, по которой я стараюсь не заходить на
Д.ру заключается в том, что за эти 6 лет ресурс практически не
изменился. Как 6 лет назад были одни проблемы, так они и остались. С
момента зарождения русского сообщества на сайте не было хоть какой-то
организованности. Понятно, что на ранних стадиях сайт был местом
встречи нескольких завсегдатаев, где от владельца ресурса ничего не
требовалось. Но с ростом аудитории и распространением Друпала в России
сайту тоже необходимо измениться, повзрослеть. Эти вопросы витали в
воздухе и неоднократно поднимались в форумах. Вот краткий перечень
проблем, присущих Друпал.ру:</p>

<ol>
  <li>
    <p>Невнимание к проекту со стороны владельца — Акселя. Пусть он
хороший человек, но ведет себя, как собака на сене — и сам не
занимается ресурсом, и не передает это право самовыдвиженцам. Все
важные вопросы откладывает на очередную осень, в итоге ничего не
делается.</p>
  </li>
  <li>
    <p>Абсолютно полный провал с попытками структурировать обрывки
полезной информации о Друпале. На Друпал.ру
<a href="http://www.drupal.ru/book">есть книга</a>, которую никто не читает,
потому что это не структура, а кладбище костылей. Основная боль
форума — это очередной вопрос «пропал блок входа». Не удается пока
что донести до пользователей, что делать в подобных случаях. Форум
не есть средство для аккумулирования знаний, разве что если сделать
хороший поиск. Кстати, на Д.ру поиск просто никакой.</p>
  </li>
  <li>
    <p>Спам. Как и все движки, Друпал может предлоджить только самые
топорные способы отсечения спама — капча и анализ сторонним
сервисом. Оба способа — неуважение к посетителю. Писать свою
систему проверки (с подменой полей, например) некому. Поэтому в
2013 году спам вычищается руками.</p>
  </li>
  <li>
    <p>Неадекватность модераторов. Если кому рассказать, могут и не
поверить, но на Д.ру модерские права дали дебилу, который обиделся
на кого-то и снес сайт. Дебильность этого человека была очевидна с
первой его реплики на форуме, за какие заслуги он получил права —
остается только догадываться. Другому модератору иногда становится
интересно, как работает тот или иной модуль, так что смена настроек
на боевом сервере и жуткие тормоза — обычное дело.</p>
  </li>
  <li>
    <p>Но довольно злословить. Достаточно зайти на форум и почувствовать,
что все по-прежнему — форум активно спамят, а новички забивают
трекер глупыми вопросами. Периодически всплывают вбросы вида
«Давайте введем карму!» Может, кто-то уже привык к этому, но не я.</p>
  </li>
</ol>

<p>Мне кажется, что сейчас форумы изживают себя. А может быть, это такой
этап в развитии мышления, когда информацию из форума становится
воспринимать сложнее. Ее слишком много. Поэтому удобнее общаться в
блогах — так проще и по делу. Новые статьи мониторятся в любимой
РСС-читалке, не нужно днями сидеть на форуме. Комментаторы все друг
друга знают по никам и аватарам. Потребности в форумах я воощбе не
вижу, потому что они суть флуд и спам.</p>

<p>Но что ни говори, Друпал сыграл важную роль в моей карьере и жизни, он
был моим окном в мир веб-технологий. Сегодняшние ощущения от него
скорее связаны с воспоминаниями, примерно как с журналом «Хакер»:
берешь в руки старый номер — приятное чувство, словно ты опять
школьник, купивший первый компьютер, открываешь — а там такая чепуха,
что диву даешься, как такое читал.</p>

<p>Все же, у меня остались еще несколько сайтов на Друпале (никак не могу
их сплавить), поэтому мне не безынтересны новости с
Друпал-фронта. Дерзайте, разработчики! Дрис, развивай свое детище!</p>

<h4 id="комментарии-из-старого-блога">Комментарии из старого блога</h4>

<p><strong>03/26/13 Niklan:</strong> По сути вы тоже высосали из пальца недостатки
  друпала. Ну нету в нем портала, блога и т.д. и .т.п. при установки,
  это не делает друпал хуже. У него есть мощный модуль OG, а также
  сборки Open Atrium и еще куча других. Если пользователю надо
  магазин, дак на хрена он качает заведомо пустую сборку а не Drupal
  Commerce (Commerce Kickstart). По такой логике надо вообще весь
  drupal.org запихнуть в базовую поставку, и весить он будет гб
  10+++. Кому такое надо. В этом плане друпал как раз очень грамотно
  сделан. Надо готовое - бери сборку, не надо - качай чистый и пили
  сам. Это как с дистрибутивами линукса. Там ведь никто не ноет что
  ядро линукса идет чистое. Если тебе не надо разрабатывать свое и с
  нуля, дак возьми дистрибутив и пользуйся. Не знаю как вы, но я
  заметил что даже новички уже знают о сборках друпала.</p>

<p>Что касается друпал.ру. Тут все так и есть. За сайтом почти не
следят. На форуме полный писец. Когда я впервые зашел на него, там
было гораздо больше опытных пользователей. Сейчас они тоже есть, но
они больше как вы, пассивны и уже не участвуют, что тоже отразилось на
сообществе. Друпал.ру 2 года назад и сейчас - небо и земля.</p>

<p><strong>03/26/13 Иван Гришаев:</strong> Может, и не делает хуже, но все чаще я стал
  замечать, что специализированные движки справляются с задачами лучше
  Друпала. А уж в плане установки/настройки уделывают только
  так. Пилить свою сборку для блога, которая через год безнадежно
  устареет, я не собираюсь.Желающим открыть интернет-магазин я
  рекомендую купить коробочное решение, сейчас масса достойных
  вариантов по цене до 10 тыс. руб.</p>

<p><strong>03/26/13 Niklan:</strong> Как по мне, вы сильно заблуждаетесь.</p>

<p>Берем OpenAtrium, он справляется со своими аналогами не на друпале
точно также, если не лучше. И установка\настройка у него не как в
друпале.</p>

<p>Попробуйте, например, Commerce Kickstart поставить. Увидите какая там
установка и настройка. Все сведено к минимуму, только введи где и что
надо и дождись конца - магазин готов.</p>

<p>Друпал рассчитан на разработчиков, это факт, поэтому то что друпал
держится этого пути - плюс, а не минус. Если он скатится до уровня
джумлы или вп, то он потеряет огромную долю разработчиков.</p>

<p>Не хотите пилить сборку - не надо, кто же вас заставляет, есть уже
готовые. А вообще, попробовали бы вы Features. Делаете прототип,
попутно ему обновляете ядро, что-то правите и сливаете feature и
ставите уже свежак. Это проще чем вы думаете.</p>

<p>Я не думаю что на джанге это намного проще. Там тоже ваша сборка
устареет. Только она будет стареть с технической стороны (новые
технологии, идеи) и по сути минимум зависимости от фреймворка, но суть
не меняется. Проблема эта будет везде.</p>

<p>Мне больше интересно, а почему выбрана была джанга, а не RoR например?</p>

<p><strong>03/26/13 Иван Гришаев:</strong> Я не буду спорить с первой частью
  комментария. Что использовать - это вопрос предпочтений. Мне кажется
  удобным использовать специализированные решения, а не пилить
  универсальный Друпал. Заметьте, что я не предлагаю все писать на
  Джанге: на работе у нас бок о бок крутятся и ПХП, и Питон и, прости
  господи, 1С.</p>

<p>Джанго не мой любимый фреймворк, я больше предпочитаю Фласк -
микрофреймворк, аналог Синатры для Руби. Я полагаю, вас больше
интересует выбор языка? Питоном я заинтересовался, когда потребовалась
автоматизация процессов на производстве - работа с файлами, почтой,
парсингом документов, запросы к базам, работа COM-объектам в
Винде. Питон как язык общего назначения отлично справляется с такими
задачами, в отличии от Руби, который больше преуспел в вебе. И по
причине того, что уже много было написано на Питоне, веб-проекты я
делал на Джанго и Фласке. Руби и Питон в целом равнозначны, огромное
число холиваров тому подтверждение.</p>

<p><strong>03/26/13 Niklan:</strong> Просто я недавно никак не мог решиться, что
  начать учить. И я за неделю столько информации о Ruby и Python для
  веб разрабов перерыл, что так и не нашел явного лидера среди
  них. Выбрал руби, так как RoR показался более перспективным для
  веба. Да и все поголовно утверждают что для рор огромное количество
  плагинов, а для джанги в разы меньше.</p>

<p><strong>03/26/13 Иван Гришаев:</strong> Согласен, в области веб-разработки Руби
  имеет больше возможностей, нежели Питон, а Рельсы богаче Джанги. Но
  мериться количеством плагинов я бы не стал, т.к. за время работы с
  Джангой в силу специфики проектов мне крайне редко приходилось
  прибегать к стороннему коду. И нужно учитывать не столько моду,
  сколько спрос на ту или иную технологию в вашем городе.</p>

<p><strong>06/07/14 Елена Турлина:</strong> Здравствуйте!</p>

<p>Интересно было прочесть и статью, особенно несколько мест повеселили
:) (я как раз такой “пользователь”, хоть и ни разу ничего на друпал.ру
не спрашивала), и вашу дискуссию с Niklan.</p>

<p>Для меня всё это заоблачная даль, ибо программистом я ни разу не
являюсь, но с моим содействием и мной лично уже создано несколько
сайтов. Где-то были мои идеи и контент, а несколько последних делаю
сама со старта. Пришлось осваивать друпал. Он для меня оказался более
привычным, так как была админом нескольких проектов по моим идеям,
поэтому и выбор пал именно на него.</p>

<p>Сейчас в процессе создание нескольких интернет-магазинов, и я
действительно сталкиваюсь с большими трудностями, так как часто
вылазит что-то не понятное, и приходится разбираться каждый раз как
впервые разбиралась с такими действиями, которые сейчас уже на
автомате (например, установка ядра, правильный бэкап или тот же
потерянный вход в админку). Мне кажется, эти трудности никогда не
кончатся. Особенно удручают моменты, когда понимаешь, что конкретная
проблема решается только в режиме написания кодов или скриптов в
каких-то файлах — тут меня всегда пугает и отталкивает что-то большее,
чем по жёсткой инструкции заменить фалс на тру в определённой строке
определённого файла.</p>

<p>И вроде я хорошо обучаема, но, с другой стороны, понимаешь, что
изучить всё не хватит времени просто.</p>

<p>В ближайших планах ещё один проект, который подразумевает много всяких
сложных накруток, которых я в друпале ещё не делала и не представляю
ещё, как реализовывать. К примеру, разные классы ролей пользователей и
другие связанные с этим функции (иерархия, разная степень открытости
дискуссий и т. п.). Так вот у меня в связи с этим вопрос. Если проект
будет воплощён в друпале, а потом потребует чего-нибудь более
рационально-удобного для него, возможно ли будет перенести сайт (базу
данных + файлы) на другой движок? Или это принципиально невозможно, и
в чём рожали, в том и растите?</p>

<p><strong>06/07/14 Иван Гришаев:</strong> Добрый день!  Я полагаю, перенести данные
из одного движка в другой – задача не особо сложная, но муторная.
Нужно будет изучить структуру данных обоих движков и написать скрипт
переноса данных.  Потребуется искать специалиста, знающего сразу оба
движка.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/03/14/1/">Петиция в поддержку Гуглоридера</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-03-14T06:06:05+00:00">
        Mar 14, 2013
    </time>

    <a href="/tag/google/" rel="tag">google</a>

</div>


            <div class="entry">
                
                    <p>Гуглоридер <a href="http://habrahabr.ru/post/172665/">закрывают</a>.</p>

<p>Не допустим этого — подписываем
<a href="https://www.change.org/petitions/google-keep-google-reader-running">петицию</a>.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/03/04/1/">Накручивание голосований на Друпал.ру</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-03-04T05:46:40+00:00">
        Mar 4, 2013
    </time>

    <a href="/tag/python/" rel="tag">python</a>, <a href="/tag/drupal/" rel="tag">drupal</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Простой скрипт на Питоне, накручивающий голосовалки на Друпал.ру:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">threading</span>
<span class="kn">import</span> <span class="nn">urllib</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">random</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">nid</span><span class="p">,</span> <span class="n">variant</span> <span class="o">=</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="k">except</span><span class="p">:</span>
    <span class="k">print</span> <span class="s">"Usage: python poll.py nid variant"</span>
    <span class="nb">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>


<span class="n">PROXY_PATTERN</span> <span class="o">=</span> <span class="sa">r</span><span class="s">"\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}:\d{2,5}"</span>
<span class="n">POLL_URL</span> <span class="o">=</span> <span class="s">"http://www.drupal.ru/inner_poll/vote_js"</span>

<span class="n">PROXY_URLS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">"http://feeds.feedburner.com/best-proxy/oKhv"</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">proxies</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">PROXY_URLS</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">proxies</span><span class="p">.</span><span class="n">extend</span><span class="p">(</span><span class="n">re</span><span class="p">.</span><span class="n">findall</span><span class="p">(</span><span class="n">PROXY_PATTERN</span><span class="p">,</span> <span class="n">urllib</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">url</span><span class="p">).</span><span class="n">read</span><span class="p">()))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">continue</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">"n"</span><span class="p">:</span> <span class="n">nid</span><span class="p">,</span>    <span class="c1"># node id
</span>    <span class="s">"v"</span><span class="p">:</span> <span class="n">variant</span> <span class="c1"># variant id ("0,1,n" if multiple)
</span><span class="p">}</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">urllib</span><span class="p">.</span><span class="n">urlencode</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>

<span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">proxies</span><span class="p">),</span> <span class="s">"proxies =)"</span>
<span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">job</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
    <span class="n">time</span><span class="p">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">random</span><span class="p">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">))</span>
    <span class="n">urllib</span><span class="p">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">POLL_URL</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">proxies</span><span class="o">=</span><span class="p">{</span><span class="s">'http'</span><span class="p">:</span> <span class="s">'http://'</span> <span class="o">+</span> <span class="n">p</span><span class="p">})</span>

<span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">proxies</span><span class="p">:</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="p">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">job</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="p">))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">t</span><span class="p">.</span><span class="n">start</span><span class="p">()</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span>
</code></pre></div></div>

<p>Запускать так:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="n">poll</span><span class="p">.</span><span class="n">py</span> <span class="n">nid</span> <span class="n">variant</span>
</code></pre></div></div>

<p>, где nid — номер ноды, variant — номер варианта ответа (нумерация с
нуля) либо варианты через запятую.</p>

<p>Комментарии к коду.</p>

<ol>
  <li>На Друпал.ру голосование разрешено всем, даже анонимам.</li>
  <li>Единственное ограничение на голосование — IP должен быть уникальным
в пределах номера ноды.</li>
  <li>Запрос осуществляется методом POST с передачей двух переменных:
номера ноды и варианта. Про CSRF-токены не, не слышали.</li>
  <li>Каждый запрос делаем через свой прокси. Список прокси берем из
RSS-ленты сайта http://best-proxy.ru/ Лента, как вы заметили,
пропущена через Фидбернер, т.к. создатели сайта огораживаются от
граббинга.</li>
  <li>Каждый запрос выделяем в свой тред.</li>
  <li>КПД проксей где-то 10%, что тоже неплохо.</li>
</ol>

<p>Область применения скрипта — накрутка и троллинг.</p>

<h4 id="комментарии-из-старого-блога">Комментарии из старого блога</h4>

<p><strong>03/10/13 RxB:</strong> Ну зачем… Теперь все будут знать</p>

<p><strong>03/10/13 Иван Гришаев:</strong> Да и хрен с ним. Во-первых, на Д.ру одни
пхп-шники, во-вторых, best-proxy.ru больше не обновляется, прокси из
РСС-ленты не работают.</p>

<p><strong>03/25/13 Александр Мальков:</strong> Но, все равно - спасибо. Интересный
  подход.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/02/25/1/">Работа с Яндекс.Диском из 1С</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-02-25T05:10:38+00:00">
        Feb 25, 2013
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/yandex/" rel="tag">yandex</a>, <a href="/tag/1c/" rel="tag">1c</a>

</div>


            <div class="entry">
                
                    <p>1С умеет удивлять. Например, чтобы работать с Яндекс.Диском, не
требуется никакого шаманства, все из коробки:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Путь1 = "https://login:pass@webdav.yandex.ru/path/to/file.txt";
Путь2 = "c:\file.txt";
КопироватьФайл(Путь1, Путь2);
УдалитьФайлы(Путь1);
КопироватьФайл(Путь2, Путь1);
</code></pre></div></div>

<p>Данный код копирует файл из облака Яндекса на локальный диск, удаляет
из облака и заливает обратно.  Вместо <code class="language-plaintext highlighter-rouge">login</code> и <code class="language-plaintext highlighter-rouge">pass</code> подставляем
логин и пароль Яндекса.</p>

<p>Это дико удобно, потому что, в отличии от Дропбокса, Яндекс
поддерживает Вебдав. Диск от Яндекса раскачивается до 10 Гб в
полпинка. Таким образом, все прайсы, фотки и прочую статику можно
хранить в диске от Яндекса.</p>

<h4 id="комментарии-из-старого-блога">Комментарии из старого блога</h4>

<p><strong>04/17/13 Руслан:</strong> Приветствую, ну а что удивительного. Я так
  понимаю яндекс диск резервирует служебную папку. КопироватьФайл -
  просто копирует в эту папку файл, а яндекс приблуда висячая в трее,
  сама синхранизирует данные.</p>

<p>Пробовали сделать данный не шаманский код, без установленного яндекс
диск по?</p>

<p><strong>04/18/13 Иван Гришаев:</strong> Код работает без установленного Я.Диска. В
  1С где-то зашита поддержка протокола Вебдав, по которому работает
  Я.Диск. ФТП тоже поддерживается. В том и прикол, что для работы с
  файлами из облака устанавливать клиент не нужно.</p>

<p><strong>04/18/13 Руслан:</strong> Ну тогда действительно прикольная штука. Надо по
  экспериментировать ;)</p>

<p><strong>08/03/13 Илья:</strong> А уверены, что именно 1С поддерживает webDAV а не
ОС?  Попробуйте под ХР запустить этот код</p>

<p><strong>08/03/13 Иван Гришаев:</strong> Уверен, так написано в доках. А что, под
  Икс-пи не работает?</p>

<p><strong>12/23/13 Александр Маляев:</strong> Огромное спасибо за наводку! А то никак
  не мог придумать, куда бы свои 500Гб на Яндексе приспособить. А тут
  mail.ru еще облако замутило и терабайт в подарок всем дало, и WebDAV
  скоро обещают - вообще тема будет!</p>

<p><strong>01/16/14 Иван Гришаев:</strong> У мейл.ру подвох в том, что все залитые
  данные становятся их собственностью, они могут делать с ними все,
  что хотят. Например, слить бекапы ваших баз конкурентам. Разве что
  на архив выставлять пароль.</p>

<p><strong>01/16/14 Александр Маляев:</strong> Вы сами понимаете что они это делать не
  будут. Всего один прецедент, и его так раструбят по всем соцсетям и
  новостным лентам, что потом не отмоешься. А при миллиардных оборотах
  так глупо рисковать своей репутацией ради каких-то копеечных
  архивов? Техподдержка MAIL.RU уже отвечала на этот вопрос, дав
  понять что этот пункт просто формальность. Конечно все мы понимаем
  что если спецслужбам понадобятся материалы то любой их предоставит,
  и MAIL.RU не исключение, но многим ли есть повод скрывать что-то от
  высокопоставленных органов? Мелкие нарушения в налоговом
  законодательстве никого не волнуют ни капли. За много лет моей
  работы сотни архивов баз и паролей ко всему прошли через почту,
  файлообменники, СМС - и ничего. А уж почта не менее доступна кому
  надо чем облака.</p>

<p><strong>01/16/14 Иван Гришаев:</strong> Снимите розовые очки. Номера телефонов
  продают спамерам все. Мейл ру могут слить ваши данные, потому что вы
  не сможете явно доказать, что слили именно они. Вручную они не буду
  рыться в ваших данных, скорее, это делает программа, которая ищет во
  всей этой помойке что-то интересное. Базы от 1С интересны, их можно
  тайком продавать.</p>

<p><strong>01/16/14 Александр Маляев:</strong> Да, кстати в 1С 7.7 такой поддержки
  WebDAV нет.</p>

<p><strong>02/27/14 Виталий:</strong> А есть ли возможность из 1С8 получить публичную
  ссылку на скопированный файл.</p>

<p><strong>02/27/14 Иван Гришаев:</strong> Нет, только средствами Я.Диска.</p>

<p><strong>03/16/15 Андрей:</strong> А куда этот код надо прописать? и как без ПО
  яндекс.Диска настраивать путь к базе из самой 1с?</p>

<p><strong>03/16/15 Иван Гришаев:</strong> Этот код вы помещаете в любое место,
например, в тело формы, модуля.  Вторую часть вопроса не понял.</p>

<p><strong>03/16/15 Андрей:</strong> Подскажите можно настроить доступ к яндекс.диску
путем https://login:pass@webdav.yandex.ru/path/to/file.txt т.е при
выборе пути к БД что указывать? эту строку?  как работает такой
доступ?</p>

<p><strong>03/16/15 Иван Гришаев:</strong> Андрей, мне кажется, вы не так поняли. БД
тут ни при чем.  Предположим, что в Я-диске у вас есть папка
documents, а в ней файл price.xls.  И предположим, что ваш Я-логин
<code class="language-plaintext highlighter-rouge">andrey</code>, a пароль <code class="language-plaintext highlighter-rouge">Super123</code> Тогда вы можете выкачать файл из Я-диска
прямо из кода 1с таким образом</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>КопироватьФайл("https://andrey:Super123@webdav.yandex.ru/documents/price.xls", "c:\documents\price.xls");
</code></pre></div></div>

<p>или наоборот, загрузить файл с локального диска в Я-диск</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>КопироватьФайл("c:\documents\price.xls", "https://andrey:Super123@webdav.yandex.ru/documents/price.xls");
</code></pre></div></div>

<p>Проблема только в том, что в последних билдах 1С стал глючить SSL</p>

<p><strong>03/16/15 Андрей:</strong> А как подключить яндекс диске(с базой 1С) она
будет работать?  в настройках указать путь к БД 1с какой ? с дисками
локальными все понятно а как быть с Яндекс дискам? можно подключить
диск командой https://login:pass@webdav.yandex.ru?  или нет?  просто
хочу организовать доступ не локальный(БД не на компе), а скажем через
яндекс диск.  Это возможно ?</p>

<p><strong>03/16/15 Иван Гришаев:</strong> Андрей, вы можете синхронизировать файл
  базы через Я-диск только когда не работаете с ней. Когда вы
  начинаете работу, файл открывается процессом 1С и сторонние процессы
  не смогут его прочитать. Кроме того, если много клиентов постоянно
  перезаписывают один и тот же файл, могут возникнуть конфликты, и
  чья-то сторона вынуждена будет принять не свои данные. Если вам
  нужна единая база данных, воспользуйтесь хостингами вроде
  <code class="language-plaintext highlighter-rouge">virtual1c.net</code></p>

<p><strong>03/16/15 Александр Маляев:</strong> Андрей, теоретически это возможно, так
  как удаленную Webdav-папку можно смонтировать как локальный диск и
  работать с ней как с обычным диском. Но фактически вы работать не
  сможете, т.к. скорость будет примерно такая как если бы вы
  умудрились запустить 1С на каком-нибудь древнем 286-ом.</p>

<p>Если хотите удаленную а не локальную 1С - то смотрите в сторону
“облаков”, в случае этого решения и данные и их обработка происходят
на одном удаленном сервере, клиенту “гонится” либо картинка (в случае
удаленного рабочего стола), либо небольшие куски данных, отобранные и
обработанные сервером (в случае тонкого клиента).</p>

<p><strong>04/29/15 Алексей:</strong> Подскажите пожалуйста, доводилось ли Вам
получать с ЯндексДиск штатными средствами 1С 8.3 список файлов в
произвольной папке? Без подключения внешних XML библиотек ? Все пишут,
что надо сделать запрос (даже без тела), указав только атрибуты
(заголовки объекта HTTPЗапрос):</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PROPFIND / HTTP/1.1
Host: webdav.yandex.ru
Accept: */*
Depth: 0
Authorization: Basic "+ВКодировкеBase64(ЛогинПароль:ИмяФайла)
</code></pre></div></div>

<p>Но, <code class="language-plaintext highlighter-rouge">"PROPFIND / HTTP/1.1 "</code> - это ведь не атрибут, это команда. И как
тогда её выполнить штатными средствами 1С?</p>

<p><strong>04/29/15 Иван Гришаев:</strong> Здравствуйте, не приходилось.  Нужно
смотреть документацию, позволяет ли 1С отправить хттп-запрос методом
PROPFIND.  Если нет, то увы.</p>

<p>Проверьте, можно ли передать урл Яндекс-диска в функцию <code class="language-plaintext highlighter-rouge">НайтиФайлы()</code>
Если тоже нет, установите cURL из запускайте его из 1С как процесс.
Текст ответа распарсите силами 1с</p>

<p><strong>11/20/15 Сергей Лиманчук:</strong> Иван, всё прекрасно работало где-то
  полгода, но с середины вчерашнего дня не копирует никакие файлы, 1С
  возвращает ошибку “Удаленный узел не прошел проверку”. Любопытно,
  что мобильное приложение 1С для iOS продолжает работать, ошибка
  вылезает только на ПК.</p>

<p><strong>11/20/15 Иван Гришаев:</strong> Сергей, да, с какого-то времени схема
  перестала работать, к сожалению. Вы можете заменить диск от Яндекса
  на ФТП-сервер. Все то же самое, только в файловом пути пишете
  <code class="language-plaintext highlighter-rouge">ftp://</code> вместо <code class="language-plaintext highlighter-rouge">https://</code></p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/02/20/1/">Красота в Питоне: чистка строк</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-02-20T01:46:31+00:00">
        Feb 20, 2013
    </time>

    <a href="/tag/python/" rel="tag">python</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Есть многострочная (юникодная) строка. Скажем, номера телефонов в
столбик.</p>

<p>Как получить список телефонов безо всякой мишуры вроде пустых строк и
лидирующих/конечных пробелов ?</p>

<p>В Питоне это делается в 3 (три!) строки:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="sa">u</span><span class="s">'''
 23-33-34
   89644616130

     79144905640
 266653
'''</span>

<span class="n">phones</span> <span class="o">=</span> <span class="n">data</span><span class="p">.</span><span class="n">splitlines</span><span class="p">()</span>
<span class="n">phones</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">unicode</span><span class="p">.</span><span class="n">strip</span><span class="p">,</span> <span class="n">phones</span><span class="p">)</span>
<span class="n">phones</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="nb">bool</span><span class="p">,</span> <span class="n">phones</span><span class="p">)</span>


<span class="k">print</span> <span class="n">phones</span>
<span class="p">[</span><span class="sa">u</span><span class="s">'23-33-34'</span><span class="p">,</span> <span class="sa">u</span><span class="s">'8 964 461 61 30'</span><span class="p">,</span> <span class="sa">u</span><span class="s">'7 9144905640'</span><span class="p">,</span> <span class="sa">u</span><span class="s">'266653'</span><span class="p">]</span>
</code></pre></div></div>

<p>Вот за что я люблю этот язык.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/2013/02/08/1/">Джанго: тестовый сервер или боевой?</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2013-02-08T05:59:41+00:00">
        Feb 8, 2013
    </time>

    <a href="/tag/python/" rel="tag">python</a>, <a href="/tag/django/" rel="tag">django</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Вот как определить, в какой среде запущена Джанга:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># settings.py
</span><span class="kn">import</span> <span class="nn">sys</span>
<span class="n">DEBUG</span> <span class="o">=</span> <span class="s">"runserver"</span> <span class="ow">in</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span>
</code></pre></div></div>

<p>Очень удобно — при запуске тестового сервера всегда будет включен
дебаг, а в бою — выключен.</p>

                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page70" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 71 из 74</span>
        
        <a href="/page72" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
