<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page19/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/antisemitism/">Антисемитизм</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-11-08T00:00:00+00:00">
        Nov 8, 2019
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Советский Союз, при всем его равенстве и братстве, был антисемитским
государством. Еще в раннем детстве я заметил, что взрослые подмечают
национальность там, где в этом нет смысла. Например, в передаче “Что? Где?
Когда?” крупье обращается к условному господину Шпильману, и все такие — о,
еврей. С таинственной полуулыбкой, как будто раскрыли шпиона. Или в титрах:
продюсер Кацман. Ага, вот этот парень.</p>

<p>Помню, прочитал фантастический рассказ “Песок” о космонавтах, которые застряли
на планете-пустыне. Одного из героев звали Шапиро. Я пытался пересказать сюжет
бабушке, но она без конца перебивала меня словами “Шапиро это еврей, это
еврейская фамилия”.</p>

<p>Я понятия не имел, как определяют еврея. В какой-то момент я думал, что еврей —
это любой мужчина в костюме, очках и с щетиной, и что они настолько особенные,
что бывают только в телевизоре.</p>

<p>В великой державе с равными возможностями страдали не только евреи, но и
представители всех национальных меньшинств. Вспомним, как основатели Яндекса не
поступили в МГУ. У одного еврейские корни, у второго казахские. Значит, на
образование высшего ранга претендовать вы не можете.</p>

<p>С годами советские наследие выветрилось из родителей, и больше про евреев я не
слышал. Как хорошо, что сегодня не говорят “еврей” при виде человека с щетиной и
горбинкой на носу. Ну, кроме совсем больных личностей, малый процент которых
всегда найдется. Как здорово, что нынешние дети даже не поймут, о чем речь.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/clj-book-tests-1/">Тесты в Clojure (фрагмент главы)</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-11-07T00:00:00+00:00">
        Nov 7, 2019
    </time>

    <a href="/tag/clojure/" rel="tag">clojure</a>, <a href="/tag/book/" rel="tag">book</a>, <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/tests/" rel="tag">tests</a>

</div>


            <div class="entry">
                
                    <p><em>В последней главе мы поговорим о тестировании приложений. Читатель узнает, что
такое тесты и каких типов они бывают. Мы рассмотрим методы тестирования и
хорошие практики. Постараемся избежать лишней сложности: не будем злоупотреблять
терминами вроде TDD и BDT. Покажем, что в мире Clojure легко писать и
поддерживать тесты.</em></p>

<h2>

    Содержание

</h2>

<ul id="toc-item-clj-book-tests-1">
  <li><a href="#основные-понятия" id="toc-item-clj-book-tests-1-основные-понятия">Основные понятия</a>    <ul>
      <li><a href="#кейсы-и-покрытие" id="toc-item-clj-book-tests-1-кейсы-и-покрытие">Кейсы и покрытие</a></li>
      <li><a href="#не-только-числа" id="toc-item-clj-book-tests-1-не-только-числа">Не только числа</a></li>
      <li><a href="#когда-писать-тесты" id="toc-item-clj-book-tests-1-когда-писать-тесты">Когда писать тесты</a></li>
      <li><a href="#о-чистоте-функций" id="toc-item-clj-book-tests-1-о-чистоте-функций">О чистоте функций</a></li>
      <li><a href="#производство" id="toc-item-clj-book-tests-1-производство">Производство</a></li>
      <li><a href="#устройство-тестов" id="toc-item-clj-book-tests-1-устройство-тестов">Устройство тестов</a></li>
      <li><a href="#типы-тестов" id="toc-item-clj-book-tests-1-типы-тестов">Типы тестов</a></li>
    </ul>
  </li>
  <li><a href="#тесты-в-clojure" id="toc-item-clj-book-tests-1-тесты-в-clojure">Тесты в Clojure</a>    <ul>
      <li><a href="#командная-строка" id="toc-item-clj-book-tests-1-командная-строка">Командная строка</a></li>
      <li><a href="#repl" id="toc-item-clj-book-tests-1-repl">REPL</a></li>
    </ul>
  </li>
  <li><a href="#полезные-практики" id="toc-item-clj-book-tests-1-полезные-практики">Полезные практики</a>    <ul>
      <li><a href="#testing" id="toc-item-clj-book-tests-1-testing">Testing</a></li>
      <li><a href="#исключения" id="toc-item-clj-book-tests-1-исключения">Исключения</a></li>
      <li><a href="#пакетная-проверка" id="toc-item-clj-book-tests-1-пакетная-проверка">Пакетная проверка</a></li>
      <li><a href="#именование" id="toc-item-clj-book-tests-1-именование">Именование</a></li>
    </ul>
  </li>
  <li><a href="#фикстуры" id="toc-item-clj-book-tests-1-фикстуры">Фикстуры</a>    <ul>
      <li><a href="#регистрация" id="toc-item-clj-book-tests-1-регистрация">Регистрация</a></li>
      <li><a href="#пример" id="toc-item-clj-book-tests-1-пример">Пример</a></li>
      <li><a href="#на-нижнем-уровне" id="toc-item-clj-book-tests-1-на-нижнем-уровне">На нижнем уровне</a></li>
      <li><a href="#связанные-переменные" id="toc-item-clj-book-tests-1-связанные-переменные">Связанные переменные</a></li>
    </ul>
  </li>
  <li><a href="#мульти-фикстуры" id="toc-item-clj-book-tests-1-мульти-фикстуры">Мульти-фикстуры</a>    <ul>
      <li><a href="#минутка-неадекватности" id="toc-item-clj-book-tests-1-минутка-неадекватности">Минутка неадекватности</a></li>
      <li><a href="#фикстуры-с-условиями" id="toc-item-clj-book-tests-1-фикстуры-с-условиями">Фикстуры с условиями</a></li>
    </ul>
  </li>
  <li><a href="#метки-и-селекторы" id="toc-item-clj-book-tests-1-метки-и-селекторы">Метки и селекторы</a>    <ul>
      <li><a href="#тесты-в-depsedn" id="toc-item-clj-book-tests-1-тесты-в-depsedn">Тесты в deps.edn</a></li>
    </ul>
  </li>
  <li><a href="#проблема-окружения" id="toc-item-clj-book-tests-1-проблема-окружения">Проблема окружения</a>    <ul>
      <li><a href="#моки" id="toc-item-clj-book-tests-1-моки">Моки</a></li>
      <li><a href="#вынести-данные-в-файл" id="toc-item-clj-book-tests-1-вынести-данные-в-файл">Вынести данные в файл</a></li>
      <li><a href="#перенести-мок-в-фикстуру" id="toc-item-clj-book-tests-1-перенести-мок-в-фикстуру">Перенести мок в фикстуру</a></li>
      <li><a href="#негативные-сценарии" id="toc-item-clj-book-tests-1-негативные-сценарии">Негативные сценарии</a></li>
      <li><a href="#сбор-данных" id="toc-item-clj-book-tests-1-сбор-данных">Сбор данных</a></li>
      <li><a href="#недостатки" id="toc-item-clj-book-tests-1-недостатки">Недостатки</a></li>
      <li><a href="#стабы" id="toc-item-clj-book-tests-1-стабы">Стабы</a></li>
      <li><a href="#ресурсы-и-пути" id="toc-item-clj-book-tests-1-ресурсы-и-пути">Ресурсы и пути</a></li>
      <li><a href="#база-данных" id="toc-item-clj-book-tests-1-база-данных">База данных</a></li>
    </ul>
  </li>
</ul>


                    <p><a href="/clj-book-tests-1/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/save-page/">Сохранение страницы</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-10-30T00:00:00+00:00">
        Oct 30, 2019
    </time>

    <a href="/tag/internet/" rel="tag">internet</a>

</div>


            <div class="entry">
                
                    <p>Вот что меня удивляет. Хром и браузеры на WebKit захватили весь мир, фирмы
выбрасывают старые движки, Мейл.ру и Яндексы ставят офисному планктону хромовые
поделки. И до сих пор не решена банальная проблема. Я хочу сохранить страницу на
диск, а потом открыть ее и увидеть в том же виде.</p>

<p>Простое сохранение страницы работает не всегда. Вот прямо сейчас проделайте
следующее. У вас же Хром, да? Откройте любой проект на Гитхабе, <a href="https://github.com/cognitect-labs/test-runner">хоть
этот</a>, например:</p>

<p><img src="/assets/static/aws/1059232/67860687-8d0d3b00-fb2f-11e9-8d92-4949975c04b6.png" title="good" /></p>

<p>Сохраните страницу на диск (Ctrl/Command + S). Теперь откройте
html-файл. Как оно?</p>

<p><img src="/assets/static/aws/1059232/67860695-90082b80-fb2f-11e9-8795-b56096b8da4e.png" title="ugly" /></p>

<p>Ужасно. Причина в том, что Хром ограничивает доступ к локальному ресурсу из-за
<a href="/cors">CORS-ограничений</a>. Безопасность и все такое, но в итоге я не вижу
страницу. То же самое в любом Хромо-браузере: Опере, Edge, поделки от русских
фирм. И даже в Сафари. А вот Firefox и, внезапно, Internet Explorer показывают
нормально.</p>

<p>С сохранением страниц всегда была беда, сколько помню. Какие-то браузеры
сохраняют исходный код страницы. Например, если это SPA, то вы ничего не
увидите. Другие не скачивают стили и ресурсы. Если я хочу сохранить страницу,
чтобы прочесть ее в самолете или поезде, то нет никакой гарантии, что все
пройдет нормально. Открыл в поезде ноут, а там голый HTML. Извини друг, просто
это небезопасно.</p>

<p>Другая странность — браузеры до сих пор не могут сделать скриншот страницы. Я в
курсе про тысячи расширений для Хрома, но вопрос все равно открыт. На
техническом уровне любой браузер может выплюнуть картинку. Я писал либу для
протокола WebDriver, и это работает даже для Phantom.js. Послал запрос, получил
PNG в Base64. Зачем плодить расширения там, где все и так есть, непонятно.</p>

<p>Если запинить вкладку в браузере, то рано или поздно она выпадет из памяти на
диск. Переключитесь на нее, когда нет интернета, и увидите белый экран. По сути,
есть только один надежный способ сохранить страницу — напечатать ее в
PDF. Недостаток в том, что печатная версия иногда отличается в худшую сторону от
оригинала. Так и живем.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/book-progress/">Что там с книгой?</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-10-28T00:00:00+00:00">
        Oct 28, 2019
    </time>

    <a href="/tag/book/" rel="tag">book</a>

</div>


            <div class="entry">
                
                    <p>На этих выходных я выступал <a href="https://cloju.ru/">на конференции</a> в Москве. Было
очень приятно встретить людей, которых долгое время видел только на
аватаре. Среди прочего несколько человек благодарили про книгу по Кложе, которую
я пишу и выкладываю в блоге. Интересовались судьбой проекта, сроками. Я подробно
отвечал и хочу, чтобы вы тоже знали.</p>

<p>Черновик книги почти закончен: написано шесть глав из планируемых
семи. Последняя как раз на середине. Я должен был закончить ее примерно к этому
времени, но попала вожжа под хвост: увлекся параллельной темой, завтра-завтра, и
процесс заглох. Спасибо всем, кто подошел и сказал про книгу. Так я понял, что
ее ждут, и продолжил писать на следующий же день после конференции.</p>

<p>Параллельно приступаю к поиску издательства. Это новая для меня вещь, потому что
бумажные книги я еще не издавал. <a href="https://leanpub.com/clojure-java-interop/">Электронная</a> на LeanPub не в
счет. Там всего лишь заполнил форму, приложил файл и прошел минимальные
проверки. С бумажной книгой все по-другому: долго, дорого и изматывающе.</p>

<p>Книжные издательства отвечают в течение месяца, а чаще всего вообще не
отвечают. Я уже написал два письма месяц назад и не получил ответа. Но вообще я
их не виню: слышал от одного человека, что издательства просто заваливают
рукописями. Сейчас каждый пятый что-то пишет и жаждет опубликовать. Для
издательства выбрать книгу это как нам нанять фронтендера: все кричат, что они
Д’Артаньяны, а на деле… вы поняли.</p>

<p>Намереваюсь выпустить книгу только в бумажном варианте. Не потому, что опасаюсь
пиратства — время, которое я на нее потратил, я не окуплю, даже если книга
пойдет за 5000 рублей за экземпляр. Просто хочу, чтобы книгу прочитали. Если вы
скачаете ее на диск в виде файла, пусть даже за деньги, то, наверное, забросите
в папку “прочесть позже”, и так она останется там навсегда. Давайте честно,
когда в последний раз вы прочли книгу от корки до корки с монитора? Я
бумажные-то еле-еле дочитываю, а уж сколько скачал pdf-ок…</p>

<p>Спрашивали, как отблагодарить за книгу, предлагали завести патреон. Кто-то даже
сказал — не писать же тебе пустое спасибо, давай хоть денег дам. Все в точности
наоборот. Зачем мне, главе семьи, сотруднику швейцарской фирмы, ваши двести
рублей? Ну, наберется их на три тысячи, и что? Гораздо лучше, если вы пришлете
абзац текста о том, как вам помогла книга. Что в ней хорошего, где косяки,
опечатки. Одно такое письмо даст заряд для новой главы или даже книги. Так что
все это не про деньги. Мотивация, вот что важно.</p>

<p>Ближе к выходу книги я бы хотел собрать отзывы в отдельном посте и ссылаться на
него. Отзывы станут основной для будущей промо-страницы. Возможно, они
пригодятся мне, когда буду разговаривать с издательством.</p>

<p>План такой: в ближайшие три недели заканчиваю главу и публикую ее в блоге. Затем
сажусь за чистовик: все перечитываю, исправляю опечатки, нелепые обороты,
неудачные примеры заменяю чем-то получше. Первые главы отличаются от последних
по стилю, это надо порешать. Знаю пару мест, где не помешала бы диаграмма. Это
будет чистовая версия, доступная только на бумаге.</p>

<p>Параллельно ищу и договариваюсь с издательством. Если ничего не выйдет,
отпечатаю за свой счет сто экземпляров и продам по себестоимости. Основная цель,
конечно, перевести книгу на английский язык: западная аудитория все же больше
русской на порядок-два. Поэтому ваши отзывы так важны: даже если вы обнаружили
неточность в напечатанной версии, есть шанс, что я исправлю это в переводе.</p>

<p>Кто-то из гостей конференции посетовал, что книгу заканчивать рано, еще столько
всего не сказано. Но я ведь не говорил, что после этой книги больше не буду
писать про Кложу! В моей тетради записан конспект, и все, что я пока написал
(около 300 страниц), покрывает его где-то на четверть. Так что тема для
материала есть, была бы только воля все это сделать.</p>

<p>Коротко напомню, что это за книга и почему следует ее купить. Я пишу про Кложу —
замечательный язык программирования. От него получаешь почти физическое
удовольствие: язык устроен так, что решать сложные задачи становится проще. Он
меняет уклад мышления, будет трудно вернуться к обычным императивным языкам.</p>

<p>В своей книге я касаюсь нескольких тем. Я не ставлю цель покрыть весь язык — это
уже сделали до меня. В этом и отличие: я беру узкую тему и копаю так глубоко,
насколько это возможно. В типичной книге про исключения написана страничка. У
меня это глава. Про системы вообще никто не пишет. У меня про это 55 страниц. И
все — практика, практика, практика. Все опробовано на себе: работает или нет, и
когда, и при каких условиях, и почему так, а не иначе, и что там сидит под
крышкой. Аналогов я не видел.</p>

<p>Вот как обстоят дела с книгой. Писал это в том числе и для себя, чтобы лучше
понимать ситуацию. Еще раз спасибо всем, кто подошел на конференции, и думаю,
что все-таки выйдет!</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/maketime/">Доклад Make Time</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-10-11T00:00:00+00:00">
        Oct 11, 2019
    </time>

    <a href="/tag/maketime/" rel="tag">maketime</a>, <a href="/tag/books/" rel="tag">books</a>, <a href="/tag/video/" rel="tag">video</a>

</div>


            <div class="entry">
                
                    
<iframe width="700" height="550" src="https://www.youtube.com/embed/oS0fFRmE4oE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe>

<p>На прошлом митапе рассказал о книге <a href="https://maketime.blog/">Make Time</a>. Это о том, как находить
время на личные проекты без ущерба для работы и семьи. Перечислил практики,
которые удалось закрепить. Горячо рекомендую купить и прочесть эту
книжку. Другие клевые книжки смотрите на <a href="/bookshelf/">книжной полке</a>.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/clj-book-systems/">Системы в Clojure</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-08-25T00:00:00+00:00">
        Aug 25, 2019
    </time>

    <a href="/tag/clojure/" rel="tag">clojure</a>, <a href="/tag/book/" rel="tag">book</a>, <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/systems/" rel="tag">systems</a>

</div>


            <div class="entry">
                
                    <p><em>В этой главе мы поговорим о системах. Рассмотрим, как составить проект из
отдельных частей и заставить их работать вместе.</em></p>

<h2>

    Содержание

</h2>

<ul id="toc-item-clj-book-systems">
  <li><a href="#подробнее-о-системе" id="toc-item-clj-book-systems-подробнее-о-системе">Подробнее о системе</a></li>
  <li><a href="#зависимости" id="toc-item-clj-book-systems-зависимости">Зависимости</a></li>
  <li><a href="#преимущества" id="toc-item-clj-book-systems-преимущества">Преимущества</a></li>
  <li><a href="#подготовка-к-обзору" id="toc-item-clj-book-systems-подготовка-к-обзору">Подготовка к обзору</a></li>
  <li><a href="#база-данных" id="toc-item-clj-book-systems-база-данных">База данных</a></li>
  <li><a href="#docker" id="toc-item-clj-book-systems-docker">Docker</a></li>
  <li><a href="#mount" id="toc-item-clj-book-systems-mount">Mount</a>    <ul>
      <li><a href="#первая-сущность" id="toc-item-clj-book-systems-первая-сущность">Первая сущность</a></li>
      <li><a href="#связь-с-конфигурацией" id="toc-item-clj-book-systems-связь-с-конфигурацией">Связь с конфигурацией</a></li>
      <li><a href="#база-данных-1" id="toc-item-clj-book-systems-база-данных-1">База данных</a></li>
      <li><a href="#фоновая-задача" id="toc-item-clj-book-systems-фоновая-задача">Фоновая задача</a></li>
      <li><a href="#все-вместе" id="toc-item-clj-book-systems-все-вместе">Все вместе</a></li>
      <li><a href="#зависимости-1" id="toc-item-clj-book-systems-зависимости-1">Зависимости</a></li>
      <li><a href="#внутреннее-устройство" id="toc-item-clj-book-systems-внутреннее-устройство">Внутреннее устройство</a></li>
      <li><a href="#состояние" id="toc-item-clj-book-systems-состояние">Состояние</a></li>
      <li><a href="#выборочный-запуск" id="toc-item-clj-book-systems-выборочный-запуск">Выборочный запуск</a></li>
      <li><a href="#проблема-перезагрузки" id="toc-item-clj-book-systems-проблема-перезагрузки">Проблема перезагрузки</a></li>
      <li><a href="#самостоятельная-работа" id="toc-item-clj-book-systems-самостоятельная-работа">Самостоятельная работа</a></li>
    </ul>
  </li>
  <li><a href="#component" id="toc-item-clj-book-systems-component">Component</a>    <ul>
      <li><a href="#устройство" id="toc-item-clj-book-systems-устройство">Устройство</a></li>
      <li><a href="#первый-компонент" id="toc-item-clj-book-systems-первый-компонент">Первый компонент</a></li>
      <li><a href="#конструктор" id="toc-item-clj-book-systems-конструктор">Конструктор</a></li>
      <li><a href="#особенность-слотов" id="toc-item-clj-book-systems-особенность-слотов">Особенность слотов</a></li>
      <li><a href="#компонент-базы" id="toc-item-clj-book-systems-компонент-базы">Компонент базы</a></li>
      <li><a href="#транзакционный-компонент" id="toc-item-clj-book-systems-транзакционный-компонент">Транзакционный компонент</a></li>
      <li><a href="#воркер" id="toc-item-clj-book-systems-воркер">Воркер</a></li>
      <li><a href="#ручные-зависимости" id="toc-item-clj-book-systems-ручные-зависимости">Ручные зависимости</a></li>
      <li><a href="#промышленная-система" id="toc-item-clj-book-systems-промышленная-система">Промышленная система</a></li>
      <li><a href="#хранение-системы" id="toc-item-clj-book-systems-хранение-системы">Хранение системы</a></li>
      <li><a href="#корректное-завершение" id="toc-item-clj-book-systems-корректное-завершение">Корректное завершение</a></li>
      <li><a href="#ожидание-системы" id="toc-item-clj-book-systems-ожидание-системы">Ожидание системы</a></li>
      <li><a href="#улучшаем-зависимости" id="toc-item-clj-book-systems-улучшаем-зависимости">Улучшаем зависимости</a></li>
      <li><a href="#группировка-слотов" id="toc-item-clj-book-systems-группировка-слотов">Группировка слотов</a></li>
      <li><a href="#условная-система" id="toc-item-clj-book-systems-условная-система">Условная система</a></li>
      <li><a href="#спуск-системы" id="toc-item-clj-book-systems-спуск-системы">Спуск системы</a></li>
      <li><a href="#идемпотентность" id="toc-item-clj-book-systems-идемпотентность">Идемпотентность</a></li>
    </ul>
  </li>
  <li><a href="#integrant" id="toc-item-clj-book-systems-integrant">Integrant</a>    <ul>
      <li><a href="#базовое-устройство" id="toc-item-clj-book-systems-базовое-устройство">Базовое устройство</a></li>
      <li><a href="#первые-компоненты" id="toc-item-clj-book-systems-первые-компоненты">Первые компоненты</a></li>
      <li><a href="#зависимости-2" id="toc-item-clj-book-systems-зависимости-2">Зависимости</a></li>
      <li><a href="#параллели-с-component" id="toc-item-clj-book-systems-параллели-с-component">Параллели с Component</a></li>
      <li><a href="#проблема-потери-ключей" id="toc-item-clj-book-systems-проблема-потери-ключей">Проблема потери ключей</a></li>
      <li><a href="#система-в-файле" id="toc-item-clj-book-systems-система-в-файле">Система в файле</a></li>
      <li><a href="#наследование-ключей" id="toc-item-clj-book-systems-наследование-ключей">Наследование ключей</a></li>
      <li><a href="#другие-стадии-компонента" id="toc-item-clj-book-systems-другие-стадии-компонента">Другие стадии компонента</a></li>
      <li><a href="#подготовка" id="toc-item-clj-book-systems-подготовка">Подготовка</a></li>
      <li><a href="#спека" id="toc-item-clj-book-systems-спека">Спека</a></li>
      <li><a href="#приостановка" id="toc-item-clj-book-systems-приостановка">Приостановка</a></li>
    </ul>
  </li>
  <li><a href="#заключение" id="toc-item-clj-book-systems-заключение">Заключение</a></li>
</ul>

<p>Понятие системы тесно связано с конфигурацией, которую мы подробно рассмотрели
недавно. На этапе черновика конфигурация и системы составляли одну главу, но со
временем стало ясно, что это отдельные темы. Причина кроется не столько в объеме
материала, сколько в семантике. Конфигурация и система это не одно и то же.</p>

<p class="draft-warn">Внимание! Вы читаете черновик к книге <a href="/clojure-in-prod/">“Clojure на производстве”</a>. Для
книги я переписывал его много раз, но в блоге осталась старая версия. Здесь она
для истории, а вам я рекомендую купить книжку.</p>

<p>Конфигурация учит тому, как получить параметры из внешнего мира. Как выстроить
этот процесс согласно производству и пожеланиям команды. Система означает
внутреннее устройство программы. Это набор компонентов с логическими связями и
иерархией.</p>

<p>Система зависит от конфигурации, но не строго один к одному. Для одной и той же
конфигурации бывают разные системы и наоборот. Главное отличие в следующем:
конфигурация отвечает на вопрос как получить параметры, а система знает, как ими
распорядиться.</p>


                    <p><a href="/clj-book-systems/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/movies/">Слабые фильмы</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-08-12T00:00:00+00:00">
        Aug 12, 2019
    </time>

    <a href="/tag/movies/" rel="tag">movies</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Уже пятый раз со мной такое. Читаю на условной Медузе про нашумевший фильм, иду,
и… фильм оказывается удивительно слабым. Кинокритик разливался соловьем, а
фильм затянут, конфликт примитивен, диалоги и сцены натянуты. Выхожу из зала с
разочарованием.</p>

<p>Это случается все чаще и чаще. То ли я постарел, то ли ожидаю слишком многого. Я
далеко не киноман — появляюсь в кинотеатре раз в три месяца. Мои чувства не
притуплены бесконечными сериалами и фильмами. Может, в этом и проблема, как ни
парадоксально?</p>

<p>Я вспомнил фильмы, от которых многого ожидал, но в итоге они оказались слабыми.</p>

<p><strong>Магазинные воришки</strong></p>

<p>Фильм про семью бедняков в Японии. Живут в нищите, зато дружно. Родители учат
детей воровать в магазинах. Поначалу приятно: японский быт, ужин дошираками в
тесном кругу. Семья подбирает девочку, с которой плохо обращаются, и ее
принимают как дочь. Но потом слишком затянуто, ноль действия.</p>


                    <p><a href="/movies/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/bad-projects/">Плохие проекты</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-08-02T00:00:00+00:00">
        Aug 2, 2019
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/projects/" rel="tag">projects</a>

</div>


            <div class="entry">
                
                    <p><em>Поговорим о плохих проектах. Как понять, что проект плохой, а команда не
профессиональна? Я собрал несколько признаков, которые прямо или косвенно
говорят об этом. С каждым из них я борюсь много лет и вот решил написать. Если
вы узнали свою команду, на вашем месте я бы встревожился.</em></p>

<p><strong>Проект не подготовлен к старту</strong></p>

<p>К сожалению, не каждый проект готов к старту после того, как вы скачали его
код. И редко когда в проекте есть скрипт или Make-файл, который подготовит все
нужное. Хотя технически это возможно.</p>

<p>Например, в условный Makefile можно засунуть установку виртуального окружения,
утилит и пакетов, перенос файлов, скачивание ресурсов с сервера… но почти
никто этого не делает. Приходится долбить коллег тупыми вопросами. Где взять
этот файлик? Почему не ставится эта библиотека?</p>

<p>Причина кроется в лени и неуважении к коллегам. Если ты проделал рутинную
подготовку, то почему бы не скопировать команды терминала в файл? Разве не
очевидно, что следующий разработчик пойдет по тем же граблям?</p>

<p>В каждом проекте я держу Makefile и наполняю его разными задачами. Это база
знаний о том, что можно сделать с проектом. Иногда коллега что-то спрашивает, а
я отвечаю с именем Make-задачи, которую нужно запустить.</p>

<p>Если проект стартует только после часовой ручной подготовки, это плохой
проект. Плох не код, а команда, которая его поддерживает. У них не принято
думать об удобстве коллег, что критично в повседневной работе.</p>


                    <p><a href="/bad-projects/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/slides/">Слайды</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-07-22T00:00:00+00:00">
        Jul 22, 2019
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/slides/" rel="tag">slides</a>

</div>


            <div class="entry">
                
                    
<p>Я смонтировал около ста выступлений (<a href="https://www.youtube.com/channel/UCkmu866apk8FbOMuEIQvH0g/videos">раз</a>, <a href="https://grishaev.me/video/">два</a>,
<a href="https://www.youtube.com/channel/UCeg__Hf-lzDamDu_CY9ibHQ/videos">три</a>) и подметил недостаток, про который мало кто говорит.</p>

<p>Вот закончил человек презентацию. Спасибо, вопросы? Кто-то задал, уточняет
детали. Выступающий: это же было на третьем слайде! И давай мотать в самое
начало с тридцать пятого слайда на третий.</p>

<p>Так делать не надо. Во-первых, если вопрос по существу и зритель следил за
мыслью, показывать слайд опять нет смысла. Вы уже показывали его, но что-то
осталось непонятно. Скорей всего это вы объяснили плохо. Не нужно держать
зрителя за дурака и тыкать ему тот же слайд. Правильно объяснить другими
примерами и образами.</p>

<p>Во-вторых, во время перемотки образуется дурацкая пауза. Нажать двадцать раз на
кнопку не так просто, и секунд пять-десять зрители ждут. Это мертвая зона, от
которой становится неловко. Всех, кто выходит на сцену, учат — пауз быть не
должно, особенно технических. Вы со своей презентацией не исключение.</p>

<p>Возьмите на заметку: не мотать слайды из конца в конец.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/wired/">Прослушка</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2019-07-16T00:00:00+00:00">
        Jul 16, 2019
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/wired/" rel="tag">wired</a>, <a href="/tag/google/" rel="tag">google</a>

</div>


            <div class="entry">
                
                    <p>У нас дома телевизор, но мы пользуемся им как панелью. Антенны нет, подключаю
ноут по HDMI и телек виден как второй монитор. Недавно обнаружил, что девайс
продвинутый, с магазином приложений. Поставил Ютуб, зашел под учеткой и теперь
смотрю без ноута.</p>

<p>Вчера включал дочке мульты. На главной Ютуба рекомендованные видео. Обычно это
советские мультики вперемешку с тем, что я слушаю на работе. То есть
Цветик-Семицветик — Korn — Кошкин дом — Enigma и так далее.</p>

<p>Но то, что я вчера увидел, заставило насторожиться. Ютуб предлагал к просмотру
“Самогонщики” Гайдая. Помните, комедийная новелла с забавной троицей? С обложки
смотрят Моргунов, Никулин и Вицин с характерными физиономиями.</p>

<p>Я стал ломать голову, с какого перепугу Гугл рекомендует что-то подобное, и не
находил ответа. Я не смотрел ничего из советского кинематографа лет пять. Не
гуглил биографии актеров. Мои интересы полностью ортогональны “Самогонщикам” и
всему творческому пласту того времени.</p>

<p>А потом догадался, и стало не по себе.</p>

<p>Днем раньше я ехал в поезде. Ездили с сыном в деревню к бабушке. Поезд был
фирменный, сидели в купе. Над входом в купе висел телевизор, по которому крутили
“приключения Шурика”. В поездке я открывал ноут и подключал хот-спот. Интересное
совпадение — вчера ты сидел возле телевизора с “Шуриком”, а сегодня Ютуб
предлагает “Самогонщиков”.</p>

<p>Если это так, остается одно объяснение. Устройства слушают шум вокруг нас и
отправляют в сервисы Гугла. Система распознает музыку, и корректирует веса
рекомендаций.</p>

<p>Конечно, это не новость. Все большие компании хоть раз да были замечены в сборе
данных без нашего ведома. На месте фирмы я бы тоже их собирал. Это ценная
информация, с какой стати отказываться?</p>

<p>Но это первый раз, когда я столкнулся с такой сложной схемой. Передать шум
поезда на сервер, распознать “Операцию Ы” и перестроить рекомендации – это
все-таки сильно. У меня нет претензий к Гуглу: никто не умер, я сам на все
подписался. Только удивление и тема для размышлений.</p>

<p>Кстати, именно поэтому я вырезал в веб-версии Ютуба блоки с рекомендациями. Это
делается ад-блоком: навел курсор на регион и добавляешь селектор в черный
список. Я не могу жить с этими блоками. Они начисто лишают хоть какой-то
приватности, выдают все до последней интимности.</p>

<p>Однажды я посмотрел выступление Петросяна, которое запомнил из детства. Блок
наводнился Степаненко, Маменко, бабками из Кривого зеркала и всей этой
публикой. Не отмоешься!</p>

<p>Я полагаю, что системы рекомендации чувствительны к резкой смене
контента. Возможно, это сделано специально. Может быть, для системы это значит,
что за комп сел другой человек. Никто же не переключает учетку на айпаде,
которым пользуется вся семья. Если смотрели пять Лунтиков, а потом Петросяна,
это значит, что девайс передали другому человеку. И теперь надо рекомендовать не
Смешариков, а Степаненко.</p>

<p>А если я не прав, то расскажите кто знает эту кухню.</p>

                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page18" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 19 из 63</span>
        
        <a href="/page20" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
