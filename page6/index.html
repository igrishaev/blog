<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page6/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px"><a href="/">Ivan Grishaev's blog</a></p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/open-source/">Open Source</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/apple-ai/">Кнопка Summarize</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-24T00:00:00+00:00">
        Apr 24, 2025
    </time>

    <a href="/tag/apple/" rel="tag">apple</a>, <a href="/tag/ai/" rel="tag">ai</a>

</div>


            <div class="entry">
                
                    <p>Компания Эпл следует тенденции: сует AI в каждую щель. Так, в почтовом
приложении над каждым письмом теперь кнопка “Summarize”, которая, как
предполагается, покажет краткую версию письма.</p>

<p><img src="/assets/static/aws/apple-ai/1.jpeg" /></p>

<p>Разумеется, это полная шляпа. Работает только с английским текстом и
text/plain. Если вам прислали графоманию на русском, и к тому же в виде
HTML-таблиц — кнопка скажет, что “не шмогла”. В целом, эта кнопка скорее не
работает, нежели работает.</p>

<p><img src="/assets/static/aws/apple-ai/2.jpeg" /></p>

<p>Все, что остается пользователю — это отключить кнопку, но не все так просто. Я
снял нужную галку, кнопка пропала, но потом появилась. Может быть, нужно
перезагрузиться, но ситуация уже абсурдна.</p>

<p><img src="/assets/static/aws/apple-ai/3.jpeg" /></p>

<p>Гугл и поддержка Эпла (читай — AI) как дурачки советуют снять эту галку. То, что
это не работает, никого не интересует.</p>

<p><img src="/assets/static/aws/apple-ai/4.jpeg" /></p>

<p><img src="/assets/static/aws/apple-ai/5.jpeg" /></p>

<p>Когда уже мир отпустит? Начинает немного раздражать.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/write-links/">Ссылки должны быть записаны</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/links/" rel="tag">links</a>

</div>


            <div class="entry">
                
                    <p><a href="/tabs-and-bookmarks/">Прошлую заметку</a> можно выразить другим тезисом, а именно:
каждая ссылка должна быть записана. В файле, в задаче, в заметках, где
угодно. Когда это так, нет смысла хранить ее все время открытой.</p>

<p>Например, мне нужно сделать что-то нетривиальное в Постгресе. Путем гугления я
нашел два ответа на StackOverflow, два раздела документации и пару чьих-то
блогов. Всего шесть ссылок. Можно хранить их открытыми все время, пока работаешь
над задачей. А можно добавить их в задачу и спокойно закрыть.</p>

<p>Почему второй способ лучше? По многим причинам, и самая важная – взрослый,
организованный подход. Вместо того чтобы сидеть на ссылках, как царь Кощей над
златом, мы делимся ими с другими. Возможно, в будущем к этой задаче кто-то
вернется и найдет эти ссылки. Их проще скопировать и переслать. Если работа
основана на сторонних материалах (код, замеры быстродействия), я считаю
правильным ссылаться на источники, чтобы было понятно, откуда решение.</p>

<p>В комментариях кто-то писал: моя задача требует документации, ссылок на то, се,
пятое-десятое плюс макеты в Фигме. Так добавь эти ссылки в задачу! Или ты ждешь,
что каждый участник будет искать эти ссылки? Это же свинство.</p>

<p>Разумеется, так мало кто делает, ровно как мало кто соблюдает сетевой этикет и
правила переписки. Это тот случай, когда нужно не смотреть на других, а самому
ставить нормы поведения. Например, добавлять в задачи ссылки на все нужные
материалы и просить других делать так же. Может быть, кто-то поймет, что это
правильно.</p>

<p>Или ты открыл десяток вкладок и тебя экстренно перекинули на другую задачу, а
она тоже требует 10 вкладок. Так и будешь хранить первые десять? Я понимаю, что
есть разные профили, окна, группировки… но не говорите, что все это работает
как надо, я даже слушать не хочу. Разве не было такого, что браузер вылетел и
все забыл? Или обновился и показывает одинокую вкладку “What’s new”?</p>

<p>Запись ссылок важна даже если работаешь в одиночку. Скажем, пилю я свой клиент к
Постгресу и мне нужны:</p>

<ul>
  <li>ссылки на документацию</li>
  <li>ссылки на исходники Постгреса</li>
  <li>ссылки на чужие клиенты, чтобы подсматривать решения</li>
  <li>вопросы на StackOverflow</li>
  <li>всякие мейл-листы.</li>
</ul>

<p>Поэтому я завожу в репозитории файл <code class="language-plaintext highlighter-rouge">links.md</code> и пишу туда ссылки.</p>

<p>Когда кто-то говорит, что у него пять сотен вкладок, увы, я не верю, что в них
возможен какой-то порядок. Это самообман. Все сводится к принципу: записал –
отпустил. Пока что-то не записано, оно не свободно. И мы тоже от него не
свободны.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/tabs-and-bookmarks/">Табы и закладки</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/browsers/" rel="tag">browsers</a>, <a href="/tag/tabs/" rel="tag">tabs</a>, <a href="/tag/bookmarks/" rel="tag">bookmarks</a>

</div>


            <div class="entry">
                
                    <p>Раз уж заговорили о браузерах, выскажу еще одну мысль.</p>

<p>Меня удивляет, как много обсуждают табы и закладки. Когда выходит какой-нибудь
Вивальди и об этом постят новость, комментари сводятся к табам и
закладкам. Когда будут вертикальные табы? Когда группировка? Когда автозакрытие
как в расширении X? И так далее.</p>

<p>Иногда мне даже жаль разработчиков, потому что сделать так, чтобы понравилось
всем, невозможно. Всегда найдется чудак, которому нужны табы по диагонали, в
крапинку и с синхронизацией через Амазон в докере. Приходится объяснять, что
этого не планируется, а он будет поливать разработчиков дерьмом.</p>

<p>Поэтому расскажу, как управлять табами в любом браузере: будь то Хром, форк
Фаекфокса или что угодно. Записывайте: когда у вас много табов, зажмите клавиши
Ctrl/Command + W. Все табы закроются. После этого откройте табы, что нужны для
текущей задачи. Конец.</p>

<p>Я использую эту схему много лет. Расплодились табы – сношу к чертям и начинаю
сначала. Не нужны расширения и синхронизации, вертикальные-горизонтальные и
прочий бред.</p>

<p>Уже рассказывал: человек шарит экран, и у него в Хроме 30 вкладок. И не вздумай
говорить, что ты ими управляешь!!! Табы сжаты до размеров иконки – как ты
найдешь нужный таб? Только перебором: вот этот таб, ой, не тот, ой, другой, ага,
вот этот. В чем прикол тыкать каждый раз как слепой щенок? Это как набрать в
руки десять предметов и утверждать, что можешь управиться с каждым.</p>

<p>Будь я разработчиком браузера, я бы открыто сказал: ребят, если вы держите 40
вкладок, вам нужно не расширение, а пойти прогуляться.</p>

<p>Сюда же относятся закладки: тратят сотни часов, чтобы найти расширение и
настроить синхронизацию. А потом ноют, что в каком-то андроиде не подсосались
последние ссылки.</p>

<p>Решение простое: храните ссылки в файлике, который синхронизируется через
Dropbox, iCloud или что там у вас. У меня это файлы <code class="language-plaintext highlighter-rouge">music.md</code>, <code class="language-plaintext highlighter-rouge">postgres.md</code> и
другие. Содержимое примерно такое:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Silent Hill 2 Remake OST</span>
https://www.youtube.com/watch?v=UFBq69uB-es&amp;list=PLjvrSyTT3pvSbHUpqC3sSC3b9Fq7NuF6b

<span class="gh"># J. S. Bach - Organ Works - Lionel Rogg - DISC 2/12</span>
https://www.youtube.com/watch?v=rudjAUtfx-g

<span class="gh"># Toccata &amp; Fugue in C Major, BWV 564</span>
https://www.youtube.com/watch?v=kxtJ_av5NHo

<span class="gh"># Pink Floyd - Obscured By Clouds (1972) [Full Album]</span>
https://www.youtube.com/watch?v=Te_-nISxLVI
</code></pre></div></div>

<p>Поскольку это маркдаун в Емаксе, то работают всякие плюшки. Клик на ссылку
открывает ее в браузере, есть быстрый переход по заголовкам, просмотр оглавления
и так далее. Можно делать несколько уровней, например так:</p>

<div class="language-markdown highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gh"># Ambient</span>
<span class="gu">## Portal 2</span>
<span class="gu">## Klaus Schulze</span>
<span class="gh"># Rock</span>
<span class="gu">## Queen</span>
<span class="gu">## Pink Floyd</span>
</code></pre></div></div>

<p>и оно будет красиво отображаться в виде дерева. Но мне достаточно одного
уровня. Схема проста как лопата, в ней нечему ломаться. Обновление браузера и
расширений на нее не влияют. Что еще нужно?</p>

<p>Конечно, кто-то всплакнет, мол, неудобно на телефоне. Ну и пусть – пока ты не
за компом, надо смотреть на солнце, а не тупить в экран. А если не дочитал
статью, то кинь ссылку себе в Телеграм, в чем проблема?</p>

<p>Главная мысль этого поста: не быть рабом своих желаний. Хочется такие-сякие табы
и закладки – перехочется. Бери то, что не сломается ни при каких
обстоятельствах. На долгой дистанции это единственный вариант.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/summer-shift/">Летнее время</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/time/" rel="tag">time</a>, <a href="/tag/shift/" rel="tag">shift</a>, <a href="/tag/amazon/" rel="tag">amazon</a>

</div>


            <div class="entry">
                
                    <p>Как известно, перевод часов на летнее время несет сплошную пользу. Прямо так
хорошо от него, так хорошо, что аж сам себе завидую. И под это дело потерял день
рабочего времени, и остальные тоже.</p>

<p>На работе я занимаюсь отчетностью. В Амазоне у меня зашедулено много отчетов,
каждый из которых уходит своим потребителям. Большинство из них я сделал прошлой
осенью и зимой, когда у заказчика было время +1. А весной произошло вот что.</p>

<p>Если не указать в Амазоне часовую зону cron-выражения, то по умолчанию берется
UTC. Это хорошо, потому что точка отсчета фиксирована. Но одно и то же время UTC
в зависимости от времени года дает разное локальное время. Например, зимой время
08:00 am UTC будет 9:00 am UTC+1, а летом – 10:00 am UTC+2.</p>

<p>Это значит, что после перевода часов потребители получат отчеты не в 9 часов, а
в 10 по местному времени.</p>

<p>Начались жалобы: что-то подумал, что все сломалось, кто-то не успел предоставить
отчет к созвону, где-то упал скрипт, который перекладывает отчеты в другое
место. Починил так: нужно указать под cron-выражением местную зону, например
<code class="language-plaintext highlighter-rouge">Europe/&lt;City&gt;</code>, и сдвинуть часы так, чтобы они совпадали с зимним временем, по
которому работало раньше. На то, чтобы разобраться, задеплоить и проверить, ушел
день. В первый раз я поднял часы на +2 вместо +1, и пришлось переделывать.</p>

<p>Коснулось и других коллег: Майкл, почему твоя задача запустилась на час позже? И
Майклу предстоит то же самое: считать на бумажке часы, деплоить и проверять.</p>

<p>У меня стойкая ассоциация: каждые полгода страна садится голой задницей на
гвоздь. За полгода рана заживает, и кажется, что в этот раз обойдется без
последствий. Но нет: снова боль, снова проблемы, крики. Никогда такого не было,
и вот опять.</p>

<p>Спрашивается: сколько можно? Сколько еще нужно выбросить времени, денег, нервов,
здоровья, чтобы чиновников отпустило? Десять лет? Сто лет? Уверен, в будущем над
нами будут смеяться: представляете, дети, эти придурки на рубеже тысячелетий
гоняли часы туда-сюда, чтобы сэкономить тысячу долларов на 20 миллионов
человек. Примерно как раньше сжигали людей, чтобы задобрить бога – с таким же
результатом.</p>

<p>Слышал, что за перевод времени люто топил Яков Перельман. Что неудивительно:
более яростного человеконенавистника нужно еще поискать. Может, хватит брать с
него пример?</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/same-icons/">Иконки в едином стиле</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/design/" rel="tag">design</a>, <a href="/tag/icons/" rel="tag">icons</a>, <a href="/tag/google/" rel="tag">google</a>, <a href="/tag/adobe/" rel="tag">adobe</a>

</div>


            <div class="entry">
                
                    <p>Беда, когда у компании несколько программ, и дизайнера просят сделать иконки “в
едином стиле”. Почти всегда получается шляпа.</p>

<p>Каноничный пример – Гугл. Пока у него не было тыщщи сервисов, у каждого была
своя симпатичная иконка. У почты – конверт, у звонков – телефонная трубка, у
карт – карта. Но потом позвали дизайнера и сказали делать в одном стиле. В
результате получились козявки с вариацией цветов: желтый, зеленый, красный,
синий.</p>

<p>Поставтье хотя бы две такие иконки рядом, и вы запутаетесь.</p>

<p>Радует, что подобную иконку не сделали Ютубу: проект настолько самобытен, что ни
у дизайнера, ни у менеджера не поднимается рука.</p>

<p>Иные иконки вообще лишены смысла, например у Google Authenticator. Старая иконка
представляла собой замок сейфа в виде буквы G. Казалось бы, все логично: сейф,
безопасность, буква. Новая иконка – это какая-то снежинка. Что хотел сказать
автор? Помню как обновил Google Authenticator и десять минут искал иконку
сейфа. И до сих пор не могу привыкнуть, что теперь это снежинка.</p>

<p>Более-менее было нормально у Адоба времен CS4. Они стилизировали иконки под
периодическую таблицу Менделеева. Смысл в том, что каждый элемент (то есть
программа) занимает свою уникальную роль, обладает особыми свойствами. Различать
программы помогало следующее:</p>

<ul>
  <li>на каждой из них было имя программы из двух букв, например Ps, Ai, Ae;</li>
  <li>иконки были разного цвета. Фотошоп – голубой, Иллюстратор – оранжевый, Индиз
– малиновый и так далее.</li>
</ul>

<p>Позже Адоб пошел по пути упрощения: иконки стали почти черно-белыми, а цвет
остался только в контуре. Предполагается, что пользователь должен парсить все
эти Ps, Ai, Ae, Id, Au, Pr и так далее.</p>

<p>Похоже, никто не может решить задачу иконок “в едином стиле”. А если и может, то
не справляется с давлением менеджмента. Так зачем вообще браться за это?</p>

<p><img src="/assets/static/aws/same-icons/1.jpg" /></p>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/pg-row-check/">ROW CHECK и безопасность</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/sql/" rel="tag">sql</a>, <a href="/tag/postgres/" rel="tag">postgres</a>

</div>


            <div class="entry">
                
                    <p>Работал я в одном стартапе на Кложе. Код прошел через десятки разработчиков и
представлял лоскутное одеяло: разные подходы и библиотеки. Каждый разработчик
городил что-то сбоку, а не исправлял текущее положение дел. Была своя ORM с
километрами кода и склейкой SQL-строк. Много там всего было, и в том числе база
данных.</p>

<p>Эта база прямо сейчас стоит в памяти. Она тоже прошла через серию разработчиков,
каждый из которых знал, как делать правильно. Одни ребята забивали на
нормализацию; другие решили, что добавлять колонки утомительно и сделали поле
info с типом jsonb, в которое валили все подряд. Были материализованные вьюхи,
обновлять которые было затратно, и которые без конца обновлялись из-за косяков в
очереди сообщений. Ни одна запись физически не удалялась, а помечалась флагом
<code class="language-plaintext highlighter-rouge">is_deleted = true</code>. Много багов было связано с тем, что данные выбирались без
этой проверки.</p>

<p>Но это не все. Основатель фирмы считал себя специалистом по безопасности и
придумал вот что. В Постгресе есть штука под названием <code class="language-plaintext highlighter-rouge">ROW CHECK</code>: проверка
доступа на уровне записи. Если некая функция <code class="language-plaintext highlighter-rouge">my_check(row)</code> возвращает <code class="language-plaintext highlighter-rouge">null</code>
или <code class="language-plaintext highlighter-rouge">false</code>, то клиент словно не видит этой записи. Это медленно, но работало.</p>

<p>Почему директор так сделал? Он хранил в одной таблице данные разных клиентов и
опасался, что из-за ошибки в коде один клиент увидит данные другого. Поэтому
каждая таблица хранила избыточные айдишки, и в рамках каждого запроса
выставлялась переменная <code class="language-plaintext highlighter-rouge">current_owner</code>. Функция <code class="language-plaintext highlighter-rouge">ROW CHECK</code> проверяла, что ее
значение совпадает с айдишками записи.</p>

<p>Воздвигнув этот бастион, директор спокойно сидел под рутовой учеткой, для
которой проверки были отключены. На моей памяти было два крупных инцидента,
когда он путал окна и выполнял на проде то, что хотел выполнить на
тесте. Терялись данные, пропадали целые таблицы.</p>

<p>К счастью, наши часовые зоны сильно отличались, поэтому на починку базы бросали
другого человека. По понедельникам он рассказывал, как просиживал выходные за
восстановлением бекапов, импортов CSV и отладкой. Были и другие, не столь
фатальные случаи, связанные с активностью директора на проде.</p>

<p>Забавно, но наибольший урон базе нанес именно директор, а не хакеры или кривой
код. Хакерам, видимо, стартап был не интересен, хотя в самописной ORM были дыры
для инъекций. Код, хоть и был не супер, не страдал тем, что читал чужие
данные. Свои удаленные – да, но не чужие.</p>

<p>Можно сказать одно: все запреты проверяются на прочность теми, кто их создает. У
меня доступ на прод был только для чтения. В другом стартапе права на запись
были, но под той учеткой я не ходил. В конце концов, был страх, что за подобный
инцидент уводят. А у директора страха не было, вот и результат.</p>

<p>В более широком ключе: запрет хорошо работает только тогда, пока его соблюдают
те, кто принимал. Не важно, о чем идет речь: о детях, собаках или машинах. Если
говорящая голова топит за очередной запрет, но не готова применить его к своим
детям, собакам или машинам, сказанное не имеет смысла.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/ff-forks/">Форки Фаерфокса</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/web/" rel="tag">web</a>, <a href="/tag/firefox/" rel="tag">firefox</a>, <a href="/tag/waterfox/" rel="tag">waterfox</a>

</div>


            <div class="entry">
                
                    <p>Заметка от нечего делать. Пробую форки Фаерфокса: поставил WaterFox и
LibreWolf. Первый очень понравился: старый рубленый интерфейс, доступны опции,
которых нет в официальной версии. Нет телеметрии и всякого дерьма вроде Покета и
синхронизаци. Очень шустрый. Потыкал Ютуб – все ролики работают. LibreWolf
вроде тоже неплох, присматриваюсь.</p>

<p>Пока что один минус: не работает webm, но стерпим и это.</p>

<p>Офицальный FireFox в последнее время не радует. Он сливает все больше данных, на
сайте меняются формулировки: вместо “не передаем” пишут “улучшаем
экспериенс”. Браузер обрастает Покетами-шмокетами, телеметрией и так
далее. Нельзя отказаться от обновлений, нужно писать свои полиси.</p>

<p>К счастью, есть достойные форки, которые пилят люди, не нацеленные на
прибыль. Их трудом пока что и буду пользоваться.</p>

<p>Пытался сидеть в чистом Хромиуме, но в нем не работает половина Ютуба. Причем
даже не видео, а музыка из игр и фильмов. Спасибо, не надо.</p>

<p>От коммерческих хромоподелок вроде Брейва уже тошнит. Тут тебе и крипто-кошелек,
и внутренние донаты, и свой поисковик, и то, и се, и облачная учетка, и
сторонний VPN по подписке, и целые джунгли впридачу. В Вивальди вообще завезли
почтовик и календарь с будильником.</p>

<p>Так что хоть мелкая, но отрада в наши дни: сидеть на форке некогда великого
продукта.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/cloud-driven-dev/">Cloud-driven development</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/cloud/" rel="tag">cloud</a>, <a href="/tag/aws/" rel="tag">aws</a>

</div>


            <div class="entry">
                
                    <p>Расскажу об одной стремной вещи, которую называю “Cloud-driven development”. Это
когда разработчик тестирует код не локально, а в облаке.</p>

<p>Выглядит так: нужно забрать откуда-то данные, переколбасить и сложить в другое
место. Программист пишет код, деплоит в свое окружение и дергает апишку. Она
падает. Он смотрит логи. Правит код, деплоит, дергает. Намылить, смыть,
повторить. На двадцатой итерации работает как надо, и он закрывает задачу.</p>

<p>А потом у него отпуск, и мне говорят: поправь. Нужно взять данные из еще одной
апишки и положить во второе место. Тестов либо нет, либо самые поверхностные.</p>

<p>Я как-то пытался играть по этим правилам. Быстро выяснилось, что окружение нужно
готовить. Ой, у тебя старые сервисы, задеплой к себе эту фигню и эту тоже. У
твоей облачной учетки нет пермишенов? Скажи девопсу Джорджу, чтобы добавил. Он в
отпуске? Ну, жди. Потом не хватает каких-то креденшелов, токенов-шмокенов, их
нужно откуда-то догонять.</p>

<p>Короче, выясняется: разработчик настроил себе уютненькое окружение и ушел в
закат. Чтобы сделать то же самое мне, нужна неделя. А ведь мог же поднять Докер
и помочь всем. В конце концов, не знаешь Докер, попроси кого-нибудь помочь, а
пока что тестируй на локальной базе, локальном S3 – таких заглушек полно.</p>

<p>Кончается тем, что я пишу и Докер, и интеграционные тесты, которые ходят в
локальные сервисы, чтобы приблизить локальную разработку к облачной. Причем
зачастую в счет личного времени, потому что давай-давай.</p>

<p>Я уж не говорю о том, что Cloud-driven development страшно не эффективен. Каждый
деплой занимает в лучшем случае 10-15 минут, и за это время ты все равно не
возьмешься за другую задачу. Разработчик смотрит Ютуб или ходить курить. Вроде
работает, а на самом деле решето: сплошная пустота.</p>

<p>Я бы вообще не давал разработчикам окружений. Это дорого и вдобавок
развращает. Вот тебе Докер с базой, Редисом и Кафкой, пиши, тестируй. Пока
локально не заведется, ни о каких облаках не мечтай.</p>

<p>В качестве побочки всплывают проблемы конфигурации. Выясняется, что ни один
сервис нельзя направить на локалхост: везде захардкожено что-то вроде <code class="language-plaintext highlighter-rouge">"aws." +
region + ".amazon.com"</code>.  Лишний день уходит на то, чтобы сделать хосты
конфигурируемыми.</p>

<p>Читали же: “<del>квартирный</del> облачный вопрос только испортил их” (с)…</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/chess-heads/">Украшение шахматных фигур</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/chess/" rel="tag">chess</a>, <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/kids/" rel="tag">kids</a>, <a href="/tag/handmade/" rel="tag">handmade</a>

</div>


            <div class="entry">
                
                    <p>Давайте несколько постов не про айти? А то надоело. Вот хотя бы про шахматы,
только не про игру, а фигуры.</p>

<p>У шахматных наборов одна проблема: трудно найти такой, где король и ферзь
сделаны нормально. У этих фигур должны быть знаки отличия: у короля – шапка с
крестом, а у ферзя – корона. Но и то, и другое делают плохо, если вообще
делают. Если шахматы деревянные, то король и ферзь одинаковы, а на головах у них
пипки. Чтобы понимать, кто есть кто, у короля пипка длиннее.</p>

<p>Когда играешь такими фигурами, дети часто их путают. Иногда и сам замечаешь, что
в который раз двигаешь ферзя как короля и наоборот. Но не обязательно покупать
новый набор: легко наколхозить кресты и короны своими руками.</p>

<p>Идем в ближайший отдел рукоделия: это где всякие нитки, ленточки, ткани. Среди
этих штук есть мелкие побрякушки для нашивки и плетения: черепа, сердца и другие
предметы, в том числе шапка монарха и корона. Стоит буквально ничего: три или
пять рублей.</p>

<p>Берем напильник и подтачиваем пипки фигурам, капаем китайский суперклей и сажаем
головной убор. Эффект просто бомбический: теперь у главных фигур металлические
знаки отличия. Они выделяются, крест и корону никогда не перепутаешь. Цена
решения – двадцать рублей.</p>

<p>На фотографии видно, что дети уже покоцали фигуры: один король потерял крест, но
шапка осталась. Ферзю отбили зубцы на короне. Надо бы починить.</p>

<p>Удивляюсь, что никому из производителей шахмат не пришло это в голову. Казалось
бы, купи оптом эти железки по рублю штука и налепи королям и ферзям – всего-то
четыре железки на набор. Отдельно выделить эту фичу на маркетплейсе: смотрите, у
нас фигуры со знаками отличия, а не как обычно: у кого пипка длиннее, тот и
король.</p>

<p>Но нет, приходится пилить самому.</p>

<p>В шахматы, кстати, я играю очень слабо, полный нубас. Что не мешает судить о
красоте и удобстве фигур.</p>

<p><img src="/assets/static/aws/chess-heads/1.jpg" /></p>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/abstractions/">Про абстракции</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2025-04-19T00:00:00+00:00">
        Apr 19, 2025
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/bingo/" rel="tag">bingo</a>, <a href="/tag/abstractions/" rel="tag">abstractions</a>

</div>


            <div class="entry">
                
                    <p>Как только зашла речь об абстракциях, знайте: дело швах. Абстракции – это
булщит-бинго, в котором линейному разрабу никогда не выиграть. Это штучки для
менеджеров и архитекторов, то есть тех, кто парит над кодом, а не стоит в нем по
колено.</p>

<p>Бывает, разработчики увлекаются и играют в эти шашни: всерьез обсуждают
абстракции. Они забывают, что любая функция – это уже абстракция. Например,
функция поиска простого числа может перебирать числа линейно, с интервалом или
брать из таблицы. Может кешировать. Аналогично с факториалом или числом
Фиббоначи: потребитель не знает, что внутри, поэтому функция абстрактна. Сюда же
списки и хеш-таблицы.</p>

<p>В ООП языках абстракция вообще идет из коробки. Скажем, написал интерфейс
<code class="language-plaintext highlighter-rouge">UserRepo</code> с методом <code class="language-plaintext highlighter-rouge">User getUserById(Integer id)</code> и везде его передаешь. А
потом пишешь классы <code class="language-plaintext highlighter-rouge">JDBCUserRepo</code> и <code class="language-plaintext highlighter-rouge">MongoUserRepo</code>, каждый из которых ходит
куда нужно. Об этом пишут в каждом учебнике по Джаве. Что может быть проще?</p>

<p>Нормальный код в абстракции не нуждается – он и есть абстракция над байткодом
или машкодом. Вот и весь разговор.</p>

<p>Лучшее, что можно сделать в споре про абстракции – это промолчать. Скорее
всего, любителя абстракций отпустит, и он забудет о них так же быстро, как и
вспомнил. И вы спокойно сделаете все как надо. Спорить и лезть на рожон глупо,
потому что повторюсь: абстракции – это булщит-бинго, в котором разработчику
никогда не выиграть.</p>

                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page5" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 6 из 97</span>
        
        <a href="/page7" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="https://t.me/igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
