<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ivan Grishaev's blog</title>
    <description>Writing on programming, education, books and negotiations.
</description>
    <link>https://grishaev.me/</link>
    <atom:link href="https://grishaev.me/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Wed, 22 Jan 2025 08:04:03 +0000</pubDate>
    <lastBuildDate>Wed, 22 Jan 2025 08:04:03 +0000</lastBuildDate>
    <generator>Jekyll v4.2.0</generator>
    
      <item>
        <title>Разметка в Телеграме</title>
        <description>&lt;p&gt;Наверняка вы замечали баг в Телеграме. Написал сообщение, поправил разметку, а
она поехала (см. картинку). Выделил болдом одно, а оказалось помечено другое. То
же самое с моноширинным текстом. Ну а самая печаль — разметка кода. Иногда так
плывет, что проще удалить сообщение и разместить по-новой.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/static/aws/telegram-markup/1.jpeg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Дело в том, как передается разметка в Телеграме. Многие полагают, что в нем
маркдаун, но на самом деле это не так. Телеграм может принимать маркдаун от
ботов, но разметка приводится ко внутреннему виду, примерно такому:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;{:message &quot;Welcome back, Ivan Grishaev!&quot;,
 :entities
 [{:type :text_mention,
   :offset 14,
   :length 13,
   :user {:id 100500 :nickname &quot;igrishaev&quot;}}]}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Смысл в том, что есть сообщение и набор размеченных зон. Каждая зона знает
смещение в символах и длину (поля offset и length). У зоны есть тип и
дополнительные параметры, которые влияют на рендер. В примере выше слова “Ivan
Grishaev” будут выглядеть как ссылка на пользователя с нужными атрибутами.&lt;/p&gt;

&lt;p&gt;У этой системы следствие: если поправить текст, смещения зон должны быть
скорректированы. Например, я поменял Welcome back на просто Welcome. Пропали
пять символов, и смещения всех зон должны уменьшится на 5. На простых случаях
это работает, но когда зон много (болды, италики и прочее), что-то идет не
так. Возможно, виноват многострочный код: он как-то оптимизируется, а смещения
зон не принимают его во внимание.&lt;/p&gt;

&lt;p&gt;Если бы в Телеграме была система тегов вроде markdown или xml/html, такой
проблемы бы не было. Братьям Дуровым, конечно, виднее, но я тоже могу
высказаться.&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Jan 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/telegram-markup/</link>
        <guid isPermaLink="true">https://grishaev.me/telegram-markup/</guid>
        
        <category>telegram</category>
        
        <category>ui</category>
        
        
      </item>
    
      <item>
        <title>Еще о пропаганде</title>
        <description>&lt;p&gt;Я уже писал, как видит Россию западный человек. Для него Россия — это воплощение
повести 1984. На каждом углу висит телевизор, из каждого утюга призывают брать
Берлин.&lt;/p&gt;

&lt;p&gt;При этом условного американца не смущает, что владелец Твиттера — первой в мире
площадке обмена мнениями — открыто топит за своего кандидата и подкручивает
алгоритм ленты.&lt;/p&gt;

&lt;p&gt;Никого не смущают признания Цукерберга насчет ковидной истерии. Согласно им,
любой анти-ковидный контент опускался в выдаче настолько, что его нельзя было
найти.&lt;/p&gt;

&lt;p&gt;Фактически это значит следующее. Если у человека нет долгой истории предпочтений
(игры, котики, гаджеты, etc), то чтение ленты — это и есть потребление
пропаганды. Но для западного человека “это другое”.&lt;/p&gt;

&lt;p&gt;Попался текст, который процитирую частично:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Европейцы понятия не имеют о России. Российская пропаганда даже внутри страны
вызывает у значительной части населения буквально рвотные рефлексы, если не
брать во внимание психически нездоровую часть общества, крайне нуждающуюся в
ежедневной порции агрессии и ненависти. Но эта часть всегда невелика даже в
среде, которую искусственно разогревают самыми отвратительными
эмоциями. Психика - это такая штука, которая не способна постоянно находиться
в возбужденном состоянии, а пропаганда отрабатывает только один номер
последние пять лет, из которых последние три - на форсаже. Если вас каждый
день на протяжении долгого времени кормить даже самыми вкусными пельменями -
вы скоро их будете буквально ненавидеть. Что уж говорить про пельмени от
российской пропаганды…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;О чем я и говорил. Европеец считает, что россиянин после работы весь вечер
смотрит пропаганду. А на самом деле россиянин смотрит тупые шоу и сериалы. В
мессаджере у него не военкоры, а рекламное говно вроде “как унизить собеседника
одной фразой”, арбитраж крипты, микродозинг, сибирский кузнец, кующий настоящие
ножи.&lt;/p&gt;

&lt;p&gt;Кое-что из личных наблюдений. Я вожу дочь в музыкальную школу и порой жду ее в
фойе. Там стоит телевизор, и был упоротый охранник, который смотрел военные
передачи: на сколько километров продвинулись, сколько убили бандеровцев, как
будем делить Украину. К нему всегда подходили родители и просили
выключить. Когда охранника наконец заменили другим, телевизор больше не
включают. Стоит для мебели.&lt;/p&gt;

&lt;p&gt;Уже несколько лет хожу в тренажерный зал. Что обсуждают между подходами? Фильмы,
кроссовки, выступления знаменитых качков, телефоны, машины, бухло. Все то, что
интересует обычного мужчину (почему-то ни слова про секс и женщин). Политика
относится к той же области, что и религия: все понимают, что тема чувствительная
и стараются замять, если всплыло. Неадекватов просят помолчать.&lt;/p&gt;

&lt;p&gt;Поэтому повторю тезис: кто рассуждает об ужасах чужой пропаганды, пересказывают
свою.&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Jan 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/prop-more/</link>
        <guid isPermaLink="true">https://grishaev.me/prop-more/</guid>
        
        <category>life</category>
        
        <category>propaganda</category>
        
        
      </item>
    
      <item>
        <title>Объекты в Джаве</title>
        <description>&lt;p&gt;Когда-то давно я знал Джаву плохо, у меня была проблема. Я открывал Джавадок и
понимал в целом, как пользоваться объектом, но не понимал, как создать
его. Сегодня я знаю Джаву лучше, но проблема никуда не ушла.&lt;/p&gt;

&lt;p&gt;Дело вот в чем: в ранней Джаве любой класс создавался конструктором, например&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kokoko&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Ko&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Пришел Джошуа Блох и сказал, что это неправильно: конструктор должен быть скрыт
(или protected), а потребителям давать статичные методы, скажем &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.parse&lt;/code&gt;,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.fromString&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.of&lt;/code&gt; и так далее:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kokoko&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Kokoko&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kokoko&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Sounds&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;KOKOKO&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Беда в том, что в списке методов не видно, какой из них отвечает за создание
экземпляра. Он может быть первым в списке, двадцатым, сорок вторым. Ты должен
знать, что где-то на третьем экране есть метод &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.parse&lt;/code&gt;, который делает то, что
нужно.&lt;/p&gt;

&lt;p&gt;Более веселые вещи: иные экземпляры нельзя создать в принципе. При запуске JVM
порождается скрытый синглтон, и статический метод .getInstance возвращает ссылку
на его. Считается, что ты прочитал все методы и понял, что нужно так:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kokoko&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;kokoko&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;processKokoko&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Kwish&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Бывает, даже когда прочитал все методы, все равно неясно, как создать
объект. Оказывается, это такой дизайн: класс можно создать только из билдера —
другого класса:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;KokoBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KokoBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;with&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Kwhish&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kokoko&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Еще бывают фабрики, но по-моему, это то же самое, что и билдер, только менее
замшелое. Блох пишет про билдеры, а про фабрики — ничего.&lt;/p&gt;

&lt;p&gt;Бывают статичные классы—агрегаторы. На деле это пачка функций, которые строят
объекты других классов, например:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Kokoko&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kokoko&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;KokoManager&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;newSingleThreadKokoko&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Kwesh&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Обо всем этом нужно знать, брать во внимание.&lt;/p&gt;

&lt;p&gt;Нам рассказывали, что с ООП наступит пони и радуга. Будем строить программы из
одинаковых блоков, все системно и предсказуемо. На деле Джавные классы — это не
блоки, а паззлы. С виду одинаковые, но каждая дырка и пупырка своей формы и
длины, и отыскать совпадение — большая удача.&lt;/p&gt;

&lt;p&gt;Разнообразие в классах можно списать на долгую историю Джавы. Но сегодня нет ни
одной качественной переработки ООП, и происходит откат к привычным
“структура-функция”. Мне запомнился только Егор с его Элегантными
объектами. Книга интересная, но когда я увидел “элегантный” код, мне немножко
поплохело.&lt;/p&gt;

&lt;p&gt;Я считаю две вещи. Первая: к объектам нужно переходить, только когда процедурный
подход уже не справляется. Запас прочности у него огромный, хватит на
десятилетия (см. Postgres). Вторая: над концепцией классов нужно хорошенько
подумать. На мой взгляд, она не завершена.&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Jan 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/java-obj-create/</link>
        <guid isPermaLink="true">https://grishaev.me/java-obj-create/</guid>
        
        <category>programming</category>
        
        <category>java</category>
        
        <category>oop</category>
        
        
      </item>
    
      <item>
        <title>Гарри Поттер и деньги</title>
        <description>&lt;p&gt;Читаю дочке на ночь Гарри Поттера. Она уже читала, но со мной переспрашивает
многие моменты. Я в свое время пропустил Поттера, и теперь догоняю.&lt;/p&gt;

&lt;p&gt;Среди прочего заметил вот что: в волшебной стране интересная мера
денег. Процитирую Огрида:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;— Золотые — это галлеоны, — пояснил он. — Один галлеон — это семнадцать
серебряных сиклей, а один сикль — двадцать девять кнатов, это просто, да?&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;Интересно, что оба числа — 17 и 29 — простые. Это значит, ни сикль, ни кнат
нельзя разделить поровну между участниками. Скажем, если в группе три-четыре
человека, делить 5 сиклей 11 кнатов будет, мягко говоря, трудновато.&lt;/p&gt;

&lt;p&gt;У простых чисел следствие: их произведение делится только на исходные
множители. На этом основана вся криптография. Это хорошо понимали древние греки:
они выбрали число 60 в качестве меры, потому что у него много делителей. Позже
его заменило число 100, у которого делителей еще больше.&lt;/p&gt;

&lt;p&gt;Система денег с простыми числами максимально неудобна для расчетов. А потому
вопрос: Джоан Роулинг выбрала их с умыслом или случайно? Понимает ли она
особенность простых чисел? Выдумала сама или кто-то подсказал?&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Jan 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/harry-potter-money/</link>
        <guid isPermaLink="true">https://grishaev.me/harry-potter-money/</guid>
        
        <category>books</category>
        
        <category>harry-potter</category>
        
        <category>money</category>
        
        
      </item>
    
      <item>
        <title>Авито 2025</title>
        <description>&lt;p&gt;Заметка из серии “Иван зашел на Авито”. Приходится делать это раз в год, что
поделать.&lt;/p&gt;

&lt;p&gt;Ничего особо не изменилось: всюду спиннеры, спиннеры, спиннеры. По-прежнему
огромные баннеры, которые занимают до половины экрана на ноутбуке.&lt;/p&gt;

&lt;p&gt;Страница Messages заработала с третьего раза, до этого что-то шло не
так. Выделяю все сообщения, жму “отметить прочитанными” — они не отмечаются. В
заголовке по-прежнему мигает колокольчик.&lt;/p&gt;

&lt;p&gt;Публикую объявление, оплачиваю в Сбере. Авито не реагирует на платеж, страница
не обновляется. Перехожу в объявление, жму “Опубликовать”. Написано, что уже
опубликовано, но пока на модерации. Зачем тогда показывать кнопку
“Опубликовать”?&lt;/p&gt;

&lt;p&gt;Смотрю консоль — все залито кровью. Десятки обращений к Sentry и внутреннему
трекеру. Ставлю фильтр на JS, вижу запросы к файлам:&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;runtime.17ee57e8c945aab7.js
babel.56c763c5da678bfa.js
react.dfd1d111f8ede875.js
core-js.afc06ee845ff2534.js
sentry.92aa5077131b46e2.js
react-dom.b2b03dba79dd7e0e.js
react-router.70c77e8819d4a40e.js
react-router-dom.952fcbce71c8c0eb.js
main.085d7b253d7b4fc3.js
classnames.8bdb4ca7d18147c3.js
axios.531715197964b964.js
react-helmet-async.08c35d15407bd540.js
clickstream.9d25519cca31a2b9.js
desktop-header.08bc7205e5d97c1c.js
desktop-error-boundary.60b97a6749bfdf5d.js
bootstrap.a567aae79d5d83f3.js
popperjs.23534e9c89ee28ca.js
redux.812bd211f67f512a.js
desktop-navigation.e3664b256e3d71c5.js
navigation.054020057401a579.js
PhoneActualizationPopup.0710bcce593318a7.js
AuthProfileConfirmForm.61b7e0d361eaeba6.js
react-redux.8146e991e20c5797.js
profile-messenger.3520407fc648a850.js
fingerprint.ce96eef5e5724e1b.js
remoteEntry.faea46d9e2064abc.js
Auth.d430faf2d81cfc87.js
remoteEntry.6825f5efeccb47cc.js
WwwProfileMessenger.dda85a70f5fec4e4.js
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;…и другие.&lt;/p&gt;

&lt;p&gt;Так и хочется сказать: молодцы, собрали всю коллекцию. Реакт, редукс, бутстрап,
роутер и всякие плагины. Наконец-то можно показать пять сообщений.&lt;/p&gt;

&lt;p&gt;Повторюсь, современных фронтендеров нужно не учить, а лечить. Это какой-то
особый сорт нелюдей. Я искренне не понимаю, как можно выкладывать такое в
прод. Не понимаю, как людей не тошнит от настолько плохой работы и собственной
неэффективности. Но похоже, им это ок. Человек ко всему привыкает.&lt;/p&gt;

&lt;p&gt;Современный Авито напоминает творчество Лавкрафта: открыл на миг, ужаснулся и
скорей закрыл, чтобы не вспоминать. Но преследовать будет долго.&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Jan 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/avito-2025/</link>
        <guid isPermaLink="true">https://grishaev.me/avito-2025/</guid>
        
        <category>avito</category>
        
        <category>js</category>
        
        <category>ui</category>
        
        <category>idiots</category>
        
        
      </item>
    
      <item>
        <title>Часы</title>
        <description>&lt;p&gt;На новый год покупал в подарок Андроид. На этот раз не самый нищебродский, а
чуть урезанный флагман. Вместе с телефоном бесплатно дали наручные часы той же
фирмы. Я пытался подарить их другому человеку, но он не принял — не
нужны. Поигрался с ними сам — тоже не понимаю, чем они могут быть
полезны. Выставил на Авито — ноль отзывов.&lt;/p&gt;

&lt;p&gt;В целом, после того как я понял современный Андроид, все стало ясно. Часы дают в
подарок потому, что это еще один источник данных о человеке. Телефон уже давно
сливает сведения о владельце Гуглу, Самсунгу и другим производителям. Но есть
нюанс: иногда человек все-таки выпускает телефон из рук, и образуется яма: что
он делает, что потребляет? Часы закрывают эту проблему: они всегда на руке, и по
анализу пульса и движения можно понять: спит он, занимается спортом,
отдыхает. Эти данные дороже стоимости часов, поэтому с точки зрения бизнеса их
выгоднее распространять как подарок к телефону.&lt;/p&gt;

&lt;p&gt;Удивляет, что находятся те, кто берут эти часы за живые деньги. Зачем? Телефон и
так заполонил все пространство. Только выдалась минутка, как уже рука тянется к
телефону, и едва находишь сил шлепнуть себя по рукам. Так еще предлагаете
добровольно надеть эти часы?&lt;/p&gt;

&lt;p&gt;Хожу как дурак с часами в рюкзаке, ищу кому подарить. Пока безуспешно.&lt;/p&gt;
</description>
        <pubDate>Mon, 20 Jan 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/android-watches/</link>
        <guid isPermaLink="true">https://grishaev.me/android-watches/</guid>
        
        <category>android</category>
        
        <category>watches</category>
        
        <category>gadgets</category>
        
        
      </item>
    
      <item>
        <title>Файл с процентом</title>
        <description>&lt;p&gt;&lt;img src=&quot;/assets/static/aws/teams-files/1.jpeg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Узнал, что в Teams нельзя прикрепить файл со знаком процента. Также запрещены
решетка, двоеточие и другие спецсимволы (см. картинку). Испытал смешанные
чувства.&lt;/p&gt;

&lt;p&gt;С одной стороны, это бред. Когда файлы хранят в облаке, никто в здравом уме не
назначает им исходное имя. Файлы лежат как бинарные блобы с машинными уидами, а
имя хранится в базе в текстовой колонке. Будь там процент, решетка, эмодзи или
DROP TABLE STUDENTS — нормальной системе это без разницы.&lt;/p&gt;

&lt;p&gt;С другой стороны, “не все так однозначно” (с). &lt;a href=&quot;/url-space/&quot;&gt;Я уже рассказывал&lt;/a&gt;, как
потерпел неудачу из-за пробела в папке S3. Половина клиентов ищут папку Daily
Reports, другая половина — Daily%20Reports. Класс java.util.URI просто валится,
если дать ему адрес с пробелом.&lt;/p&gt;

&lt;p&gt;Отсюда ясно, почему запрещены спецсимволы: с ними возрастает вероятность
факапа. Не в этом сервисе, так в другом. Проще запретить, чем разгребать
последствия: удаленные по ошибке данные, инъекции в путях и прочие штучки.&lt;/p&gt;

&lt;p&gt;Так что хотел подтрунить над идиотской ситуацией, а потом раз — и как тот
парень, который в цирке не смеется.&lt;/p&gt;
</description>
        <pubDate>Wed, 25 Dec 2024 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/teams-files/</link>
        <guid isPermaLink="true">https://grishaev.me/teams-files/</guid>
        
        <category>programming</category>
        
        
      </item>
    
      <item>
        <title>Кложурная Слака</title>
        <description>&lt;p&gt;В кложурной Слаке новости. Если коротко, заканчивается бесплатный период, и
сообщество решает, куда переезжать. Я там набросил на вентилятор, и делюсь с
вами мыслями. Это было коротко, а теперь долго.&lt;/p&gt;

&lt;p&gt;Все вы знаете про Слак — бизнес-мессаджер, платформу команд. Слака очень
популярна в Америке, люди залипают в ней как мы в Телеграме. Там и работа, и
разные сообщества. Но есть нюанс: в бесплатной версии очень короткая история
поиска, буквально неделю или около того. В результате то, что обсуждали месяц
назад, уже не находится. Народ пишет ботов, которые архивируют каналы в
статичный веб, но это так себе.&lt;/p&gt;

&lt;p&gt;В кложурной слаке зарегана 21 тысяча человек, из них 2.600 активны. За каждого
активного пользователя Слак просит почти пять долларов в месяц, в результате
месячная плата составляет 19 косарей. До того, как узнать эту сумму, я думал
выступить спонсором: перечислять долларов 500 в месяц в общий фонд. Но собрать
19 тысяч будет тяжеловато, да и не ясно, за что столько платить.&lt;/p&gt;

&lt;p&gt;Пару лет назад Шон Корфилд, один из топовых разрабов, выбил из Слаки годовой
грант: мы некоммерческое комьюнити и все такое. Потом в Слаке сменилось
руководство, но Шон снова получил грант. И вот опять в Слаке перестановки, и на
этот раз на запросы никто не отвечает. Платный тариф истекает в конце декабря, и
идет обсуждение, куда переезжать.&lt;/p&gt;

&lt;p&gt;Независимо от того, что решат, важно подумать вот о чем. Слака — это
классическая бесплатная доза. Ладно один год платного тарифа, ладно второй — но
так не может продолжаться вечно. Менеджмент без конца меняется, и каждый новый
обнуляет договоренности. Поддержка некоммерческих групп не оговорена на сайте, и
надеяться на вечное продление глупо. Все частные договоры ситуативны и
справедливы лишь в моменте.&lt;/p&gt;

&lt;p&gt;Просто чтобы посмотреть на реакцию, я предложил Телеграм. А что такого? Есть же
русское сообщество в Телеге, и хорошо себе живет. Есть и англоговорящая группа
человек на 250.&lt;/p&gt;

&lt;p&gt;Как и ожидалось, нашлись те, кого беспокоит, что Телеграм — это Russian
thing. Ничего, что основатель уехал в Дубай двенадцать лет назад? Кроме того, я
могу понять, когда россиянин не ставит американский софт, опасаясь санкций. Но
почему американец опасается софта, который написан русскими? Уверен, что все
сливается в КГБ? Кто-то много смотрел телевизор.&lt;/p&gt;

&lt;p&gt;Другая вещь, которая бросилась в глаза — в этом вашем Телеграме нет
модерации. Западный человек настолько привык, что каждая платформа модерируется,
что без нее чувствует себя голым. Это что, каждый может написать то, что думает?
Людям даже не приходит в голову, что модерацией должно заниматься сообщество:
ставить своих анти-спам ботов, дать админские права людям в разных часовых
поясах. Модерировать должны вы, а не индусы на аутсорсе, которые грепают текст
по ключевым словам, и которым завернуть контент проще, чем оставить.&lt;/p&gt;

&lt;p&gt;Ясно дело, ни на какой Телеграм я не надеюсь. В Слаке обсуждают Зулибы и прочую
дрянь с клиентами на Электроне. Всерьез предлагают Дискорд. На этом фоне мое
предложение смотрится неудачной шуткой. Я не возражаю. Мне было интересно
вбросить тему, на которую у людей вагон предрассудков и посмотреть со стороны.&lt;/p&gt;
</description>
        <pubDate>Wed, 25 Dec 2024 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/slack-trial/</link>
        <guid isPermaLink="true">https://grishaev.me/slack-trial/</guid>
        
        <category>slack</category>
        
        <category>telegram</category>
        
        
      </item>
    
      <item>
        <title>Боязнь исключений</title>
        <description>&lt;p&gt;Многие программисты боятся исключений. Как я об этом узнал? Примерно раз в месяц
в кложурной Слаке и Телеграме задают вопрос: что мне использовать вместо
исключений? Им советуют возвращать мапы с полем error, разные типы-обертки,
макросы. Есть несколько библиотек, имитирующих монады. Это когда поделил на
ноль, и вместо исключения приходит объект Failure.&lt;/p&gt;

&lt;p&gt;Что тут сказать… можно прятаться от проблемы разными способами. Не смотреть на
нее, не называть вслух или креститься. Можно писать программу так, что даже в
худшем случае она не упадет. Только вопрос — зачем?&lt;/p&gt;

&lt;p&gt;Везде, где пытаются избежать исключений, я вижу обратное. Проблему зарывают в
песок, и об ошибке никто не знает. Если не пожалуется пользователь или не придет
менеджер, о проблеме не узнают. Или узнают в пятницу вечером. Я таких осиных
гнезд вскрывал ого-го сколько.&lt;/p&gt;

&lt;p&gt;Когда используют разные обертки вместо исключений, для меня это признак низкого
уровня команды. В коллективе не понимают, как поступать с исключениями, как их
собирать и расследовать. В такой команде пишут плохой код, вот и все.&lt;/p&gt;

&lt;p&gt;Исключения не нужно прятать. Наоборот, как только что-то идет не так, нужно
кидать их с как можно более понятным сообщением и данными для отладки. Для этого
нужно победить свои страхи: признать, что код не идеален, в нем баги, и
экстренно на них реагировать.&lt;/p&gt;

&lt;p&gt;Терпимость к отклонениям должна быть нулевая. Зарывание ошибок в мапу — путь в
никуда.&lt;/p&gt;
</description>
        <pubDate>Wed, 25 Dec 2024 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/fear-of-exceptions/</link>
        <guid isPermaLink="true">https://grishaev.me/fear-of-exceptions/</guid>
        
        <category>programming</category>
        
        <category>exceptions</category>
        
        <category>monads</category>
        
        
      </item>
    
      <item>
        <title>Уведомления о куках</title>
        <description>&lt;p&gt;В позднем СССР сложилась интересная ситуация. Воевать в Афганистане можно было с
18 лет, а пить спиртное — только с 21. Другими словами, не возбранялось легально
убивать людей, а вот пить водку — подожди еще три года.&lt;/p&gt;

&lt;p&gt;Мне это напоминает современный веб. Сегодня каждый второй сайт кричит, что он
использует куки: всплывашки и выпадашки всех мастей. По требованию
еврочиновников меня предупреждают, что сайт гоняет куки — мелкие статичные
строки. Это при том, что браузеры существуют не первый год, и проблемы кук уже
решены. Можно легко посмотреть, что передается в куках, удалить их, выставить
запрет не передачу и так далее.&lt;/p&gt;

&lt;p&gt;При этом еврочиновники не считают нужным уведомить пользователя, что любой
современный сайт — это рантайм Джаваскрипта с почти неограниченными
возможностями. В частности, меня не уведомляют о том, что:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;сайт может вывалить 50 мегабайтов скриптов, сделать 250 запросов;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;сайт может ходить на другие сайты, подтягивать виджеты, которые тянут другие скрипты, и так рекурсивно;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;на сайте может быть пять трекеров, которые сливают всю подноготную о системе:
юзер-агент, разрешение экрана, айпишник, локаль и прочее. Из них формируется
устойчивый отпечаток, по которому за клиентом следят в других системах. Эти
данные продаются третьим фирмам.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;на сайте контекстная реклама;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;сайт трекает движение мыши, шлет события на каждый клик&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;в сайт встроены анти-блокировщики, которые замедляют загрузку;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;сайт может быть частью ботнета (координатором или жертвой);&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;сайт может трекать пользователя через данные в LocalStore и кастомные
заголовки. Кук нет, отслеживание есть;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;функции трекинга уже зашиты в апишку браузера и Джаваскрипта (Beacon API,
Geolocation API, etc)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;и еще штук двадцать пунктов.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Повторюсь, со всем этим у еврочиновников проблем нет, предупреждать не нужно. А
вот куки им не понравились.&lt;/p&gt;

&lt;p&gt;На этот счет у меня есть еще одна мысль, но о ней — в следующий раз.&lt;/p&gt;
</description>
        <pubDate>Wed, 25 Dec 2024 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/cookie-notify/</link>
        <guid isPermaLink="true">https://grishaev.me/cookie-notify/</guid>
        
        <category>web</category>
        
        <category>cookie</category>
        
        <category>idiots</category>
        
        
      </item>
    
  </channel>
</rss>
