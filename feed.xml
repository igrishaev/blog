<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ivan Grishaev's blog</title>
    <description>Writing on programming, education, books and negotiations.
</description>
    <link>https://grishaev.me/</link>
    <atom:link href="https://grishaev.me/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Sat, 13 Sep 2025 15:09:48 +0000</pubDate>
    <lastBuildDate>Sat, 13 Sep 2025 15:09:48 +0000</lastBuildDate>
    <generator>Jekyll v4.2.0</generator>
    
      <item>
        <title>Место работы</title>
        <description>&lt;p&gt;Я, кстати, придумал вот что: прошелся по всем профилям и убрал текущее место
работы. Оставил только vast fintech с описанием технологий — и довольно.&lt;/p&gt;

&lt;p&gt;Почему? Считаю, рекрутерам не нужно знать, где я работаю. Прошлые места смотрите
ради бога, а текущее вас не касается. Буду искать работу — созвонимся, и я все
расскажу. А пока держите от меня фигу с маслом.&lt;/p&gt;

&lt;p&gt;Есть и моральный аспект. Когда ведешь бложик, работа часто подкидывает темы — в
том числе основанные на противоречии, когда не согласен и хочешь
выговориться. Чтобы не бросать на кого-то тень, считаю правильным не раскрывать,
где работаешь.&lt;/p&gt;

&lt;p&gt;Когда-то я волновался о том, как выгляжу на Линкед-ине. Но когда в пятый раз
находишь работу по знакомству, это становится неважно.&lt;/p&gt;

&lt;p&gt;В целом я считаю излишним, когда о тебе знает каждый угол интернета. Еще давно я
удалился из всех соцсетей и ни разу не пожалел. Оставил только Гитхаб и
Линкед-ин: этих двух хватает, чтобы найти работу где угодно — однако им
необязательно знать все.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/workplace/</link>
        <guid isPermaLink="true">https://grishaev.me/workplace/</guid>
        
        <category>life</category>
        
        <category>work</category>
        
        
      </item>
    
      <item>
        <title>Евреи в СССР</title>
        <description>&lt;p&gt;Я не застал толком советский союз, но запомнил некоторые его рудименты. Один из
них заключался в том, чтобы, увидев еврейскую фамилию, обязательно это
подчеркнуть.&lt;/p&gt;

&lt;p&gt;Например, идут титры, и написано: композитор А. Шпильман. Взрослые такие с
легкой улыбкой – еврей! Как будто раскрыли агента, который тщательно скрывался.&lt;/p&gt;

&lt;p&gt;Я, маленький, долго не понимал, что это за еврей такой и почему он появляется во
всех титрах. Я думал, это конкретный человек и удивлялся его продуктивности.&lt;/p&gt;

&lt;p&gt;Помню как прочел фантастический рассказ “Песок” о космонавтах, которые потерпели
бедствие на планете-пустыне. Одного из них звали Шапиро. Когда я пересказывал
рассказ пожилому родственнику, это звучало так: Шапиро сказал своему другу
(“Шапиро? Это еврейская фамилия!”), что они падают, потом Шапиро вышел из
корабля (“Шапиро – это еврей!”) и увидел пустыню, затем Шапиро пошел (“Тот самый
еврей?”)…&lt;/p&gt;

&lt;p&gt;Короче, то, что Шапиро – еврей, я услышал раз десять, но так и не понял, что это
значит. По сюжету он был нормальным чуваком, так что я не нашел связи между
тегом и поведением. И вообще, в эпоху межпланетных путешествий мало кого
волновало, кем он был: русским, мексиканцем, французом.&lt;/p&gt;

&lt;p&gt;Еще одна кулстори на тему евреев случилась в школе. Урок истории, тема – приход
к власти фашистов и преследование евреев. Историк – маленький неженатый мужчина,
который делал сомнительные комплименты девочкам и просил их фотографии. И вот он
объясняет, за что преследовали евреев: вы понимаете, у них нет своей страны, они
везде образуют диаспоры, строят заговоры И ВООБЩЕ — они же Иисуса распяли!&lt;/p&gt;

&lt;p&gt;Как вы думаете, что́ мы, дети, запомнили из этой тирады?&lt;/p&gt;

&lt;p&gt;Следующий урок замещает другая учительница, спрашивает – за что преследовали
евреев? Весь класс хором – потому что они Иисуса распяли! У учительницы глаза из
орбит, она тихим голосом спрашивает: кто вам это сказал? Отвечаем — Константин
Батькович. Она: понятно, я с ним поговорю.&lt;/p&gt;

&lt;p&gt;А потом прошли годы, и гнилая привычка выявлять евреев как-то
выветрилась. Сегодня это считается моветоном, и очень хорошо. На этом примере мы
видим, что еще 30 лет назад люди не знали кое-что из элементарной этики. Поэтому
брать пример с прошлого поколения нужно очень осмотрительно.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/ussr-jews/</link>
        <guid isPermaLink="true">https://grishaev.me/ussr-jews/</guid>
        
        <category>life</category>
        
        <category>ussr</category>
        
        <category>jews</category>
        
        
      </item>
    
      <item>
        <title>Настройка uBlock Origin</title>
        <description>&lt;p&gt;Заметка самому себе как настроить uBlock Origin.&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;На закладке Filters отметить все галочки кроме “Block Outsider Intrusion into
LAN”. С ней отваливаются картинки на Ютубе и в других музыкальных
сервисах. Почему – пока не разобрался.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Во вкладке My filters добавить такую строку:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;||accounts.google.com/gsi/*$xhr,script,3p
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Она отключает выпадашку с авторизацией Гугла. Эта выпадашка – вселенское зло:
закрывается буквально на день и завтра вылезает снова. Ее добавили на все сайты
семейства StackExchange. Неважно чем ты интересуешься – базой данных,
редактором, версткой – она липнет как навязчивая муха.&lt;/p&gt;

&lt;p&gt;Поражает, сколько фильтров нужно ставить, чтобы просто смотреть
интернет. Пользуясь случаем, шлю Гуглу лучи добра за то, что запретили uBlock в
последнем Хроме. Я так понимаю, кроме форков Файерфокса вариантов нет?&lt;/p&gt;

&lt;p&gt;Еще одна мысль: обидно, когда в консоли написано “Blocked by uBlock”, но нет
информации о том, какой фильтр сработал. Имя фильтра и номер строки были бы
спасением. Эти данные по-любому есть в контексте и нужно только добавить их в
сообщение. Или я плохо смотрел?&lt;/p&gt;

&lt;p&gt;На закладке Settings включить “Block media elements larger than” и задать свой
размер. Полезно, чтобы отключать большие обложки к статьям. Все равно они
сгенерены нейронкой.&lt;/p&gt;

&lt;p&gt;Там же: опция “Block remote fonts”. Полезно для сайтов, чьи дизайнеры любят
поиграть со шрифтами.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/ublock/</link>
        <guid isPermaLink="true">https://grishaev.me/ublock/</guid>
        
        <category>ublock</category>
        
        <category>ad</category>
        
        
      </item>
    
      <item>
        <title>Метод Сократа</title>
        <description>&lt;p&gt;В комментариях упомянули диалог методом Сократа. Вспомнил, что хотел написать на
эту тему.&lt;/p&gt;

&lt;p&gt;Что такое метод Сократа? Это когда собеседник не возражает напрямую, а задает
серию вопросов, чтобы направить другого к истине. “Истина”, “направить” – как
благородно звучит!&lt;/p&gt;

&lt;p&gt;К счастью, сегодня есть точное и емкое слово, чтобы описать метод Сократа — это
троллинг. В античные времена такого слова не было — как, к примеру, не было
термина “пассивная агрессия”. Но явление было, а Сократ стал его мастером.&lt;/p&gt;

&lt;p&gt;Тролль — это человек, который не вступает в конфликт прямо, а старается
поссорить других. Либо, если собеседник один, строит разговор так, чтобы
собеседник противоречил сам себе. В результате тролль разводит руками: дружище,
ты противоречишь, сначала разберись, потом поговорим. И с видом победителя
уходит в закат.&lt;/p&gt;

&lt;p&gt;Схема работает по простой причине. На вопросы можно ответить без ошибок только
если готовился к ним. Когда отвечаешь вживую, так или иначе будет нескладно. Не
на пятой, так на десятой итерации ты скажешь то, что противоречит чему-то
сказанному ранее. Это абсолютно точно и неоспоримо, буквально аксиома: чем больше
говоришь, тем больше нестыковок можно найти.&lt;/p&gt;

&lt;p&gt;Примерно как в любом фильме можно найти ляпы, когда кружка стоит слева, а в
следующем кадре — справа. Или детектив только что прикурил, а через пять секунд
тушит окурок. И находятся же говноеды, которые разбирают фильм на кадры и
смотрят, что где стояло и на сколько сантиметров сдвинулось! Однако на успех
фильма это никак не влияет.&lt;/p&gt;

&lt;p&gt;Я давно научился узнавать троллей, косящих под Сократа. Высказал какую-то мысль,
и подобно мухе к тебе пристал человек. Задает наводящие вопросы: что ты имел в
виду, а что ты скажешь на то, на се… Как будто не очевидно: тролль собирает
базу высказываний, чтобы сказать: ага, сначала ты заявил X, а потом Y! Ты
противоречишь, иди разберись.&lt;/p&gt;

&lt;p&gt;Поэтому если от человека следует поток вопросов, я быстро его прерываю. Либо
проходи мимо, либо пиши у себя опровержение. Я даже дам ссылку, мне не жалко.&lt;/p&gt;

&lt;p&gt;Про Стива Джобса была замечательная цитата. В Стиве было две половины: засранца
и гения. Из-за гения ему прощали засранца. Сегодня многие подражают Джобсу, но
пока что у них выходит засранец, а не гений.&lt;/p&gt;

&lt;p&gt;То же самое применимо к Сократу. Он был гением и абсолютным троллем. Но подражая
Сократу, пожалуйста, держите курс на гения. Троллей и без вас хватает.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/socrates/</link>
        <guid isPermaLink="true">https://grishaev.me/socrates/</guid>
        
        <category>life</category>
        
        <category>socrates</category>
        
        
      </item>
    
      <item>
        <title>Оригинальная озвучка (2)</title>
        <description>&lt;p&gt;Как и обещал, пример русской озвучки и оригинала. Предлагаю сцену из первого
Гарри Поттера, где он узнает о том, что родственники все от него скрывали. В
очередной момент подключается тетя Петуния и дает небольшой монолог. Прослушайте
его (ссылки с таймкодами):&lt;/p&gt;

&lt;p&gt;Оригинал:&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;500&quot; src=&quot;https://www.youtube.com/embed/nnD8FKXzIGs?start=82&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen=&quot;&quot;&gt;
&lt;/iframe&gt;

&lt;p&gt;Переозвучка:&lt;/p&gt;

&lt;iframe width=&quot;100%&quot; height=&quot;500&quot; src=&quot;https://www.youtube.com/embed/X9vxIXBgUCs?start=176&quot; frameborder=&quot;0&quot; allow=&quot;accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share&quot; referrerpolicy=&quot;strict-origin-when-cross-origin&quot; allowfullscreen=&quot;&quot;&gt;
&lt;/iframe&gt;

&lt;p&gt;Обратите внимание, что в оригинале тетя говорит негромко. Она начинает чуть ли
не шепотом от негодования и плавно повышает голос. При этом она не кричит, а
больше играет интонацией. И конечно, за счет того, что обе актрисы (на съемках и
в озвучке) говорят на одном языке, попадание в губы идеальное. В русской озвучке
она говорит громче и с каким-то придыханием.&lt;/p&gt;

&lt;p&gt;Ну и сравните голоса Гарри. В оригинале говорит ребенок ровно того возраста, что
и актер в фильме. Это голос мальчика 8-10 лет до пубертата. В русской версии это
голос студента театрального училища.&lt;/p&gt;

&lt;p&gt;Когда годами смотришь фильмы в переозвучке, это не парит. Но потом раз — нет-нет
да услышишь оригинал, и возникает диссонанс. Почему в оригинале не то что другие
голоса, а вообще иные громкость и манера речи?&lt;/p&gt;

&lt;p&gt;Короче, просто посмотрите эти два куска.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/native-content-02/</link>
        <guid isPermaLink="true">https://grishaev.me/native-content-02/</guid>
        
        <category>life</category>
        
        <category>english</category>
        
        
      </item>
    
      <item>
        <title>Оригинальная озвучка (1)</title>
        <description>&lt;p&gt;Чтобы насладиться продуктом в полной мере (игрой, фильмом, книгой), потребляйте
его на языке оригинала. Особенно это касается английского контента, и вот
почему.&lt;/p&gt;

&lt;p&gt;Я не знаю, как устроена русская озвучка в целом – я имею в виду общие принципы,
– но она довольно странная. Там, где в оригинале персонаж шепчет, перводчик
орет, словно над ухом. Русская озвучка до неприличия громкая как в маршрутке:
громко, четко и заранее.&lt;/p&gt;

&lt;p&gt;Перевод начисто срезает акценты персонажей. Скажем, англоязычный китаец говорит
с характерным акцентом, которого банально нет в переводе. В лучшем случае
китайца озвучивают тоном выше, мол, азиат же. Но это не то. Аналогично с
мексиканским рокочущим произношением – его просто нет.&lt;/p&gt;

&lt;p&gt;Послушайте персонажей из “Омерзительной восьмерки” Тарантино. Там каждый голос –
праздник. Южный выговор, северный, мексиканский акцент, оттяжки, проглатывание
слогов и целых слов. Красота!&lt;/p&gt;

&lt;p&gt;То, что пропадают игра слов и различные отсылки, нет смысла писать. Видимо, на
их адаптацию не остается времени.&lt;/p&gt;

&lt;p&gt;Теряются акценты речи. Например, босс называет чернокожего подчиненного “black
cunt” – в переводе мы получаем “урод”. Конечно, я бы не хотел слышать дословный
перевод, но вместе с тем и не должно быть беззубого сглаживания. Это же бандиты!
Персонаж высказался грубо и уничижительно, и нужно как-то это передать.&lt;/p&gt;

&lt;p&gt;Приведу пример, который особенно меня расстроил. В игре Resident Evil 4 Remake
есть дополнение за второстепенного персонажа. Это полноценная кампания, которая
называется Separate ways – раздельные пути. В русской версии она называется “Два
пути”. Казалось бы, довольно близко. Не все ли равно?&lt;/p&gt;

&lt;p&gt;А вот и нет, у названия – два смысла. Первый – оба персонажа идут к цели разными
дорогами, временами сталкиваясь и расходясь, поэтому их пути – раздельные. А
второй – в финале происходит предательство, и главный герой на прощание
произносит:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;I think we both know this is where we go our separate ways.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;blockquote&gt;
  &lt;p&gt;Полагаю, мы оба знаем, что теперь наши пути – врозь.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;То есть речь идет о разобщении, о том, что альянсу конец.&lt;/p&gt;

&lt;p&gt;Вот в чем дело! Последняя фраза обыгрывает название кампании. В нем два смысла:
прямой (разные дороги) и переносный (конец дружбы). Название подобрано так, что
истинный смысл игрок поймет в финале. Покачает головой и скажет: да, теперь наши
пути действительно separated.&lt;/p&gt;

&lt;p&gt;Скажите на милость, как русский перевод “Два пути” все это передаст? Ответ –
никак, игрок просто проезжает мимо.&lt;/p&gt;

&lt;p&gt;Ясно, что не всегда уровень английского позволяет все понять без пауз и
перемоток. Но результат того стоит. То же самое касается книг: в свободное время
почитываю Остров сокровищ и Гарри Поттера на английском. Попадаются отличия, но
об этом – в другой раз.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/native-content-01/</link>
        <guid isPermaLink="true">https://grishaev.me/native-content-01/</guid>
        
        <category>life</category>
        
        <category>english</category>
        
        
      </item>
    
      <item>
        <title>Гугл и Эпл</title>
        <description>&lt;p&gt;Пишут, что Гугл закручивает гайки: запрещает ставить приложения из
.apk-файлов. Основание – борьба с вирусами и обманом пользователей, когда под
видом официального приложения им впаривают невесть что.&lt;/p&gt;

&lt;p&gt;Насколько я понял из комментариев, на самом деле будет так: приложения из .apk
все-таки можно поставить, но только если они подписаны ключом
разработчика. Чтобы получить этот ключ, нужно пройти верификацию Гугла, и,
возможно, заплатить (последнее – неточно). Разумеется, если разработчик
проштрафится, Гугл отзовет его ключ и все .apk, им подписанные, превратятся в
тыкву.&lt;/p&gt;

&lt;p&gt;В этом плане установка из .apk не отличается от установки из магазина, потому
что ограничения остаются в силе. Подойдет разве что приложениям, которые по
требованию властей убрали из Play Store: фирма может выложить подписанный apk на
сайте.&lt;/p&gt;

&lt;p&gt;Особым приложениям новое правило навредит. Это некая серая зона: софт, который
полезен людям, но не пройдет модерацию Гугла. Например, приложение для
диабетиков, которое дает указания по приему инсулина и других
лекарств. Рекомендация лекарств запрещена в Гугле, поэтому люди выкладывают
самосборный .apk. Что им теперь делать – не знаю.&lt;/p&gt;

&lt;p&gt;Я тоже получил письмо от Гугла с предложением пройти верификацию. Все потому,
что лет пятнадцать(!) назад выкладывал в стор приложение – личный кабинет
Читинского Энергосбыта. Им даже пользовались, а однажды какая-то УК хотела его
купить.&lt;/p&gt;

&lt;p&gt;Вторая новость – Эпл создаст внутренний магазин приложений для России. Там
смогут публиковаться те, кто под санкциями: всякие сберы-тиньковы и так
далее. Пока что магазина нет, но Эпл сам идет навстречу.&lt;/p&gt;

&lt;p&gt;Я пишу это не для того, чтобы сказать: Гугл плохой, а Эпл – хороший. Дело в
другом: принципы айти-гигантов всегда оказываются соглашением в моменте. Многие
выбирали Андроид только затем, чтобы ставить ломанные приложухи с
4pda. Яблочников стыдили: у вас рабство. А теперь ситуация если не переменилась,
то близка к этому: один гигант закручивает гайки, другой – ослабляет, хотя оба
били себя пяткой в грудь и заявляли, что никогда такого не будет.&lt;/p&gt;

&lt;p&gt;Открытый код, бесплатность, убеждения руководителя – все это условно и
справедливо только в моменте. Проходят годы и то, что было свободным, открытым
или без рекламы, становится закрытым и собирает данные. Руководитель взрослеет и
предпочитает не бороться, а договариваться.&lt;/p&gt;

&lt;p&gt;Словом, уверенность в положительных сторонах софта или сервиса сегодня не может
быть долгой. Все течет, все меняется.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/google-and-apple/</link>
        <guid isPermaLink="true">https://grishaev.me/google-and-apple/</guid>
        
        <category>life</category>
        
        <category>google</category>
        
        <category>apple</category>
        
        
      </item>
    
      <item>
        <title>ИИ-выжимка</title>
        <description>&lt;p&gt;Я часто гуглю и привык, что на первом месте – уже не ссылка или реклама, а блок
с выжимкой ИИ (Gemini или как там ее). Должен признать, выжимка довольно точно
пересказывает оригинал, и порой ее достаточно. Фактически, гуглить сегодня – все
равно что пользоваться GPT: в обоих случаях вам покажут чей-то текст или их
комбинацию.&lt;/p&gt;

&lt;p&gt;Разумеется, объединять тексты по смыслу и делать краткий пересказ – непростая
задача. Но даже она — это всего лишь алгоритм на матрицах и весах, и при чем тут
интеллект – я не понимаю.&lt;/p&gt;

&lt;p&gt;Полезным упражнением может быть вот что. Загуглите что-нибудь, над чем работали
только вы. Например, библиотеку на Гитхабе с осмысленным readme. У меня есть
такие, где в readme написано много. Скажем, “clоjure github deed” или “clоjure
github pg2”. В результате Gemini покажет пересказ твоего же текста.&lt;/p&gt;

&lt;p&gt;Может быть, не совсем ясен смысл моего сообщения, но постараюсь
объяснить. Большинство пользователей интернета – потребители. Они смотрят
обучающие видео, статьи, подключают чужой код. Алгоритм, который собрал сотню
источников и выдал их сжатую версию, кажется чудом. Но чудо пропадает, когда у
какого-то кусочка знания один источник и работал над ним один человек – особенно
если это вы.&lt;/p&gt;

&lt;p&gt;Когда понимаешь, что источник выжимки — ты сам, возникает интересное
сопоставление. Своего рода маппинг между тем, что было в твоей голове и тем, что
выдал Гугл. Примерно как смутно догадываешься, что будет по нажатию кнопки до
того, как это сделаешь. Становится видна машинная природа алгоритма. Месяц
тренировки – и научишься думать как он, чтобы выжимка была точнее и охватывала
то, что нужно. По аналогии с сео-оптимизаторами, которые по множеству действий
угадывали алгоритм ранжирования и пусть худо-бедно, но проталкивали одни сайты
выше других.&lt;/p&gt;

&lt;p&gt;Сегодня многие люди считают ИИ-модели богом из машины. Они доверяют им важные
решения: на кого учиться, куда переехать, как строить отношения. Проблема в том,
что им нельзя показать, из чего складывается ответ модели. В интернете нет
кусочка знаний, который произвели только они. Поэтому не на чем
продемонстрировать случай, о котором я писал: чтобы человек сопоставил свое
мышление и алгоритм.&lt;/p&gt;

&lt;p&gt;Если бы такой кусочек был, они бы увидели, как сильно заблуждаются.&lt;/p&gt;
</description>
        <pubDate>Sat, 13 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/ai-summary/</link>
        <guid isPermaLink="true">https://grishaev.me/ai-summary/</guid>
        
        <category>life</category>
        
        <category>ai</category>
        
        
      </item>
    
      <item>
        <title>A fake Clojure Object equals to what you want</title>
        <description>&lt;p&gt;Imagine you write a unit test where you compare two maps:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:some&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:nested&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;...&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Turns out, this map has a random UUID deep inside so you cannot blindly compare
them with the “equals” function:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;defn&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get-result&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:some&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:nested&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;random-uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)}}})&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:some&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:nested&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;???&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;This won’t work because the nested &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:id&lt;/code&gt; field will is random every time.&lt;/p&gt;

&lt;p&gt;What to do? Most often, people use libraries for fuzzy matching, DSLs,
etc. Well, a single case still doesn’t mean you should drag in another
library. Apparently, it could be solved with a dummy object that equals to any
UUID:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;any-uuid&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reify&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;uuid?&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;any-uuid&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;random-uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;any-uuid&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Now replace the value in your map, and the test will pass:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;is&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:some&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:nested&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;no&quot;&gt;:id&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;any-uuid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}}}&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
       &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;get-result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;It works the same for numbers:&lt;/p&gt;

&lt;div class=&quot;language-clojure highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;any-number&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
  &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;reify&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Object&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
      &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nf&quot;&gt;number?&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;other&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))))&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;any-number&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;42&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;

&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;any-number&lt;/span&gt;&lt;span class=&quot;w&quot;&gt; &lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;-99&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;w&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;The only caveat is, this dummy object must be the first one in the &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;=&lt;/code&gt;
function. It does equal to any object on the left but the opposite is false: a
normal UUID doesn’t equal to a fake UUID.&lt;/p&gt;

&lt;p&gt;For the rest, it short and trivial, and no other libraries are needed.&lt;/p&gt;
</description>
        <pubDate>Thu, 11 Sep 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/clojure-any-equals/</link>
        <guid isPermaLink="true">https://grishaev.me/clojure-any-equals/</guid>
        
        <category>programming</category>
        
        <category>clojure</category>
        
        <category>tests</category>
        
        
      </item>
    
      <item>
        <title>Индекс по created_at</title>
        <description>&lt;p&gt;Маленькая техническая заметка про SQL. Такая: если в таблице есть поле
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;created_at&lt;/code&gt;, по нему должен быть btree-индекс. Если поля нет, его нужно
добавить вместе с индексом.&lt;/p&gt;

&lt;p&gt;Объяснение следующее. Срез по времени – это самая частая задача в работе с
данными. Если не фиксировать время события, это обернется бедой.&lt;/p&gt;

&lt;p&gt;Эти два дня я отлаживал серьезный баг, о котором напишу отдельно. Но попутно
выяснилось следующее. В базе данных есть таблица, которая фиксирует изменения
сущностей. В ней один индекс – айди сущности. Это хорошо, если требуется
расследовать конкретную сущность. Но оказалось, пострадало их много за
определенный период, так что этот индекс бесполезен.&lt;/p&gt;

&lt;p&gt;Я хотел выбрать события по времени, благо интервал небольшой, всего неделя. Но
оказалось, что у поля &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;created_at&lt;/code&gt; нет индекса. В таблице 400 миллионов записей,
и отбор по нему работает страшно медленно: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;limit 10&lt;/code&gt; занимает 8 минут.&lt;/p&gt;

&lt;p&gt;Добавить индекс в такую таблицу – страшно дорого. Это нужно делать ночью на
выходных, кто на это пойдет?&lt;/p&gt;

&lt;p&gt;Скажете: используй &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;create index CONCURRENTLY&lt;/code&gt;. А я скажу, что конкурентный
индекс не работает для партицированных таблиц, а наша именно такая. Нужно делать
либо обычный индекс в лоб, либо создавать конкурентный индекс для каждой
партиции. Все сложно.&lt;/p&gt;

&lt;p&gt;По факту таблица превратилась в черную дыру: в нее все входит, но ничего не
выходит. Она беспомощна из-за своей массы. Разве что можно найти данные по
конкретной сущности, но этого часто недостаточно.&lt;/p&gt;

&lt;p&gt;Время – ключевой фактор при расследовании инцидентов. Даже если в таблице
миллиард записей, границы времени известны хотя бы примерно. Можно выбрать срез
и дальше обработать его вручную. А если индекса нет, мы лишили себя такой
возможности. Сами себе Буратины.&lt;/p&gt;

&lt;p&gt;Поэтому – индекс по времени должен быть всегда и обязательно.&lt;/p&gt;
</description>
        <pubDate>Fri, 15 Aug 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/sql-created-at/</link>
        <guid isPermaLink="true">https://grishaev.me/sql-created-at/</guid>
        
        <category>programming</category>
        
        <category>sql</category>
        
        
      </item>
    
  </channel>
</rss>
