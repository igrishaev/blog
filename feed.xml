<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Ivan Grishaev's blog</title>
    <description>Writing on programming, education, books and negotiations.
</description>
    <link>https://grishaev.me/</link>
    <atom:link href="https://grishaev.me/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Mon, 29 Dec 2025 10:28:28 +0000</pubDate>
    <lastBuildDate>Mon, 29 Dec 2025 10:28:28 +0000</lastBuildDate>
    <generator>Jekyll v4.2.0</generator>
    
      <item>
        <title>Как вы используете AI?</title>
        <description>&lt;p&gt;Спрашиваю без сарказма: что вы такое пишете на своем AI? Чем он помогает? Из
каждого утюга слышно, что продуктивность увеличилась в разы. Мне не хватает
конкретики – за счет чего? Как это выглядит? Модель пишет функцию по описанию?
Генерит тесты? Словом, я не понимаю.&lt;/p&gt;

&lt;p&gt;Если судить по себе, то скажу вот что. Моя работа примитивна. Я хожу в базу, в
сетевые сервисы, S3, всякие очереди задач. Все сводится к тому, чтобы собрать из
ошметков данных что-то целостное и записать в файл или базу. Точка. Оптимизации
я придумываю сам, чтобы мозги не засохли. Скажем, использую стримы, виртуальные
треды, параллельность, иной раз – алгоритмы. Но вообще это можно выкинуть. Пусть
код работает в два раза медленней, никто не заметит.&lt;/p&gt;

&lt;p&gt;Моя работа тупая. Я много копирую, потому что фрагментация кодовых баз
огромна. Иногда я честно пытаюсь представить, как бы выглядел AI в моей работе,
но не могу даже близко. Что конкретно мне попросить у AI? Сходить в базу?
Написать запрос с двумя джоинами? Я его на бумажке напишу лучше, чем многие в
редакторе. Тесты? Я просто скопирую другие и слегка поправлю.&lt;/p&gt;

&lt;p&gt;Говорят: используй AI для новых областей. Ну, тут дело удобства. Для новых
областей есть документация, книги, cookbook, стек-оверфлоу,
слаки-телеграмы. Неужели этого не хватает?&lt;/p&gt;

&lt;p&gt;Как-то я покупал Idea Ultimate Edition; среди прочих фич у нее продвинутый
подсказчик. Например, пишешь&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;и он предлагает: стрим из файла, из сети и так далее. А если на следующей
строчке написать&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;OutputStream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;, то вероятность правильного варианта равна единице.&lt;/p&gt;

&lt;p&gt;И все же эту хрень я отключил. Поначалу кажется, что да – супер удобно. Нажал
пару клавиш и выбрал из выпадашки! Продуктивность бьет в потолок. А потом
понимаешь: это выбивает из потока. Когда я пишу код, то обычно знаю, что мне
нужно. А тут на каждой строчке тебя прерывают и предлагают выбор. Нужно
остановиться, пробежать глазами, оценить адекватность, выбрать. На это уходят
такты мозга.&lt;/p&gt;

&lt;p&gt;Напоминает парное программирование, когда ты в потоке, а собеседник кукарекает:
давай переименуем класс, давай переместим функцию и так далее – не понимая, что
сперва нужно в принципе решить задачу, а потом заняться украшательством. Просто
ему нечего делать, и он изображает вовлеченность.&lt;/p&gt;

&lt;p&gt;Ради чего это написано. Хорошо, если бы кто-то подробно описал, за счет чего
повысилась продуктивность с AI. В идеале нужны примеры, скажем, вот по такому
описанию я получил код, он полностью рабочий. Я бы послушал.&lt;/p&gt;
</description>
        <pubDate>Sun, 28 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/why-ai/</link>
        <guid isPermaLink="true">https://grishaev.me/why-ai/</guid>
        
        <category>life</category>
        
        <category>ai</category>
        
        <category>llm</category>
        
        
      </item>
    
      <item>
        <title>Значения-классы</title>
        <description>&lt;p&gt;В очередной раз читаю спор а-ля “динамическая типизация против
статической”. Заметил вот что.&lt;/p&gt;

&lt;p&gt;Попадаются отчаянные джависты, которые говорят: даже простые значения нужно
делать классами, чтобы не допустить ошибки. Например, телефон должен быть не
строкой, а классом &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Phone&lt;/code&gt;, который оборачивает строку; почта — классом &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Email&lt;/code&gt;,
имя — &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Name&lt;/code&gt; и так далее.&lt;/p&gt;

&lt;p&gt;Идея в том, что если метод принимает имя, телефон и почту, то строки легко
перепутать: передать почту вместо имени или телефон вместо почты. А если
параметры типизированы — &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Name, Email, Phone&lt;/code&gt;, — то ошибки быть не может.&lt;/p&gt;

&lt;p&gt;То же самое предлагается делать с числами: температура по Фаренгейту — один
класс, по Цельсию — другой. Для коров и лошадей тоже разные классы:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;HorseNumber&lt;/code&gt; и &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CowNumber&lt;/code&gt;. У таких классов свои методы сложения и вычитания,
чтобы можно было сложить коров только с коровами, но не дай бог с лошадьми.&lt;/p&gt;

&lt;p&gt;К счастью, в Джаве нельзя наследоваться от базовых классов вроде &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String&lt;/code&gt;,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Number&lt;/code&gt; и других. Каким-то образом ее создатели догадались, что если каждый
Васян будет делать свои строки и числа, то откроется дверь в ад.&lt;/p&gt;

&lt;p&gt;Но нашлись лазейки. Иные джависты делают записи с одним полем &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;value&lt;/code&gt;, примерно
так:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;record&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;Phone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;value&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;String&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{};&lt;/span&gt;

&lt;span class=&quot;nc&quot;&gt;Phone&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Phone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;223-322&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Примеры, что они приводят, на первый взгляд красивы. Сигнатура как в примере
ниже&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;someMethod&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nc&quot;&gt;Name&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Email&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Phone&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;действительно выглядит лучше, чем &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;String, String, String&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Однако первая беда в том, что ничто не мешает мне выполнить такой код:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;Phone&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phone&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Phone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;test@hello.com&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;и передать этот псевдо-телефон в метод. Можно добавить валидацию в конструктор,
но в любом случае она сработает в рантайме — компилятор ничего не знает о том,
что строка &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;test@hello.com&lt;/code&gt; — это неправильный телефон.&lt;/p&gt;

&lt;p&gt;А вторая беда в том, что классы не дружат между собой. Даже если ты наколбасил
классы телефона, почты и числа коров, они не подойдут другим таким же
классам. Например, коллега создал класс &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UserPhone&lt;/code&gt;, полностью аналогичный
вашему. Компилятору все равно, что они одинаковы: нельзя передать Phone туда,
где ожидается &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;UserPhone&lt;/code&gt; и наоборот. Все это закончится конвертацией в духе:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;UserPhone&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ph&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;UserPhone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;value&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Джавистам, которые мечтают о таком подходе, я бы пожелал столкнуться с ним на
практике. Чтобы у них был проект с классами &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ЧислоЯблок&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ЯблокВЯщике&lt;/code&gt;,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ЧислоЯщиков&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ВозрастПользователя&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ВозрастСотрудника&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;КуритИлиНет&lt;/code&gt;,
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;МужчинаИлиЖенщина&lt;/code&gt; и так далее. Как говорится, бойся своих желаний!&lt;/p&gt;

&lt;p&gt;Кстати, чтобы избежать путаницы в параметрах, они должны поддерживать передачу
по имени, например так:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;В Джаве такого нет; там приняты билдеры:&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nc&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;builder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;phone&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;email&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;...&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Билдеры занимают экраны кода, но с таким синтаксисом легче понять семантику
параметров.&lt;/p&gt;

&lt;p&gt;Общая проблема в том, что джависты не видят баланса между безопасностью и
удобством. Если ради этой вашей безопасности — которая все еще под вопросом —
нужно поступиться удобством, то я не согласен.&lt;/p&gt;
</description>
        <pubDate>Sun, 28 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/value-types/</link>
        <guid isPermaLink="true">https://grishaev.me/value-types/</guid>
        
        <category>programming</category>
        
        <category>java</category>
        
        
      </item>
    
      <item>
        <title>Книга о Postgres и JSON</title>
        <description>&lt;p&gt;Поздравьте меня, что ли: в эту пятницу я закончил писать черновик новой
книжки. Это будет книга о Postgres. Вся она посвящена одной специфичной теме:
работе с JSON. Расскажу, как хранить в Postgres сложные документы, индексировать
их, версионировать, делать отчеты, работать с ними из Python, искать разными
способами и многое другое. Список глав:&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;Модели и документы&lt;/li&gt;
  &lt;li&gt;Базовые возможности JSON&lt;/li&gt;
  &lt;li&gt;JSON в таблицах&lt;/li&gt;
  &lt;li&gt;Индексирование JSON&lt;/li&gt;
  &lt;li&gt;Ссылки и ограничения в документах&lt;/li&gt;
  &lt;li&gt;Язык путей JSONPath&lt;/li&gt;
  &lt;li&gt;Отчеты и функции&lt;/li&gt;
  &lt;li&gt;Функции на языке Python&lt;/li&gt;
  &lt;li&gt;Версионирование и архивация документов&lt;/li&gt;
  &lt;li&gt;Релевантный поиск&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;“Черновик” означает, что текст полностью готов, но пропущены места с кодом. Буду
их заполнять. Далее верстка, обложка и печатная подготовка.&lt;/p&gt;

&lt;p&gt;Будет в следующем году, скорее всего летом.&lt;/p&gt;
</description>
        <pubDate>Sun, 28 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/pg-json-book-announce/</link>
        <guid isPermaLink="true">https://grishaev.me/pg-json-book-announce/</guid>
        
        <category>life</category>
        
        <category>book</category>
        
        <category>json</category>
        
        <category>postgres</category>
        
        <category>sql</category>
        
        
      </item>
    
      <item>
        <title>Новая модель</title>
        <description>&lt;p&gt;&lt;img src=&quot;/assets/static/aws/new-llm/1.jpeg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Каждый раз, когда выходит новая языковая модель, повторяется одно и то
же. Постят график с гантелями, где модель якобы обходит конкурентов в
бенчмарках. При этом все смотрят на график как на что-то само собой
разумеющееся. Никто не спросит, как вообще эти гантели читать? Левый конец — то,
что было раньше, правый — сейчас? Зачем точка посередине? Что это за бенчмарки
такие? Чем один отличается от другого? Я понимаю, есть ребята, которые в теме,
но если пишешь для всех, можно и объяснить.&lt;/p&gt;

&lt;p&gt;Ну и примеры. Какое мне дело, что в бенчмарке X модель набрала на пять баллов
больше? Где примеры того, в чем конкретно она улучшилась?&lt;/p&gt;

&lt;p&gt;Каждый релиз LLM — это взрыв на фабрике гантелей. Армия чудаков растаскивает
графики по соцсетям, делая вид, что понимает их.&lt;/p&gt;
</description>
        <pubDate>Sun, 28 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/new-llm/</link>
        <guid isPermaLink="true">https://grishaev.me/new-llm/</guid>
        
        <category>llm</category>
        
        <category>ai</category>
        
        
      </item>
    
      <item>
        <title>Еще про API</title>
        <description>&lt;p&gt;Вдогонку про рестовые апишки. С первого дня, что я работаю с ними, меня бесит
одна вещь, которую никто не замечает. Она состоит в следующем: данные размазаны
по всему HTTP-запросу.&lt;/p&gt;

&lt;p&gt;Часть параметров нужно взять из урла, например айдишки сущностей. Другие данные
– из заголовков. Если это GET/HEAD, взять параметры query string. Если POST –
читать multipart или парсить json. В итоге первые 5-10 строк кода уходят на то,
чтобы выковырять данные из разных мест.&lt;/p&gt;

&lt;p&gt;Всегда поражало: почему никто не видит проблемы? Почему не заслать все в
джейсоне через POST? Ради чего размазывать поля по разным местам?&lt;/p&gt;

&lt;p&gt;Я хочу, чтобы апишка была описана данными, например словариком с полем &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;action&lt;/code&gt;
и &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;params&lt;/code&gt;. Все в одном месте, и дальше этот словарик разруливается по полю
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;action&lt;/code&gt;. Под каждый словарик пишется схема и документашка. Что еще нужно?&lt;/p&gt;

&lt;p&gt;У этого подхода миллион преимуществ, вот хотя бы некоторые:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;не нужно парсить урлы и query-параметры. Парсинг урлов, вычленение айдишек с
приведением к числу – это сложно;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;не нужно клеить урлы на клиенте. Это лютейшая боль: зачем вам
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/api/v1/users/123/orders/456&lt;/code&gt; вместо &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;{:user_id 123 :order_id 456}&lt;/code&gt;?&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;сообщенька отделяется от транспорта; становится неважно, как ее передали: по
HTTP или иначе.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;следствие 1: легко добавить новый транспорт. Фронтенд захотел веб-сокеты –
пожалуйста, это делается за день. Напомню, что в веб-сокете никаких урлов нет,
только данные.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;следствие 2: очереди. Тяжелые сообщения можно складывать в кафки-реббиты.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;следствие 3: тесты и сценарии. Можно подготовить файл, где каждая строка –
сообщенька. После чего сказать: выполни их по порядку. В результате система
придет в нужное состояние.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;пакетный режим: тот же JSON RPC позволяет заслать несколько сообщений за
раз. Их можно обработать параллельно.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;бывает, один обработчик должен вызвать другой. Ты же не будешь слать сам себе
HTTP-запрос! Подготовил сообщеньку и скормил ее функции, которая их
разруливает.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Замечу, что под сообщением я имею в виду не очереди задач, а нечто
другое. Сообщение – это набор данных, которые описывают действие. Удобно, когда
все это хранится рядом.&lt;/p&gt;

&lt;p&gt;Я уж молчу о том, что в классическом REST вечно не хватает методов или они
неочевидны. В одной фирме коллеги чуть не подрались, когда спорили, что
использовать для изменения: PUT или PATCH. Самая жесть – это запросы, которые
меняют сразу несколько сущностей. Там вся концепция ресурсов идет лесом.&lt;/p&gt;

&lt;p&gt;Сообщения удобней для понимания. Что легче читается: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;POST /api/v1/orders&lt;/code&gt; или
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CreateOrder&lt;/code&gt;? Другой пример: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PATCH /api/v1/orders/123456/cancel&lt;/code&gt; или
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CancelOrder&lt;/code&gt;?  То-то же.&lt;/p&gt;

&lt;p&gt;Сообщения используются не только в вебе. Например, любое обращение к Postgres –
это обмен сообщеньками. У них общий контейнер: метка, длина и произвольное тело,
которое парсится в зависимости от метки. Как только написал парсер сообщений,
считай, клиент почти готов.&lt;/p&gt;

&lt;p&gt;В Кассандре, Кафке то же самое: заголовок/cooбщенька, заголовок/cooбщенька.&lt;/p&gt;

&lt;p&gt;Поэтому я уверен: нужно думать над сообщениями, а транспорт всегда найдется. Это
вторичная вещь. Жаль, этого не понимают REST-маньяки со своими сваггерами,
постманами, бест-практис и так далее.&lt;/p&gt;
</description>
        <pubDate>Sun, 28 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/more-on-api/</link>
        <guid isPermaLink="true">https://grishaev.me/more-on-api/</guid>
        
        <category>programming</category>
        
        <category>rest</category>
        
        <category>api</category>
        
        
      </item>
    
      <item>
        <title>Европейский закон о зарплате</title>
        <description>&lt;p&gt;Пишут, что в 2026 году в Европе введут новые правила о зарплате. Вот неполный их
список:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;зарплата должна быть указана в любом объявлении о найме;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;соискателя обязаны уведомить о зарплате еще до интервью и подписания договора;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;разглашение зп не может быть поводом для увольнения или других воздействий;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;сотрудникам можно запрашивать информацию о зарплатах других сотрудников;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;компании штатом более 250 сотрудниками должны публиковать отчеты о зп в
разрезе гендера.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Может быть и врут, я особо не проверял. Но откровенно говоря – очень похоже на
правду.&lt;/p&gt;

&lt;p&gt;Не мое дело – критиковать европейские законы; пусть принимают что хотят. Я бы
сказал, что со своей колокольни не хотел бы таких законов. Я хочу, чтобы моя
зарплата оставалась в тайне. Просто потому, что часто мне платили больше, чем
остальным, и я не вижу ни одной причины, по которой коллеги должны об этом
знать.&lt;/p&gt;

&lt;p&gt;Точно также я никогда не интересовался чужими зарплатами. Мое убеждение железно:
получает больше тот, кто умеет и знает больше. Стремись ко второму, и первое
придет само собой.&lt;/p&gt;

&lt;p&gt;Кстати, в этом коренная проблема Европы – тотальное регулирование. Именно
поэтому Европа смотрит американский Нетфликс, ищет в американском Гугле, читает
американский Твиттер, чатится в американском Вацапе, вызывает американский Убер
и так далее.&lt;/p&gt;

&lt;p&gt;Где хостится европейский стартап? В американских AWS, Google Cloud, Azure. Куда
едут условные финн Торвальдс и голландец Ван Россум? Где зарегистрированы фонды
Линкуса и Питона? В Америке.&lt;/p&gt;

&lt;p&gt;Чтобы создать сервис, который захватит мир, нужно нарушить чьи-то права. В
Америке обе стороны (фирма и работник) идут на это добровольно, и в результате
американские сервисы повсюду. Европейские – нет.&lt;/p&gt;

&lt;p&gt;В чем Европа достигла успеха, так это в том, что держит американские сервисы в
узде. Для жителей Евросоюза действуют особые правила, их данные обрабатываются
по-другому. Да, их нельзя перемещать между юрисдикциями и продавать американским
партнерам. Но это победа чиновника, а не конечного потребителя.&lt;/p&gt;

&lt;p&gt;В этом плане Россия похожа на Америку. Российский айтишник совершенно не против,
чтобы его эксплуатировали – если за это платят и результат достойно смотрится в
резюме. Даже сейчас, когда российский Яндекс продали олигархам, туда готовы идти
за еду. В раннем Яндексе сотрудники буквально там жили. Поэтому в России есть
поисковик, соцсети, такси, антивирус, маркетплейсы, карты, музыкальные и
видеосервисы.&lt;/p&gt;

&lt;p&gt;Закругляясь: я бы советовал поменьше трепаться о зарплате. Это личное и никого
не касается. Я уверен, что так лучше для всех – в том числе тех, кто так хочет
вашу зарплату узнать. Да будет им известно: лишние знания приумножают скорбь.&lt;/p&gt;
</description>
        <pubDate>Sun, 28 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/euro-salary/</link>
        <guid isPermaLink="true">https://grishaev.me/euro-salary/</guid>
        
        <category>life</category>
        
        <category>salary</category>
        
        
      </item>
    
      <item>
        <title>Полоса прокрутки (2)</title>
        <description>&lt;p&gt;&lt;a href=&quot;/youtube-top/&quot;&gt;Небольшое продолжение&lt;/a&gt; про Ютуб — и больше поднимать эту тему не
буду.&lt;/p&gt;

&lt;p&gt;Всякими махинациями я добился того, чтобы полоса была под видео, а не на
нем. Для этого классу &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ytp-chrome-bottom&lt;/code&gt; добавляется свойство &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;bottom: -60px&lt;/code&gt;
или около того. Но проблема пришла откуда не ждали, и даже не одна.&lt;/p&gt;

&lt;p&gt;Дело в том, что тулбар появляется только когда наводишь курсор на плеер. Так
вот: если тулбар вне плеера, то наведение мыши на него ничего не дает — он
остается невидимым. Простыми словами, перестает работать.&lt;/p&gt;

&lt;p&gt;Я такой думаю: наверное, на тулбар вешается класс &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;hidden&lt;/code&gt; или похожий. Сейчас
поменяю этот класс, чтобы он был всегда видим и победю систему. Оказалось,
видимость определяется не классом, а средствами JavaScript.&lt;/p&gt;

&lt;p&gt;Тогда я сделал так: растянул плеер, чтобы он охватывал тублар даже после
смещения. Это помогло: при наведении на тулбар он появляется. Однако теперь не
работают кнопки. Ощущение, будто где-то есть невидимый div, который
перехватывает клики. Из-за смещения тулбара они идут мимо него, и ничего не
работает.&lt;/p&gt;

&lt;p&gt;Ну и в целом сложность: штук двадцать вложенных дивов &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yt-player&lt;/code&gt; →
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yt-main-container&lt;/code&gt; → &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yt-main-inner&lt;/code&gt; → &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yt-video-container&lt;/code&gt; →
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;yt-video-node&lt;/code&gt; и так далее. Каждый что-то перехватывает и наследует. Дебажить
этот цирк — то еще удовольствие.&lt;/p&gt;

&lt;p&gt;Так что переносом тулбара вверх я пока и ограничусь. Слишком напряжно этим
заниматься. Сложность Ютубного плеера колоссальная: там годы легаси и костылей,
чтобы работать во всех браузерах, трекать, показывать рекламу, плашки,
рекомендации и так далее. Задача мне не по зубам, признаю поражение.&lt;/p&gt;
</description>
        <pubDate>Fri, 26 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/youtube-top2/</link>
        <guid isPermaLink="true">https://grishaev.me/youtube-top2/</guid>
        
        <category>life</category>
        
        <category>youtube</category>
        
        
      </item>
    
      <item>
        <title>Полоса прокрутки</title>
        <description>&lt;p&gt;Некоторое время назад я жаловался на плеер Ютуба, мол, полоса прокрутки и кнопки
залезают на видео. На это можно повлиять при помощи своего css-файла. Для
Фаерфокса и его форков инструкция такая:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Определить папку с профилем. Для этого нажать Help -&amp;gt; More Troubleshooting
Information -&amp;gt; Profile Folder -&amp;gt; Show in Finder&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Создать в ней папку chrome&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;В ней создать файл &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;userContent.css&lt;/code&gt; с таким содержанием:&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-text highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;@-moz-document domain(youtube.com) {
 .ytp-chrome-bottom {
     position: relative !important;
     bottom: -15px !important;
 }
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;Зайти в &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;about:config&lt;/code&gt; и задать свойсво
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;toolkit.legacyUserProfileCustomizations.stylesheets&lt;/code&gt; в &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;true&lt;/code&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Перезапустить браузер.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;В результате тулбар окажется сверху с зазором в 15 пикселей. Картинку прилагаю:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/static/aws/youtube-top/1.jpeg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Мысли следующие: пока настраивал папки-файлы, поразился этому дурдому. Почему
ради простой задачи нужно совершать пять шагов? Неужели нельзя сделать
примитивный textarea, куда вводишь текст и он сохраняется в файл? Почему браузер
нужно перезагружать? Почему папка называется “Хром”? При чем тут хром? Какая-то
жесть.&lt;/p&gt;

&lt;p&gt;В общем, когда стили заработали, я удивился как бухгалтер, у которого сошелся
годовой отчет.&lt;/p&gt;

&lt;p&gt;Впечатления от новой полосы интересные. Чувство такое, что вместо 90% контента
теперь видишь все 100%. Внезапно, надписи внизу читаются; у людей есть колени и
ноги; у ведущего в углу кадра есть лицо. Раньше ничего этого не было, а теперь —
пожалуйста.&lt;/p&gt;

&lt;p&gt;Могу спокойно читать субчики в “Зеленом слонике”, а раньше не мог. То-то же.&lt;/p&gt;

&lt;p&gt;Для Хрома и форков инструкции нет, но полагаю, найдутся расширения.&lt;/p&gt;

&lt;p&gt;Ни в коем случае не продавливаю свое решение — по-хорошему его надо улучить. Но
какую-то свежесть оно дает, попробуйте.&lt;/p&gt;
</description>
        <pubDate>Fri, 26 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/youtube-top/</link>
        <guid isPermaLink="true">https://grishaev.me/youtube-top/</guid>
        
        <category>life</category>
        
        <category>youtube</category>
        
        
      </item>
    
      <item>
        <title>Оружия черепашек-нинздя</title>
        <description>&lt;p&gt;Разговаривал с одним человеком и выяснил, что он не знает, какие оружия у
черепашек-нинздя. Это должен знать каждый, и я не сомневаюсь, что и вы
знаете. Просто на всякий случай повторю.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/static/aws/tmnt/1.jpeg&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Итак, первый уровень, изи: Леонардо, который в голубой повязке, владеет двумя
мечами. Это всем понятно.&lt;/p&gt;

&lt;p&gt;Второй уровень, нормал: что у Микеланджело, который в оранжевой повязке? Это
нунчаки: две палки на цепи, которыми проще убить себя, чем противника.&lt;/p&gt;

&lt;p&gt;Теперь третий уровень, хард: что у Донателло, который в фиолетовой повязке?
Простолюдин скажет, что у него палка, и от этого хочется плакать. Это бо! – или,
чтобы было понятнее, шест бо. Посох из металла или с его элементами, чтобы не
сломаться и сильнее бить противника. Бо полезен в бою, в быту, в походе, словом,
универсальная для Востока вещь.&lt;/p&gt;

&lt;p&gt;Последний уровень, найтмеар: что у Рафаэля, черепашки в красной повязке? Когда
говорят, что трезубец, хочется кататься по полу от отчаяния. Это саи. С-а-и!
Один сай, два сая, многое саев. Гугл-док не понимает и предлагает замену, но
вы-то понимаете! Такие кинжалы с двумя лепестками по краям. Идея в том, чтобы
принять меч противника между зубцами и резко повернуть. Твой рычаг больше, чем у
противника, и он теряет оружие.&lt;/p&gt;

&lt;p&gt;Все это я пишу по памяти безо всяких Википедий, и знал это лет с семи. А вот как
без этого можно жить – я не понимаю. Молодежь пошла не та, зумеры не хотят
работать и вообще все плохо.&lt;/p&gt;
</description>
        <pubDate>Fri, 26 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/tmnt/</link>
        <guid isPermaLink="true">https://grishaev.me/tmnt/</guid>
        
        <category>life</category>
        
        <category>tmnt</category>
        
        
      </item>
    
      <item>
        <title>Дизайн REST API</title>
        <description>&lt;p&gt;В Линкед-ине хвастает человек: мол, нейросеть задизайнила
рест-апишку. Прикладывает скриншот сваггера. Я смотрю на него и киваю: да, все
на месте, все как у современного разработчика. А еще я понимаю, что на
скриншоте, как в капле воды, собрано все то, за что я не люблю рестовые апишки.&lt;/p&gt;

&lt;p&gt;Во-первых, версия &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;v1&lt;/code&gt; в урле. Она всегда меня забавляла. Я работал во многих
стартапах, и ни один из них не сменил версию. Гораздо чаще стартапы закрываются
и продаются. Я считаю, апишка должна быть одна, и со временем какие-то методы
добавляются, какие-то снимаются с обслуживания. А в той нумерации, что на
скриншоте, слишком много пафоса. Примерно как объявить счетчик с шестью нулями
для значения, которое в лучшем случае достигнет двойки. Даже если предположить,
что появится новая апишка, просто сделай другой урл: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/api/grpc&lt;/code&gt; или
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;/api/graphql&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Далее, иерархия. Те апишки, которые работают с матчем, требуют код
турнира. Нужно передать две айдишки: турнира и матча. Зачем? Разве может матч
относиться к разным турнирам? Это банальная избыточность, и делается она ради
красоты. Должен передаваться только матч, а по нему легко найти турнир и
проверить права.&lt;/p&gt;

&lt;p&gt;Еще одна забавная вещь: метод &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;PUT&lt;/code&gt; не может покрыть все изменения, поэтому в
ход идут костыли: частички &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:report&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;:reopen&lt;/code&gt; на конце урла. Это некрасиво,
потому что по-хорошему операция определяется HTTP-методом, а тут урлы. Тот
случай, когда шубу заправляют в трусы, а она не лезет.&lt;/p&gt;

&lt;p&gt;Ну и расцветка Сваггера как у цыган: зеленый, голубой, оранжевый, красный… все
собрали.&lt;/p&gt;

&lt;p&gt;На мой взгляд, нормальная апишка должна быть по принципу RPC. Один урл с двумя
параметрами: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;action&lt;/code&gt; и &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;params&lt;/code&gt;. Метод один – POST. Внутри словарик с функциями
и схемами, по которому раскидываются запросы. Все. Документашка со схемами
строится одной командой.&lt;/p&gt;

&lt;p&gt;Апишка – довольно простая вещь. Она не должна быть сложной и требовать разного
тулинга. Тот REST, что имеем сегодня – это вавилонская башня на ровном
месте. Как и в библейской истории, разработчики сами не понимают друг друга. Но
продолжают и продолжают строить эту башню.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/static/aws/rest-api/1.jpeg&quot; /&gt;&lt;/p&gt;

</description>
        <pubDate>Fri, 26 Dec 2025 00:00:00 +0000</pubDate>
        <link>https://grishaev.me/rest-api/</link>
        <guid isPermaLink="true">https://grishaev.me/rest-api/</guid>
        
        <category>programming</category>
        
        <category>rest</category>
        
        <category>swagger</category>
        
        
      </item>
    
  </channel>
</rss>
