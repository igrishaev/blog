<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page10/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/java/">Java</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-12-05T00:00:00+00:00">
        Dec 5, 2023
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/java/" rel="tag">java</a>

</div>


            <div class="entry">
                
                    <p>У меня появился пет-проект, и самое главное — он не на Кложе, а на Джаве. Пишу
уже две недели, и вот какие ощущения.</p>

<p>Современная Джава неожиданно хороша. Если взять последнюю версию 21, не цепляясь
на бородатое легаси, то писать на ней довольно приятно. Скажем, везде вместо
классов использовать рекорды — это неизменяемые классы, которые экономят код и
несут клевые вещи из коробки.</p>

<p>Или использовать паттерн-матчинг по классам, например:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">switch</span> <span class="o">(</span><span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nc">BindComplete</span> <span class="nl">ignored:</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="nc">AuthenticationOk</span> <span class="nl">ignored:</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="nc">AuthenticationCleartextPassword</span> <span class="nl">ignored:</span>
        <span class="n">handleAuthenticationCleartextPassword</span><span class="o">();</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="nc">ParameterStatus</span> <span class="nl">x:</span>
        <span class="n">handleParameterStatus</span><span class="o">(</span><span class="n">x</span><span class="o">);</span>
        <span class="k">break</span><span class="o">;</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">SomeException</span><span class="o">(</span><span class="s">"no branch"</span><span class="o">);</span>
</code></pre></div></div>

<p>Когда-то давно это делалось паттерном Visitor (Посетитель). От одного упоминания
на зубах скрипит песок. А теперь это несколько строчек. Современной Джаве нужно
все меньше паттернов, потому что они нативо поддерживаются языком. Это
происходит медленно, в год по чайной ложке, но в данном случае медлительность
значит неотвратимость.</p>

<p>В 21 Джаве завезли виртуальные треды. С ними можно писать блокирующий код, а JDK
сама определит, когда тред можно остановить и возобновить. Конечно, нужно знать
детали процесса. <a href="/en/virtuoso/">Недавно я погонял</a> виртуальные треды из Кложи,
и прям очень приятно.</p>

<p>Хочется отметить Джавный тулинг. Идея Community Edition очень хороша. Все
подхватывает, безошибочно подсказывает варианты в выпадашках. В Кложе такого нет
и никогда не будет.</p>

<p>Да, в Джаве нет репла, но вот смотрите: я написал класс Main с запускалкой
кода. Жму зеленую стрелку — все выполнилось. Если что-то упало, я ставлю дебаг
на строку и жму кнопку с жуком. Исполнение прерывается на отметке, вижу
локальное состояние, правлю код, запускаю. Прекрасно.</p>

<p>В Кложе, наоборот, нет встроенного отладчика вообще. Есть отладчик в
emacs-cider, но он странный и работает через раз. Для себя я написал <a href="https://github.com/igrishaev/bogus">отладчик
bogus</a>, и он спасал меня раз двести, не меньше. Но моя поделка ничего не
решает — ей пользуются три анонимуса, а остальные дебажат принтами или через
tap.</p>

<p>Конечно, начинать проект на Джаве 21 — это утопия. Куда бы вы не пошли, вас
будет ждать легаси, которому, дай бог, обновиться бы до Джавы 17. Там будут
паттерны, частично инициированные POJO и прочие прелести. Но хобби на свежей
Джаве — почему нет?</p>

<p>Джава развивается так быстро, что не успеваешь следить. В нее вливают горы
денег, а работают над ней одни из умнейших людей мира. Это
чувствуется. Например, в случае с виртуальными тредами пришлось пройти по всей
SDK и поправить все блокирующие вызовы. Колоссальная работа! Все, чтобы
программист поменял <code class="language-plaintext highlighter-rouge">FixedPoolExecutor</code> на <code class="language-plaintext highlighter-rouge">VirtualThreadExecutor</code>, и вжух —
полетело.</p>

<p>Не все принимают эту данность. Я знаю человека, который уверен, что Джава — это
собственность Оракла (хорошо хоть не Sun), за нее нужно платить, она тормозная и
ест много памяти. При этом на Джаве он писал 15 лет назад. Уютный мирок
заблуждений приятней, чем реальность.</p>

<p>Сказанное не значит, что я записался в джависты. Просто у Джавы можно многому
поучиться в плане развития. Взять на заметку.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/video-covers/">Обложки</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-12-04T00:00:00+00:00">
        Dec 4, 2023
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Я не могу смотреть на обложки, где автор кривляется. Например, делает грустное
или злое лицо. Кривит рот. Или в заголовке указано “Choosing X vs Y”, и автор
подпирает подбородок и смотрит вверх — типа задумался.</p>

<p>Помните Крошку Енота? Не строй рожи, а улыбнись! И оно к тебе вернется.</p>

<p>Не буду приводить примеры, чтобы не обидеть кого-нибудь. Но блин, какая же это
тупизна. Хотя и здесь можно найти пользу: если автор кривляется, смотреть видео
не нужно.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/on-headers/">О заголовках</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-12-04T00:00:00+00:00">
        Dec 4, 2023
    </time>

    <a href="/tag/text/" rel="tag">text</a>, <a href="/tag/headers/" rel="tag">headers</a>

</div>


            <div class="entry">
                
                    <p>Небольшая заметка о том, как писать заголовки. Главное правило — заголовок не
должен делать предположений о читателе или диктовать ему шаги. Читатель —
абсолютно нейтральная сторона. Указывать ему — все равно что ломать четвертую
стену, то есть фу.</p>

<p>Примеры плохих заголовков:</p>

<ul>
  <li>
    <p><strong>10 фактов о JavaScript, которые должен знать каждый разработчик.</strong> Ничего я тебе
не должен, отвали.</p>
  </li>
  <li>
    <p><strong>20 фактов о Python, которые вы не знали.</strong> Я на нем 8 лет писал, все я знаю.</p>
  </li>
  <li>
    <p><strong>Почему ваш код — отстой.</strong> Это у тебя отстой, не переноси с больной головы
не здоровую.</p>
  </li>
  <li>
    <p><strong>Посмотрите это видео прямо сейчас или добавьте в закладки.</strong> Спасибо, сам
разберусь, что и когда смотреть и где хранить.</p>
  </li>
</ul>

<p>Удивляет, что вроде бы нормальные ребята нет-нет да озаглавят материал в таком
духе. Один кложурист написал статью “Why your REPL experience sucks”. Я
посмотрел код, а он там жестко накосячил. Интересно выходит: косячит он, а
experience sucks мой.</p>

<p>Или видел заголовок Медузы: вышло какое-то видео, посмотрите сейчас или добавьте
в закладки. Может, еще выслать письменный отчет о просмотре? И переслать ссылку
десяти знакомым?</p>

<p>Нельзя тыкать читателю, что он знает и что нет, что и когда смотреть. Читатель
сам прекрасно разберется.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/dvd-quests/">DVD-квесты</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-12-04T00:00:00+00:00">
        Dec 4, 2023
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/dvd/" rel="tag">dvd</a>

</div>


            <div class="entry">
                
                    <p>Накатило воспоминание, и хочу им поделиться с вами.</p>

<p>В моем детстве не было интернета, и контент доставали на DVD. Это были фильмы,
софт, музыка любимых групп. И надо сказать, кроме содержимого диска я всегда
интересовался его оформлением.</p>

<p>На DVD мог быть не только фильм, но и интерактивное меню. Например, при
включении диска показывалась менюшка, где можно было выбрать просмотр сначала,
конкретный эпизод или фанатский контент: короткометражки, бекстейдж и прочее.</p>

<p>Технически менюшка могла быть как картинкой, так и видео. Классно смотрелись
менюхи, где фоном шло видео, а кнопки тоже были анимированные, например,
короткие сцены к эпизодам. Кнопки работали как горячие области: на них можно
было кликать. По клику человек улетал на другую менюху или видео.</p>

<p>Одно время я работал на <a href="/altes/">телеканале Альтес</a>, и там мне это очень
пригодилось. Мы частенько записывали клипы местных артистов на DVD, и до меня
оформления дисков как такового не было. В программе для записи выбирали менюху
по умолчанию, и все. А я заморочился и сделал менюхи в стиле каждого
артиста. Это был фурор, и подобная вещь стала стандартом: нам, пожалуйста, с
менюшкой, как у тех ребят.</p>

<p>Так вот, у меня было много дивидишек, красивых и не очень, но один я никогда не
забуду. В то время я увлекался группой Korn — я и сейчас их люблю, но меньше — и
попался мне их диск. Я думал, что на нем обычный сборник клипов, но то, что было
внутри, превзошло все ожидания.</p>

<p>Это был настоящий DVD-квест! Действие в нем происходит от первого лица. Вначале
беднягу закатывают на каталке в дурдом а-ля Сайлент Хилл. Всюду инвалидные
коляски, решетки и крючья на потолке. Герой встает и начинает исследовать
локацию.</p>

<p>На Ютубе нашлись фрагменты этого диска. Ниже — кадр из заставки и ссылка на
видос:</p>

<p><img src="/assets/static/aws/dvd-quests/1.png" /></p>

<p>https://www.youtube.com/watch?v=KkioRvvyVRw</p>

<p>Каждая локация — это комната с интерактивными предметами. Посмотрев на предмет,
герой испытывает припадок, и ему показывают видео с группой Korn. В основном это
бекстейдж, где музыканты обдолбанные в трейлере, видео с репетиций или просто
балдеж. Во время блужданий по дурдому можно попасть в комнату охраны с кучей
телевизоров, и по клику на каждый показывается клип. Контент нужно было найти!</p>

<p>Особо хотелось бы рассказать про навигацию между комнатами. Каждая комната была
не статичной картинкой, а видео. Например, крючья на потолке качались и
бренчали, проводка искрила, вода текла из пробитых труб. На фоне звучал зловещий
амбиент. В одной из комнат был псих в рубашке на электрическом стуле. Набор
штампов, но как все это было оформлено!</p>

<p>Если “потрогать” предмет, например череп на столе или анатомический атлас, герой
“видел” историю этого предмета: кто его держал до вас, что происходило в комнате
и так далее.</p>

<p>Навигация между комнатами была связной: если нажать на дверь, включался ролик,
как герой отворяет ее и попадает в другую локацию. Если нажать на вентиляцию в
стене, он вставал на цыпочки, чтобы подглядеть, что там твориться. Были приколы
с пролетом сквозь трубы с червями и мокрицами. Все вместе это давало такой
эффект присутствия, что не найду слов.</p>

<p>Ну и наконец: там была скрытая локация. Представляете? Секретная комната! На
DVD! В одном месте была лестница в подвал, а там — дверь с кодовым замком. Замок
был представлен отдельной менюшкой с кнопками от 1 до 9. Нужно было ввести
четыре правильных цифры. При ошибке тебя сбрасывали на начало ввода.</p>

<p>По ссылке ниже другая головоломка с этого диска. Видимо, либо их было две, либо
я что-то путаю.</p>

<p><img src="/assets/static/aws/dvd-quests/2.png" /></p>

<p>https://www.youtube.com/watch?v=ofR1hijB1rw</p>

<p>Вы представляете, как трудно это было сделать? У DVD нет переменных и состояния,
он может только показывать видео или меню. Поэтому создатели диска сделали пять
сцен с замком. Первая — когда ничего не введено и одна кнопка ведет вперед, а
остальные — назад. Вторая — когда правильно введена первая цифра; на ней уже
другая кнопка ведет вперед, а остальные — на первую сцену. Третья — когда
введены две цифры; четвертая — когда введены три, и последняя правильная
открывает дверь.</p>

<p>Чтобы вы оценили масштаб, нарисую граф переходов:</p>

<p><img src="/assets/static/aws/dvd-quests/3.png" /></p>

<p>Видите? Я даже две полных сцены не нарисовал, а линии уже не дают понять, что
происходит. А там этих сцен было минимум пять.</p>

<p>Код на двери был 19… чего-то там: год образования группы. За дверью находился
морг с совсем уж трешовым оформлением. На стеллажах лежали трупы музыкантов;
если их осмотреть, показывали крайне упоротое видео.</p>

<p>Вот какой был дивидишник! Пишу о нем потому, что хочу воздать должное его
создателям. Как же они заморочились! Надо было найти подходящий подвал,
разложить реквизит, все отснять, смонтировать, наложить криповые эффекты. Надо
было продумать карту, маршруты передвижения, какое видео и где разместить. Сцена
с кодовым замком по сложности была как четверть всего проекта. И сделать все это
в программе, которые были рассчитаны на пару менюшек! Это просто мое уважение.</p>

<p>Сколько часов я провел, слоняясь по тем подвалам! Это была как будто игра, но и
не игра — а квест в телевизоре.</p>

<p>И хотя я ни разу не видел подобных дисков, один приятель рассказывал о чем-то
похожем. У него был официальный DVD с фильмом “Люди в черном”, и там зритель
оказывался в лаборатории. Можно было либо смотреть фильм, либо исследовать
локации и заглядывать в предметы, где спрятан фанатский контент.</p>

<p>Пишу это и понимаю, что ничего подобного сегодня быть не может. У нас есть
стриминговые сервисы и торренты, но ни то, ни другое не предполагает оформления:
ни меню, ни фанатского контента.</p>

<p>Это ни в коем случае не сожаление о прошлом, а попытка его увековечить. Да, была
такая прикольная фигня. Да, было клево. Да, да.</p>

<p>И вернемся в сегодня.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/en/ddd-lie">Data-Driven Development is a Lie</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-11-20T00:00:00+00:00">
        Nov 20, 2023
    </time>

    <a href="/tag/clojure/" rel="tag">clojure</a>, <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/ddd/" rel="tag">ddd</a>, <a href="/tag/lie/" rel="tag">lie</a>

</div>


            <div class="entry">
                
                    
<p><strong>UPD:</strong> there is <a href="https://news.ycombinator.com/item?id=38345843">discussion on Hacker News</a> on that article. Thank you
Mike for letting me know.</p>

<p>In the Clojure community, people often discuss such things as <a href="https://en.wikipedia.org/wiki/Data-driven_programming">data-driven
development</a>. It is like you don’t write any code or logic. Instead, you
declare data structures, primarily maps, and whoosh: there is a kind of Deus ex
Machina that evaluates these maps and does the stuff.</p>

<p>That’s OK when newcomers believe in such things. But I feel nervous when even
experienced programmers tell fairy tales about the miracle that DDD brings to
the scene. That’s a lie.</p>

<p>I’ve been doing Clojure for nine years, and DDD is useful in rare cases
only. Yes, in some circumstances, it saves one’s time indeed. But only
sometimes, not always! And it’s unfair: people give talks at conferences about
how successful they were with DDD in their project. But they would never give a
speech about how they messed up by describing everything with maps.</p>

<p>Let me give you an example. Imagine we’re implementing a restriction
system. There is a context, and we must decide whether to allow or prohibit the
incoming request. Obviously, every Clojure developer would do that with maps. We
declare a vector of maps where each map represents a subset of the
context. Should at least one rule match the context, we allow the request.</p>


                    <p><a href="/en/ddd-lie">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/ui-emptiness/">UI и пустота</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-11-18T00:00:00+00:00">
        Nov 18, 2023
    </time>

    <a href="/tag/ui/" rel="tag">ui</a>, <a href="/tag/emptiness/" rel="tag">emptiness</a>

</div>


            <div class="entry">
                
                    <p>Уже не раз писал о проблемах современного дизайна, но повторюсь. Одна из главных
проблем — избыток пустого места. Там, где можно уместить информацию, сквозит
пустота, а полезные вещи спрятаны под выпадашку.</p>

<p>Это просто бич современности! Растут расширения мониторов, завезли ретину,
телефоны стали лопатами — а информации меньше, чем на стареньком ЭЛТ-мониторе.</p>

<p>Из сегодняшнего: интерфейс Гугл-переводчика. Обратите внимание на секцию “More
translations.” Зачем ее сворачивать? Под ней сплошная пустота, что мешает сразу
показать другие переводы?</p>

<p><img src="/assets/static/aws/ui-emptiness/1.png" /></p>

<p>(Подпись, чтобы показать, где кончается скриншот)</p>

<p>Ладно, спрятали под выпадашку. Но почему тогда не полностью? Почему первый
вариант “общественное…” все-таки вылез? А если он вылез, то зачем сокращать до
многоточия? Там же полно места для “общественного питания”. Там ДО ХРЕНА пустого
места, все вместится и еще останется.</p>

<p>Дизайнеры, я правда хочу знать: зачем вы прячете информацию? Кто вас этому
научил? Это плохо, скорей переучивайтесь.</p>

<p>А недавно в одном чате набросили книгу <a href="https://www.refactoringui.com/">Refactoring UI</a>. Переделка
интерфейса. Название хорошее, неужели кто-то одумался? Читаю тезисы, а там:</p>

<blockquote>
  <p>Instead, try adding a box shadow, using contrasting background colors, or
simply adding more space between elements.</p>
</blockquote>

<p>И хочется выйти в окно. Мало того, что какие-то уродцы сливают полезное место в
унитаз; так еще пишутся книги, где это прямо советуют! Сделай лучше, добавь
пустоты!</p>

<p>Пожалуйста, не покупайте эту книжку. Пожалейте пользователей.</p>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/telegram-highlight/">Подсветка в Телеграме</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-11-08T00:00:00+00:00">
        Nov 8, 2023
    </time>

    <a href="/tag/telegram/" rel="tag">telegram</a>, <a href="/tag/highlight/" rel="tag">highlight</a>, <a href="/tag/update/" rel="tag">update</a>

</div>


            <div class="entry">
                
                    <p><img src="/assets/static/aws/tele-hl/1.jpg" /></p>

<p>В Телеграме появилась подсветка ссылок и цитат. Теперь у нас синенькое,
зелененькое, розовенькое, голубенькое сразу вместе, одно за другим. Ну и
уродские шрифты в плашках Гитхаба.</p>

<p>Молодцы, старались. Один вопрос – зачем? Чтобы что?</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/tales/">Восточные сказки</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-11-08T00:00:00+00:00">
        Nov 8, 2023
    </time>

    <a href="/tag/tales/" rel="tag">tales</a>, <a href="/tag/alladdin/" rel="tag">alladdin</a>

</div>


            <div class="entry">
                
                    <p>Когда я читал восточные сказки в детстве, то, обращал внимание на сюжет. Кто
кого убил и обманул, чью жену украл. Перечитывая сейчас, замечаю многое из того,
что не видно ребенку, но понятно взрослому.</p>

<p>Наиболее интересное наблюдение — это психотип древних людей. Они в буквальном
смысле большие дети. Население Персии пребывает в трех состояниях: радость,
гнев, страх. Переход от одной стадии к другой случается мнговенно как у
психически больных.</p>

<p>Вот персонаж поел и выпил, ему хорошо. В следующую минуту ему возразил слуга;
теперь он кричит и требует отрубить голову. Появляется визирь, он впадает в
страх и плачет. Все это — за считанные минуты.</p>

<p>Герои никогда не говорят спокойно. Малейшее несогласие или возражение — и они
кричат, плачут, словом, что угодно, лишь бы не спокойно обсудить решение.</p>

<p>Еще одно наблюдение — герою не зазорно делать подлости. Может быть, вы забыли,
чем кончается оригинальная сказка про Аладдина, но я напомню. Он пробирается в
замок врага, который похитил принцессу. Они с принцессой договариваются: та
соблазнит злодея и усыпит сонным порошком, а Алладдин убъет. Так и выходит:
Аладдин стоит за шторой, и когда злодей падает сонный, спокойно рубит ему
голову.</p>

<p>Это отличается от европейского канона, согласно которому герой вступает в бой
открыто. И не только открыто, но и на равных: без лазеров и пулеметов, один на
один на кулаках. Представьте кассовый фильм, где герой убивает врага ножом в
спину и едет домой. Зрители будут недовольны.</p>

<p>Чтобы два раза не вставать: в оригинале Аладдина зовут Ала Ад’Дин. Такое вот
сложное имя, которое упростили для иностранного читателя.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/hacked/">Сайт взломали</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-11-08T00:00:00+00:00">
        Nov 8, 2023
    </time>

    <a href="/tag/jekyll/" rel="tag">jekyll</a>, <a href="/tag/web/" rel="tag">web</a>, <a href="/tag/security/" rel="tag">security</a>

</div>


            <div class="entry">
                
                    <p>Это провокационный заголовок: на самом деле мой сайт не взломали. Просто я часто
слышу, как взломали чей-нибудь сайт и выложили крамолу. Хочу высказаться на этот
счет.</p>

<p>Чтобы сайты не взламывали, их устойчивость должна быть заложена в
архитектуру. Чем больше в ней уровней, тем больше уязвимостей на сайте. Возмите
блог на Вордпрессе: это Линукс, Апач, PHP, MySQL и JavaScript. Вместе они ведут
себя как клубок змей. У каждой технологии свои примочки, уязвимости (известные и
пока еще нет), конфиги и настройки. Вероятность, что все они настроены
правильно, редко бывает стопроцентной.</p>

<p>Наверное, вы думаете, что хакеры — это гении в очках и плащах, как в
Матрице. Они знают машкоды, решают крипто-хеши на бумажке и все такое. Это не
так. Современные хакеры — это мальчики, которые в лучшем случае знают Питон или
баш, чтобы написать цикл. Их работа сводится к тому, чтобы натравить на сайт
опасный скрипт. Если известно, что сайт сделан на CMS версии X, и она устарела
хотя бы на год, то не сомневайтесь — сайт работает лишь потому, что еще не
привлек внимания.</p>

<p>Я пишу это к тому, что безопасность сайта обеспечивается его статичностью. Есть
набор md-файлов, и есть скрипт, который собирает статичный сайт. Это папка с
index.html и подпапками, где разложены статьи. Такой сайт можно хостить хоть в
S3, хоть на домашнем роутере. Сломать его можно одним способом — украсть
SSH-ключ или AWS-креды, что к самому сайту не имеет отношения.</p>

<p>Удивляет, что хотя большинство сайтов могли бы быть статичными, из все равно
делают на вордпрессах и джангах. Они падают, жрут ресурсы, сосут деньги из
бюджета. При этом на сайте почти нет интерактивности: в лучшем случае форма
обратной связи, которая отправляет заявку во внутренний документооборот.</p>

<p>Казалось бы: если прям так нужна интерактивность, сделай статичный сайт, а для
формы прикрути лямбду или иной бекенд для приема заявок. Даже если бекенд
упадет, сайт продолжит работу. Но нет, все равно сайты делают на скриптовых
языках.</p>

<p>Много лет назад мой блог <a href="/new-blog/">работал на Эгее</a> Ильи Бирмана. Это
класическая связка Apache + PHP + Mysql. Сколько же я натерпелся с ним! Хостер
без конца менял настройки PHP, и на главной были машинные ворнинги. Как можно
жить, опасаясь, что на главной какая-то дичь, а бекап базы не сделался?</p>

<p>После переезда на Jekyll вздохнул спокойно. Статичный сайт после генерации не
может испортиться. Он будет такой же и завтра, и через десять лет. Хостить его
можно где угодно, даже без Апача и PHP.</p>

<p>Хорошо, а как обновлять на сайте информацию, например, тарифы или адреса
отделений? Очень просто: каждую ночь из системы выгружается JSON или CSV с
тарифами. В исходниках сайта делают шаблон, который пробегает по строкам и
красиво их рендерит. На выходе чистый HTML, все довольны. Билд можно запустить
принудительно, если горит.</p>

<p>Словом, чтобы ваши сайты не ломали, по-возможности делайте их статичными. Даже
если сайт подразумевает личный кабинет и другую интерактивность, будет правильно
отделить котлеты от мух, то есть статичные страницы от динамичных. И сделать
первое на условном Jekyll или схожем движке.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/gosuslugi-mail/">Письма от Госуслуг</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-11-08T00:00:00+00:00">
        Nov 8, 2023
    </time>

    <a href="/tag/gosuslugi/" rel="tag">gosuslugi</a>, <a href="/tag/mail/" rel="tag">mail</a>

</div>


            <div class="entry">
                
                    <p>У Госуслуг все печально с письмами:</p>

<p><img src="/assets/static/aws/gosuslugi-mail/1.jpeg" /></p>

<p>После “здравствуйте” должен быть восклицательный знак. В конце предложений —
точка. Я видел много безграмотных писем — без запятых и с опечатками, — но чтобы
забывать точки, это в первый раз.</p>

<p>Кроме того, если мне звонят мошенники, я еще не стал их жертвой. А то выходит, я
становлюсь жертвой каждый второй день. Термина “жертва” вообще лучше избегать в
переписке. Никто не хочет быть жертвой, а Госуслуги уже признали тебя ей заочно.</p>

<p>Копирайтера, который составил этот текст, — на мыло.</p>

<p><strong>UPD</strong>: читатели сообщили, что <a href="https://habr.com/ru/companies/rtlabs/articles/768838/">все так и задумано</a>. Вот жесть.</p>


                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page9" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 10 из 77</span>
        
        <a href="/page11" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
