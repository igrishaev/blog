<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Let's encrypt</title>
  <meta name="description" content="">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/en/letsencrypt/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">

    <h1 class="post-title" itemprop="name headline">Let's encrypt</h1>

    
<div class="post-meta">

    <time class="post-time"
          datetime="2017-06-29T00:00:00+00:00">
        Jun 29, 2017
    </time>

    <a href="/tag/ssl/" rel="tag">ssl</a>, <a href="/tag/letsencrypt/" rel="tag">letsencrypt</a>, <a href="/tag/security/" rel="tag">security</a>

</div>


  </header>

  <div class="post-content" itemprop="articleBody">
    
<p>I’ve just tried <a href="https://letsencrypt.org/">Let’s encrypt</a> service and may say it works like a
charm! I am really impressed by it’s simplicity and robustness. It really works
as it’s promised within several lines in shell. That’s how a good software
should be made.</p>

<p>Let’s encrypt is an <a href="https://en.wikipedia.org/wiki/Certificate_authority">SSL authority service</a> that issues short-term SSL
certificates for you. A typical certificate expires in 90 days and then you
request for a new one.</p>

<p>What’s the point to use exactly Let’s encrypt? There are some other SSL
providers who also offer free certificates, just google for “free SSL cert”. The
main reason is Let’s encrypt is totally automated. You don’t even need to open
their site. The whole setup might be done in bash session in 5 minutes.</p>

<p>Here is a quick example of setting up a SSL certificate on outdated Ubuntu 12.04
LTS:</p>

<ol>
  <li>
    <p>Download <code class="language-plaintext highlighter-rouge">certbot</code> script. <a href="https://certbot.eff.org/">Certbot</a> is an open source software to
communicate with Let’s encrypt service via secure ACME protocol:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wget https://dl.eff.org/certbot-auto
<span class="nb">chmod </span>a+x certbot-auto
</code></pre></div>    </div>
  </li>
  <li>
    <p>Backup your Nginx config by copying your <code class="language-plaintext highlighter-rouge">*.conf</code> files from
<code class="language-plaintext highlighter-rouge">/etc/nginx/conf.d/</code> somewhere. Then run:</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo</span> /path/to/certbot-auto <span class="nt">--nginx</span>
</code></pre></div>    </div>

    <p>This command will ask you several questions. In most cases, the default
choice would be enough. It scans your current Nginx config and makes required
changes. Finally, you will be prompted for submitting your email. Please
enter an existing one since it requires confirmation. In a minute, check your
inbox and follow the secret link to submit your account.</p>
  </li>
  <li>
    <p>Reload Nginx service with something like</p>

    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>service nginx restart
</code></pre></div>    </div>

    <p>Open your site in Chrome, go to Developer console, “Security” tab, “View
certificate” below the green label:</p>

    <p><img src="/assets/static/ssl-green.png" alt="SSL green label" /></p>

    <p>First, all the labels should be green but not red or orange. Second, “Let’s
encrypt” authority should be noticed in the certificate’s details:</p>

    <p><img src="/assets/static/ssl-issued.png" alt="SSL issued by" /></p>
  </li>
  <li>
    <p>You have gone through the main steps so far, although it would be great to
setup automatic update for your certificate. Add the following into <code class="language-plaintext highlighter-rouge">crontab</code>
config:</p>

    <pre><code class="language-crontab">0 */12 * * * /path/to/certbot-auto renew --no-self-upgrade
</code></pre>

    <p>This job tries to update the certificate twice a day as the official guide
recommends.</p>
  </li>
</ol>

<p>To find out more, please examine the <a href="https://certbot.eff.org/docs/">Certbot documentation</a>. It has nice
setup wizard with step-by-step algorithms for all the operation systems. You may
also automate Let’s encrypt not with bash script but within your favorite
language. See the <a href="https://letsencrypt.org/docs/client-options/">“Client options”</a> page to observe existing
libraries.</p>

<p>Finally, I urge you to enable SSL for your project right now if you haven’t done
this yet. Nowadays, there cannot be an excuse for sending your client’s data
as-is without encryption. Please respect your visitors. Setting up SSL has never
been so easy as it is with Let’s encrypt nowadays.</p>

  </div>

</article>

<center>
    <p>
        <small>Нашли ошибку? Выделите мышкой и нажмите Ctrl/&#8984;+Enter</small>
    </p>
</center>






<center>Комментариев пока нет</center>









<form id="comment-form" method="POST" action="https://functions.yandexcloud.net/d4ehfuf08fjfjr59ivnf">

    <div class="block">
        <p class="comment-form-label"><small>Your name</small></p>
        <input required id="comment-form-author" name="author" type="text">
    </div>

    <div class="block">
        <p class="comment-form-label"><small>Comment (markdown syntax)</small></p>
        <textarea required id="comment-form-comment" name="comment"></textarea>
    </div>

    <input required name="path" type="hidden" value="/en/letsencrypt/">
    <input required name="captcha" type="hidden" value="7 &#215; 5">

    <div class="block">
        <span class="comment-form-label"><small>7 &#215; 5 = </small></span>
        <input required id="comment-form-solution" name="solution" type="text">
    </div>

    <div class="block">
        <button id="comment-form-send" type="submit">Send</button>
    </div>

</form>


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
