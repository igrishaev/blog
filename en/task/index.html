<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Practical task</title>
  <meta name="description" content="I’m looking for a new job these days. I have had a set of interviews so far. Onetime, I faced an interesting practical task. In this post, I want to discuss ...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/en/task/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">

    <h1 class="post-title" itemprop="name headline">Practical task</h1>

    
<div class="post-meta">

    <time class="post-time"
          datetime="2016-09-18T00:00:00+00:00">
        Sep 18, 2016
    </time>

    <a href="/tag/interview/" rel="tag">interview</a>, <a href="/tag/python/" rel="tag">python</a>, <a href="/tag/fp/" rel="tag">fp</a>, <a href="/tag/english/" rel="tag">english</a>

</div>


  </header>

  <div class="post-content" itemprop="articleBody">
    <p>I’m looking for a new job these days. I have had a set of interviews so far. One
time, I faced an interesting practical task. In this post, I want to discuss a
way how I’ve solved it.</p>

<p>The original text took two pages of A4 because of lots of unuseful details. Let
me retell the task by memory.</p>

<blockquote>
  <p>Imagine you have a surface of Mars divided by cells. A robot moves on it. The
robot knows its position represented by (x, y) coordinates and orientation
(North, East, South, West, or just N, E, S, W). You may pass a command to the
robot. A possible command might be to turn left (L), to turn right (R) and to
move forward (F). When the robot rotates, it just changes its orientation
without moving across the cell. When it moves forward, it changes the
coordinates but keeps the orientation.</p>
</blockquote>

<blockquote>
  <p>A robot will be lost when goes out of the surface. But before it has been
lost, it marks the last cell it stands as “dangerous”. When another robot
steps on a dangerous cell, it cannot be lost. Instead, it ignores all the
commands that lead to being lost.</p>
</blockquote>

<blockquote>
  <p>So you have a surfacers dimensions and a bunch of robots. For each robot, you
know its initial position, orientation and a list of commands. Write a program
that moves the robots in series. For each robot, print its final position and
orientation. Also, if the robot has been lost, add “LOST” to that line.</p>
</blockquote>

<blockquote>
  <p>Input sample (don’t pay attention at the comments):</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5 3             # world's width and height
1 1 E           # x, y and orientation of the first robot
RFRFRFRF        # and its list of commands

3 2 N           # the second robot pos and orientation
FRRFLLFFRRFLL   # and its list of commands

0 3 W           # the third one
LLFFFLFLFL      # ...
                # etc...
</code></pre></div></div>

<blockquote>
  <p>Expected output:</p>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 1 E
3 3 N LOST
2 3 S
</code></pre></div></div>

<p>I know what are you thinking about. Let’s have a class <code class="language-plaintext highlighter-rouge">World</code> and a class
<code class="language-plaintext highlighter-rouge">Robot</code>. Than I’ll make an instance of class <code class="language-plaintext highlighter-rouge">Game</code> and will move the robots
across the world. But this way seems a bit weird to me because we start with the
entities but not the process.</p>

<p>All these entities do not say how to organize them. We have a common “Paper and
Pen” problem. How should I connect my entities: <code class="language-plaintext highlighter-rouge">Pen.writeOn(Paper)</code> or
<code class="language-plaintext highlighter-rouge">Paper.writeWith(Pen)</code>? Which OOP pattern says directly what are the best
practices? SOLID, Composition or whatever? Should I store an array of robots
inside a <code class="language-plaintext highlighter-rouge">World</code> instance or just keep a reference to the world in each robot?
What if a robot has been lost? Should I null that reference?</p>

<p>See, we’ve got lots of questions, but none of them move us to the solution.</p>

<p>Moreover, once you have solved the task using classical OOP, it would be
difficult to port you code to such FP languages as Clojure or Haskell, because
they do not have classes, just types. Even a Javascript programmer may face some
problems because JS has its own OOP system that differs from Python/Java.</p>

<p>So let me provide a simple solution that do not use classes and tend to be
functional. I will do it using Python, not Clojure to make it clean to everyone.</p>

<p>One famous programmer said: when somebody asks me on an error in their code, I
always respond the following. Imagine your program is a black box. What data
does it receive?  What data does it return? Once you know the answers, it
becomes easy to find a mistake in logic.</p>

<p>I’d like to follow this way. Let’s abstract from the entities and OOP
patterns. We read parameters from the input, process them and print on a
screen. So here is a scheme:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>read_params() --&gt; play_game() --&gt; print_results()
</code></pre></div></div>

<p>Note that reading and writing functions do IO, so they are not pure. Instead,
<code class="language-plaintext highlighter-rouge">play_game</code> accepts plain data structures and has no side effects. That makes it
easy to test in both REPL and unit tests.</p>

<p>When we have basic knowledge of the task, it’s time to write some code. The
following skeleton shows my decision as well:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">parse_input</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
    <span class="p">...</span>


<span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">params</span><span class="p">):</span>
    <span class="p">...</span>


<span class="k">def</span> <span class="nf">compose_results</span><span class="p">(</span><span class="n">results</span><span class="p">):</span>
    <span class="p">...</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">params</span> <span class="o">=</span> <span class="n">parse_input</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">stdin</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">play</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
    <span class="k">print</span> <span class="n">compose_results</span><span class="p">(</span><span class="n">results</span><span class="p">)</span>


<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>

</code></pre></div></div>

<p>On the next step we need to clarify what data exactly we expect inside <code class="language-plaintext highlighter-rouge">play</code>
function. There should be world’s limits for each dimension first. And we also
need robots’ data.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">routes</span><span class="p">):</span>
</code></pre></div></div>

<p>Because parsing input stream is boring, let’s just return a sample data from
<code class="language-plaintext highlighter-rouge">parse_input</code> for now:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="k">def</span> <span class="nf">parse_input</span><span class="p">(</span><span class="n">source</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="p">(</span>
        <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s">"N"</span><span class="p">,</span> <span class="s">"LLLL"</span><span class="p">),</span>
    <span class="p">))</span>
</code></pre></div></div>

<p>Now let’s look closer to the <code class="language-plaintext highlighter-rouge">play</code> function. It’ a black box for now, but we
could imagine what is behind it. I believe, it should build the world at
first. Then, we iterate on robots to process them in series. That is an outer
cycle.</p>

<p>For each robot, we evaluate a bunch of commands: rotate left/right or
move. That’s an inner cycle.</p>

<p>For each robot, we collect its final state with a special flag that indicates
whether a robot has been lost.</p>

<p>Looks simple, let’s code that logic:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">play</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">routes</span><span class="p">):</span>
    <span class="n">world</span> <span class="o">=</span> <span class="n">make_world</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="p">()</span>

    <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">,</span> <span class="n">steps</span><span class="p">)</span> <span class="ow">in</span> <span class="n">routes</span><span class="p">:</span>
        <span class="n">robot</span> <span class="o">=</span> <span class="n">make_robot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">step</span> <span class="ow">in</span> <span class="n">steps</span><span class="p">:</span>
            <span class="n">ok</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot</span> <span class="o">=</span> <span class="n">update</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">ok</span><span class="p">:</span>
                <span class="k">break</span>
        <span class="n">results</span> <span class="o">+=</span> <span class="p">((</span><span class="n">ok</span><span class="p">,</span> <span class="n">robot</span><span class="p">),</span> <span class="p">)</span>

    <span class="k">return</span> <span class="n">results</span>

</code></pre></div></div>

<p>Now we have some undefined functions that we must populate before launch the
code. What we should know about the world? Only width, height and what cells are
marked as dangerous. So let the world will be a tuple something like <code class="language-plaintext highlighter-rouge">(20, 30,
((2, 3), (15, 34)))</code>.</p>

<p>The following function returns a new world ready to play:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">make_world</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="p">()</span>
</code></pre></div></div>

<p>Next, what data represent a robot on every turn? Both x and y coordinates plus
orientation. In Python, let it be just a tuple like <code class="language-plaintext highlighter-rouge">(1, 5, "N")</code> or <code class="language-plaintext highlighter-rouge">(10, 5,
"S")</code> for example.</p>

<p>The function below is to create a new robot:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">make_robot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span><span class="p">)</span>
</code></pre></div></div>

<p>Our <code class="language-plaintext highlighter-rouge">update</code> function takes the world, the robot and a command to evaluate. It
returns a tuple of three values. The first one is a boolean flag that indicates
whether the robot is still on the surface. You see, if we get <code class="language-plaintext highlighter-rouge">False</code>, that will
mean the robot has gone away from the world and there is no reason to continue
evaluation for that robot.</p>

<p>The second and the third values are the new world and robot. The thing is I
return new values instead of changing the previous ones. Avoiding state gives us
more freedom in data manipulation. I’ll cover more on that a bit later.</p>

<p>Moving on to the <code class="language-plaintext highlighter-rouge">update</code> function. First, we need to distinguish the command
whether it is to rotate or to move a robot. The case of rotate is really easy to
handle:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>

    <span class="k">if</span> <span class="n">step</span> <span class="ow">in</span> <span class="s">"LR"</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">rotate_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">)</span>

    <span class="c1"># to be continued
</span></code></pre></div></div>

<p>The code above clearly shows we can rotate a robot without any limits. Notice I
return a new rotated robot instead of changing the one I have in my
function. The rotate function is simple:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">rotate_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">step</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="n">rules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="p">(</span><span class="s">"N"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"W"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"N"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"E"</span><span class="p">,</span>

        <span class="p">(</span><span class="s">"E"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"N"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"E"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"S"</span><span class="p">,</span>

        <span class="p">(</span><span class="s">"S"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"E"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"S"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"W"</span><span class="p">,</span>

        <span class="p">(</span><span class="s">"W"</span><span class="p">,</span> <span class="s">"L"</span><span class="p">):</span> <span class="s">"S"</span><span class="p">,</span>
        <span class="p">(</span><span class="s">"W"</span><span class="p">,</span> <span class="s">"R"</span><span class="p">):</span> <span class="s">"N"</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">new_ori</span> <span class="o">=</span> <span class="n">rules</span><span class="p">[(</span><span class="n">ori</span><span class="p">,</span> <span class="n">step</span><span class="p">)]</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">new_ori</span>
</code></pre></div></div>

<p>Important thing is having a dict of rules is much better then a bunch of nested
<code class="language-plaintext highlighter-rouge">if</code>s. It’s possible to add new rotate rules at any times as well.</p>

<p>The movement forward command is a little bit trickier because of complicated
logic. First of all, we need to know whether the robots stands on a dangerous
cell. Wee also need to check whether the next turn will move the robot out from
the surface.</p>

<p>Remember, if it’s a dangerous cell at the moment, the bad movement is just
ignored. If it isn’t, move the robot. And if it has lost, mark that cell as
dangerous. I’ve finished with the following code:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># continues the `update` function
</span>
    <span class="k">if</span> <span class="n">step</span> <span class="o">==</span> <span class="s">"F"</span><span class="p">:</span>

        <span class="n">robot_next</span> <span class="o">=</span> <span class="n">move_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
        <span class="n">placed_next</span> <span class="o">=</span> <span class="n">is_placed</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot_next</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">is_scent</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">placed_next</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot_next</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">placed_next</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">world</span><span class="p">,</span> <span class="n">robot_next</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="bp">False</span><span class="p">,</span> <span class="n">set_scent</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">),</span> <span class="n">robot</span>
</code></pre></div></div>

<p>A tree of nested ifs looks ugly to me and may be reduced. But it’s not so
important at the moment. The key feature of the code above is kept in a line:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">robot_next</span> <span class="o">=</span> <span class="n">move_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">)</span>
</code></pre></div></div>

<p>Remember, I spoke about immutable data structures. Instead of moving the robot,
we’ve got a new one that stands on the next cell. You see? Dealing with
immutable data gives us <strong>opportunity to have objects in the future</strong>. When I
have a future state of a robot, I can easy check whether its state fits to the
requirements. And if it does not, just return an old copy of a robot.</p>

<p>Now imagine I had a mutable object with <code class="language-plaintext highlighter-rouge">x</code> and <code class="language-plaintext highlighter-rouge">y</code> fields. To check that robot,
I would move it forward, e.g. change its state, than check the conditions and
rollback the state if they failed. Should I say that way is weird and tends to a
buggy code?</p>

<p>Here is a code for the missing functions. To move a robot:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">move_robot</span><span class="p">(</span><span class="n">robot</span><span class="p">):</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">ori</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="n">rules</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s">"N"</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="s">"W"</span><span class="p">:</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="s">"S"</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
        <span class="s">"E"</span><span class="p">:</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
    <span class="p">}</span>

    <span class="n">dx</span><span class="p">,</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">rules</span><span class="p">[</span><span class="n">ori</span><span class="p">]</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="n">x</span> <span class="o">+</span> <span class="n">dx</span><span class="p">,</span>
        <span class="n">y</span> <span class="o">+</span> <span class="n">dy</span><span class="p">,</span>
        <span class="n">ori</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>To check if a robot is on the surface:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_placed</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">):</span>
    <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">world</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="k">return</span> <span class="p">(</span>
        <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="n">w</span>
        <span class="ow">and</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">y</span> <span class="o">&lt;=</span> <span class="n">h</span>
    <span class="p">)</span>
</code></pre></div></div>

<p>And to check whether a robot stands on the dangerous cell:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">is_scent</span><span class="p">(</span><span class="n">world</span><span class="p">,</span> <span class="n">robot</span><span class="p">):</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">scents</span> <span class="o">=</span> <span class="n">world</span>
    <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">robot</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span> <span class="ow">in</span> <span class="n">scents</span>
</code></pre></div></div>

<p>So we’ve done with the solution. What wee are missing for now are parsing input
data and formatting the game result functions. I’m not sure they are so
important to place them here. Check the Git repo if you are interested.</p>

<p>Let’s check the data sample given in the task. Say we have sample.txt file with
the input:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5 3
1 1 E
RFRFRFRF

3 2 N
FRRFLLFFRRFLL

0 3 W
LLFFFLFLFL
</code></pre></div></div>

<p>We perform:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat sample.txt | python mars.py
1 1 E
3 3 N LOST
2 3 S
</code></pre></div></div>

<p>Just as the expected results provided in the task.</p>

<p>To sum up, I’ll list the key points that I’ve got from that task.</p>

<ol>
  <li>
    <p>Try to think on the program like a black box, that accepts some data and
produces the result. Your mission is to uncover that black box.</p>
  </li>
  <li>
    <p>Use plain data structures like hash-tables, lists or tuples rather than
classes and objects. Just because it keeps you from all that OOP complexity.</p>
  </li>
  <li>
    <p>Keep data immutable while it is possible rather then modify them.</p>
  </li>
  <li>
    <p>Don’t be afraid of implementing you logic with undefined functions. Or
functions that return hard-coded result. You may correct them later.</p>
  </li>
  <li>
    <p>Separate functions that don’t have side effects from those that have. They
become really easier to test.</p>
  </li>
</ol>

<p>Find the whole code on <a href="https://github.com/igrishaev/mars-task">Github</a>. And by the way, it’s my first post
written in English. I hope you enjoyed that reading.</p>

<p>Thanks!</p>


    
<div class="prev-next">

    <div class="prev-next-left">
    
        <p><small><a href="/chrome/">&larr; Хром</a></small></p>
    
    </div>

    <div class="prev-next-mid">
    </div>

    <div class="prev-next-right">
    
        <p><small><a href="/phrases/">С вами. Говорит. Робот. &rarr;</a></small></p>
    
    </div>

</div>

  </div>

</article>

<center>
    <p>
        <small>Нашли ошибку? Выделите мышкой и нажмите Ctrl/&#8984;+Enter</small>
    </p>
</center>






<center>Комментарии</center>

<div id="comments">
  
    <div id="comment-2907958248" class="comment-block">
      <p class="comment-lead">
        <small>
          <em>
            Andrey,
            21st Sep 2016,
            <a href="#comment-2907958248">link</a>
            
          </em>
        </small>
      </p>
      <div><p>Nice article, Ivan. Thanks! Could you please tell about how do you improve your English skill? It would be interesting to find out about your experience.</p>
</div>
    </div>
  
    <div id="comment-2907976752" class="comment-block">
      <p class="comment-lead">
        <small>
          <em>
            Ivan Grishaev,
            21st Sep 2016,
            <a href="#comment-2907976752">link</a>
            , <a href="#comment-2907958248">parent</a>
          </em>
        </small>
      </p>
      <div><p>Andrey, I've been attending English classes for two years in Dataart. I also started listening to VOA Learning English lessons on Youtube. One time a week I have a 30-minutes class with a friend. He is a professional English teacher.</p>
</div>
    </div>
  
</div>









<form id="comment-form" method="POST" action="https://functions.yandexcloud.net/d4ehfuf08fjfjr59ivnf">

    <div class="block">
        <p class="comment-form-label"><small>Your name</small></p>
        <input required id="comment-form-author" name="author" type="text">
    </div>

    <div class="block">
        <p class="comment-form-label"><small>Comment (markdown syntax)</small></p>
        <textarea required id="comment-form-comment" name="comment"></textarea>
    </div>

    <input required name="path" type="hidden" value="/en/task/">
    <input required name="captcha" type="hidden" value="1 &#215; 7">

    <div class="block">
        <span class="comment-form-label"><small>1 &#215; 7 = </small></span>
        <input required id="comment-form-solution" name="solution" type="text">
    </div>

    <div class="block">
        <button id="comment-form-send" type="submit">Send</button>
    </div>

</form>


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="https://t.me/igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
