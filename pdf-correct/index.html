<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Корректура в PDF</title>
  <meta name="description" content="Если кто не знает, откуда столько ненависти к PDF, сейчас объясню.">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/pdf-correct/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">

    <h1 class="post-title" itemprop="name headline">Корректура в PDF</h1>

    
<div class="post-meta">

    <time class="post-time"
          datetime="2023-06-10T00:00:00+00:00">
        Jun 10, 2023
    </time>

    <a href="/tag/book/" rel="tag">book</a>, <a href="/tag/pdf/" rel="tag">pdf</a>

</div>


  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Если кто не знает, откуда столько ненависти к PDF, сейчас объясню.</p>

<p>У PDF одно назначение — просмотр и печать документов. Это конечный артефакт,
который получают при компиляции проекта — будь то Индизайн, Латех, что
угодно. Править PDF после его получения — это то же самое, что править байтики в
exe-файле, вместо того, чтобы поправить код.</p>

<p>Один раз <a href="/preview/">я даже писал</a> про возможности Preview по работе с PDF, но все это уловки
для бедных, когда нет исходника.</p>

<p>Тезис о том, что с PDF нельзя работать как с документом, подтверждает следующий
опыт: <strong>середина 2023 года, тридцать лет с момента появления PDF — и не найти
программы, которая бы работала с ним без ошибок</strong>.</p>

<p>Если конкретно, то я готовлю вторую книгу к печати. Заказал корректуру, говорю:
готов распечатать и прислать любой службой за мой счет. Нет, берем только
PDF. Ладно, выслал, получил обратно с комментариями.</p>

<p>Теперь самое интересное. Внос правок сводится к шагам: перешел к очередному
комментарию, поправил исходник, удалил коммент. Что же пошло не так? А вот что.</p>

<p>Preview на Mac M1 не может удалить некоторые комментарии. Те, что с типом
Highlight — да, а Note — нет. Специально проверил, старый Preview на Интеле
может, но поведение неочевидно. В целом работа с аннотациями в Preview глючная:
коммент может висеть еще долго после удаления. Иногда фокус смещается
произвольно и удаляется не тот коммент.</p>

<p>Не все это можно передать в картинках, но например: слева у комментария есть
опция удаления, а справа у Note — нет.</p>

<p><img src="/assets/static/aws/pdf/1.jpeg" /></p>

<p>Для демонстрации других косяков нужно записывать гифки, к чему я не готов.</p>

<p>Вы скажете — браузер. Не вопрос, открыл в Хроме, а там такое:</p>

<p><img src="/assets/static/aws/pdf/2.jpeg" /></p>

<p>Плюс комменты нельзя удалять, read-only.</p>

<p>Может, Акробат наше все? Ну, уже сам факт, что установка требует sudo, внушает опасения. Ладно, поставил. Документ не открывается перетаскиванием в программу — только File -&gt; Open, только хардкор. Удаление комментов работает, но если скопировать текст из PDF, получим такое:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Âòîðàÿ ãëàâà ïîñâÿùåíà ðåëÿöèîííûì áàçàì äàííûõ,
</code></pre></div></div>

<p>Словом, кто вносил корректуру, тот в цирке не смеется.</p>

<p>Повторю тезис из начала заметки: любая работа с PDF — это боль по
определению. Он специально сделан так, чтобы правки были максимально
затруднены. Бинарный формат, девять редакций, адское легаси. Любая программа,
которая предлагает редактирование PDF — это н…балово. Оно работает только в
примитивных случаях, а как что-то серьезней — сплошная беда.</p>

<p>Поэтому, кстати, я считаю, что корректор, который не работает с бумагой — это
слабый корректор. Хороший как минимум не должен ее избегать.</p>

<p><strong>UPD</strong></p>

<p>Продолжение заметки. Добрые люди подсказали два варианта: PDF Expert и Master
PDF Editor. Первая не обслуживает пользователей из России, но ставится из
brew. Оказалось, она не работает без облачной учетной записи. Попап закрывает
интерфейс, хоть усрись, но создай учетку. Скриншот не сохранил, прогу удалил.
Поставил Master PDF Editor, на первый взгляд все отлично. Посидел два часа,
вносил корректуру. Сохранил файл и перекинул на другой комп. Открываю, а там:</p>

<p><img src="/assets/static/aws/pdf/3.jpeg" /></p>

<p>Знаете, это уже не смешно. Похоже, на вопрос из прошлой заметки — есть ли в
природе программа, которая работает с PDF без ошибок — ответ все-таки
отрицательный.</p>

<p>Эту работу я как-нибудь доделаю, но она стоила много нервов. <em>Очень, очень много
нервов.</em></p>

  </div>

</article>

<center>
    <p>
        <small>Нашли ошибку? Выделите мышкой и нажмите Ctrl/&#8984;+Enter</small>
    </p>
</center>






<center>Комментарии</center>

<div id="comments">
  
    <div id="comment-1686413897717" class="comment-block">
      <p class="comment-lead">
        <small>
          <em>
            Евгений,
            10th Jun 2023,
            <a href="#comment-1686413897717">link</a>
            
          </em>
        </small>
      </p>
      <div><p>Набрал коммент, ошибся в капче, коммент улетает в небытие. Это стоит починить. Еще бы поле, для получения ответов и подписки на комменты.</p>

<p>Еще раз наберу коммент. По мелочи правлю в Акробате, все ок. Связанные абзацы, с переносами - да, не работают, но акробат и не Индиз. Поправить номер заказа, дату, одно слово - не проблема. Даже картинки можно подставлять.</p>

<p>А вот кракозямбы - это проблема со шрифтом. Можете поэксперементировать.</p>
</div>
    </div>
  
    <div id="comment-1686419032549" class="comment-block">
      <p class="comment-lead">
        <small>
          <em>
            Ivan Grishaev,
            10th Jun 2023,
            <a href="#comment-1686419032549">link</a>
            
          </em>
        </small>
      </p>
      <div><blockquote>
  <p>А вот кракозямбы - это проблема со шрифтом.</p>
</blockquote>

<p>Шрифт, может быть, не самый лучший, но в одной программе коирование работает, а в другой нет. Кроме того, шрифт – это же просто представление текста, который хранится в байтиках.</p>

</div>
    </div>
  
</div>









<form id="comment-form" method="POST" action="https://functions.yandexcloud.net/d4ehfuf08fjfjr59ivnf">

    <div class="block">
        <p class="comment-form-label"><small>Your name</small></p>
        <input required id="comment-form-author" name="author" type="text">
    </div>

    <div class="block">
        <p class="comment-form-label"><small>Comment (markdown syntax)</small></p>
        <textarea required id="comment-form-comment" name="comment"></textarea>
    </div>

    <input required name="path" type="hidden" value="/pdf-correct/">
    <input required name="captcha" type="hidden" value="8 &#215; 8">

    <div class="block">
        <span class="comment-form-label"><small>8 &#215; 8 = </small></span>
        <input required id="comment-form-solution" name="solution" type="text">
    </div>

    <div class="block">
        <button id="comment-form-send" type="submit">Send</button>
    </div>

</form>


      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
