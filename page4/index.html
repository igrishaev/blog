<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page4/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img src="/assets/static/photo-round-small.png" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/no-update/">Обновления</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-01-04T00:00:00+00:00">
        Jan 4, 2023
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Современный софт огорчает просьбами обновиться. С какой-то поры этой заразы стало так много, что не знаешь, куда деваться. Открыл Siblime Text, а он предлагает обновиться:</p>

<p><img src="/assets/static/aws/update/1.jpeg" /></p>

<p>Открыл Dash, программу офлайн-документации, а она предлагает обновиться:</p>

<p><img src="/assets/static/aws/update/3.jpeg" /></p>

<p>Открыл Wireshark для просмотра трафика, а она предлагает обновиться:</p>

<p><img src="/assets/static/aws/update/6.jpeg" /></p>

<p>Firefox в конец обнаглел: теперь обновления нельзя отключить. Ставить обязательно: либо с подтверждением, либо без него. Справа постоянно висит нотификация.</p>

<p><img src="/assets/static/aws/update/2.jpeg" /></p>

<p>Туда же скатился Телеграм: появляется блямба “обновить”, которая молозит глаза. Конечно, никто не принуждает, дело добровольное. Просто попробуй посиди с ней — долго не протянешь.</p>

<p><img src="/assets/static/aws/update/5.jpeg" /></p>

<p>Все это приводит к тому, что, запуская программу, я уже не жду, что она работает с первой секунды. Обязательно выскочит диалог с предложением обновиться или прокликать новые разделы меню. Это какое-то свинство: сел работать, а в лицо несут пургу.</p>

<p>Почему-то ни один диалог не отвечает на вопрос: какая польза мне в обновлении. Программа работает, покрывает все нужды, жалоб нет. С какой стати тратить время на обновление? Если найдется баг, я выберу “О программе” → “Проверить обновления” и тогда обновлюсь.</p>

<p>Причина в том, что разработчики забывают об этике. Некрасиво, когда программа делает то, о чем ее не просили. Это понимали еще пятьдесят лет назад во времена Unix. А сегодня понятия цифровой этики не существует. Так быть не должно.</p>

<p>Вспомнился частный случай с Гуглом — организации, которую трудно заподозрить в желании сделать кому-то удобно. Когда браузер Хром вошел в фазу взрывного роста, он обновлялся даже не каждый день, а несколько раз в день. В результате обновления сделали полностью скрытыми от пользователя. Это потребовало усилий, но они того стоили. Уж если корпорация решила за меня, что и как обновлять, то и спрашивать согласия не нужно. Иначе зачем?</p>

<p>Ужасно, но подход с обновлением переходит в консольные утилиты, например pip и npm. Когда работал с Питоном, жутко бесило сообщение pip: воу-воу, у тебя версия, 2.5.1, а последняя — 2.5.3, поставь немедленно! Перед каждой командой pip ломился в сеть с GET-запросом, ожидая ответа. Это такая тупость, что даже руки опускаются. Ясное дело, что обновления отключаются какими-то переменными среды, которые вечно гуглишь на StackOverflow.</p>

<p>В свое время я ставил программы для работы с текстом, например <a href="https://getoptima.ru/">Optima</a>. Минимальный интерфейс, интеграция с Главредом, красиво. Но уже на второй день он распахнул диалог с предложением обновиться. У меня в таких случаях одна мысль — пошел на х..й. Грубовато, но это первое, что приходит в голову. Вздумал прервать меня за работой? Отправляйся в ведро: “приложения” → Optima → “удалить”.</p>

<p>Идеально в этом плане ведет себя Emacs. Каждый раз я ставлю его с опозданием на две-три мажорных версии, а он хоть бы слово сказал. Поставил 25.1, хотя доступен 28.2 — значит, так надо: версия 25.1 просто работает. Сложно что ли сделать так в других программах?</p>

<p>Бесконечное стремление вперед просто вымораживает. Если бы от него был толк! Сколько я вижу бажного кода, написанного в последних версиях JetBrains! Сколько уродской верстки, сделанной в свежем In Design! Сколько вырвиглазного текста, набранного в последнем Ворде!</p>

<p>Обновившись по самые помидоры, программист по-прежнему не пишет тесты к своему коду. Подставляет параметры в SQL функцией format. Посылает тысячу запросов к базе в цикле. Что, IDE не подсвечивает? Подожди обновлений — может, со следующим релизом подсветит.</p>

<p>В общем, разработчики: успокойтесь с обновлениями. Вашими усилиями почти не осталось софта, который работает молча. Дайте уже спокойно поработать.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/post-2022/">Как я провел 2022 год</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-01-02T00:00:00+00:00">
        Jan 2, 2023
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    
<p>Появилось время написать что-нибудь в блог. Ниже — коротко о том, чем занимался раньше и что делаю сейчас.</p>

<p>После увольнения из Exoscale я устроился стартап Clashapp (ныне <a href="https://huddlesapp.co/">Huddles</a>). Это мобильное приложение с короткими видео и встроенной валютой. Вместе с коллегами пилили бекенд на Кложе. В техническом плане проект был очень продвинут, многие вещи взял на заметку. Тимлидом у нас был <a href="https://www.linkedin.com/in/eric-dvorsak-58336837/">Eric Dvorsak</a>, и работать с ним было одно удовольствие.</p>

<p>К сожалению, стратап не потянул финансовую часть. К концу года руководство сообщило, что “не будет возражать, если сотрудники найдут другую работу”. Первый раз в жизни услышал такую формулировку.</p>

<p>Должен признать, что с поиском удаленной работы из России сейчас беда. Все требуют релокации, иностранные счета особо не помогают. К счастью, нашлись добрые люди, которые помогли устроиться в автралийский стартап.</p>

<p>Работа в Австралии отличается графиком. Разница с офисом семь часов, пересекаюсь с руководителем буквально один час в день. Это первый случай в моей практике, когда разница столь велика. Есть и плюсы, и минусы. С одной стороны, приучает работать автономно, задавать вопросы, проверять задачи на точность. Полезно иметь пул задач, чтобы в случае затыка с одной переключиться на другую.</p>

<p>С другой стороны, пересечение всего лишь час в день — неописуемое благо. Отбрехался с утра — и свободен: никаких ретро, синков, тренингов, медитаций, эстимейтов, постмортемов и что там еще. Никто не потревожит, никто не вломится в зум. Все асинхронно, красота!</p>

<p>Однако сломался привычный режим работы. Дело в том, что уже несколько лет я провожу дни одинаково: когда прихожу на работу, сперва трачу час на книгу, блог или библиотеки. Затем перекус и тупняк в интернет. Затем утренний созвон и работа на оставшийся день. Если я потратил час на себя, на остальное мне уже плевать: упал прод или нет, закрыли спринт или нет. Самое главное уже случилось, а остальное рутина. И когда этого часа не было, начинаю злиться.</p>

<p>Так вот, из-за разницы во времени с Автралией каждое утро теперь начинается со звонка. Час на личные дела либо уходит во вторую половину дня, либо выпадает. Пытаюсь перестроить режим так, чтобы этого не было.</p>

<p>Последние месяцы мало пишу в блог, потому что занимаюсь второй книгой. Много времени потратил на редактирование глав. Перед праздниками создал <a href="https://github.com/igrishaev/clj-book2">репозиторий</a>, желающие могут посмотреть. Книга уже собирается в Докере, то есть прошла стадию глубокого черновика.</p>

<p>Немало нервов мне стоил один европейский банк (да, на Кложе). Прошел собеседование без проблем, а дальше мне отказали из-за нежелания украинских и польских членов команды работать со мной. По прошествии полугода подался туда снова, и на этот раз сначала да, потом нет. Потом опять были торги и условия, связанные с релокацией и политической обстановкой. Насколько я понял, можно было покривить душой и пролезть, но после раздумий я отказался. Размышляя над всем этим, представил себя осликом, которого манят морковкой в нужном кому-то направлении. Нет, работа никуда не убежит, я сам решу, когда придет время.</p>

<p>Все это, конечно, чепуха по сравнению с тем, что выпало на долю украинских коллег. С некоторыми я поддерживаю связь и знаю о происходящем из первых уст. Увольнения и трудности с поиском работы не сравнятся с услышанным.</p>

<p>Помогаю выпускнице, с которой делали диплом, найти работу Питон-джуниором. Ох непросто стало сейчас.</p>

<p>В планах на 2023 год — выпустить книжку.</p>

<p>Поздравляю всех с наступившим Новым годом. Желаю больше стойкости к стрессу и информационному шуму. Меньше пропускать через себя, чтобы не сойти с ума. Оставаться людьми. Это, пожалуй, самое важное.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/en/clojure-guide/">Clojure Coding Guide</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-12-03T00:00:00+00:00">
        Dec 3, 2022
    </time>

    <a href="/tag/clojure/" rel="tag">clojure</a>, <a href="/tag/code/" rel="tag">code</a>

</div>


            <div class="entry">
                
                    
<p><em>TL;DR: this is a detailed description of how to write good Clojure code. It’s based on my 8 years of experience with Clojure for both commercial purposes and side projects as well. Some parts of this document repeat the <a href="https://github.com/bbatsov/clojure-style-guide">well-known guide</a> by Bojidar. Other parts instead break the conventional rules in Clojure development. For such cases, I give an explanation of why they are what they are. Everything written below has come from practice, and I hope you’ll find it useful.</em></p>

<h2>

    Table of Contents

</h2>

<ul id="toc-item-clojure-guide">
  <li><a href="#parentheses" id="toc-item-clojure-guide-parentheses">Parentheses</a></li>
  <li><a href="#namespaces" id="toc-item-clojure-guide-namespaces">Namespaces</a></li>
  <li><a href="#variables-and-defs" id="toc-item-clojure-guide-variables-and-defs">Variables and defs</a></li>
  <li><a href="#atoms" id="toc-item-clojure-guide-atoms">Atoms</a></li>
  <li><a href="#exceptions" id="toc-item-clojure-guide-exceptions">Exceptions</a></li>
  <li><a href="#assertions" id="toc-item-clojure-guide-assertions">Assertions</a></li>
  <li><a href="#functions" id="toc-item-clojure-guide-functions">Functions</a></li>
  <li><a href="#arguments" id="toc-item-clojure-guide-arguments">Arguments</a></li>
  <li><a href="#destructuring" id="toc-item-clojure-guide-destructuring">Destructuring</a></li>
  <li><a href="#keywords" id="toc-item-clojure-guide-keywords">Keywords</a></li>
  <li><a href="#keyword-processing" id="toc-item-clojure-guide-keyword-processing">Keyword processing</a></li>
  <li><a href="#type-hints" id="toc-item-clojure-guide-type-hints">Type hints</a></li>
  <li><a href="#naming" id="toc-item-clojure-guide-naming">Naming</a></li>
  <li><a href="#lines-and-indentation" id="toc-item-clojure-guide-lines-and-indentation">Lines and indentation</a></li>
  <li><a href="#maps" id="toc-item-clojure-guide-maps">Maps</a></li>
  <li><a href="#let" id="toc-item-clojure-guide-let">Let</a></li>
  <li><a href="#case-cond" id="toc-item-clojure-guide-case-cond">Case, cond</a></li>
  <li><a href="#macros-indentation" id="toc-item-clojure-guide-macros-indentation">Macros indentation</a></li>
  <li><a href="#java-interop" id="toc-item-clojure-guide-java-interop">Java interop</a></li>
  <li><a href="#java-like-classes" id="toc-item-clojure-guide-java-like-classes">Java-like classes</a></li>
  <li><a href="#reuse-java-classes" id="toc-item-clojure-guide-reuse-java-classes">Reuse Java classes</a></li>
  <li><a href="#systems-and-components" id="toc-item-clojure-guide-systems-and-components">Systems and Components</a></li>
  <li><a href="#collections" id="toc-item-clojure-guide-collections">Collections</a></li>
  <li><a href="#clojurespec" id="toc-item-clojure-guide-clojurespec">Clojure.spec</a></li>
  <li><a href="#types--records" id="toc-item-clojure-guide-types--records">Types &amp; Records</a></li>
  <li><a href="#named-sections" id="toc-item-clojure-guide-named-sections">Named sections</a></li>
  <li><a href="#comments" id="toc-item-clojure-guide-comments">Comments</a></li>
  <li><a href="#trailing-spaces" id="toc-item-clojure-guide-trailing-spaces">Trailing spaces</a></li>
  <li><a href="#commented-code-and-dev-sections" id="toc-item-clojure-guide-commented-code-and-dev-sections">Commented code and dev sections</a></li>
  <li><a href="#tests" id="toc-item-clojure-guide-tests">Tests</a></li>
  <li><a href="#coreasync" id="toc-item-clojure-guide-coreasync">Core.async</a></li>
  <li><a href="#amazonica" id="toc-item-clojure-guide-amazonica">Amazonica</a></li>
  <li><a href="#libraries" id="toc-item-clojure-guide-libraries">Libraries</a></li>
</ul>

<h2 id="parentheses">Parentheses</h2>

<p>Let’s start with something obvious yet worthy of repeating. When writing Lisp code, don’t balance parentheses as you did before in Python or JavaScript. Not like this:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">time</span><span class="w">
 </span><span class="p">(</span><span class="nb">doseq</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w">
   </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">a</span><span class="p">)]</span><span class="w">
     </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w">
     </span><span class="p">)</span><span class="w">
   </span><span class="p">)</span><span class="w">
 </span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>But this:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">time</span><span class="w">
 </span><span class="p">(</span><span class="nb">doseq</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w">
   </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">a</span><span class="p">)]</span><span class="w">
     </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">b</span><span class="p">))))</span><span class="w">
</span></code></pre></div></div>

<p>The same rule applies to collections. The following code fragments look weird in Clojure:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="no">:name</span><span class="w"> </span><span class="s">"Ivan"</span><span class="w">
   </span><span class="no">:email</span><span class="w"> </span><span class="s">"test@test.com"</span><span class="w">
</span><span class="p">})</span><span class="w">

</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="mi">1</span><span class="n">,</span><span class="w">
  </span><span class="mi">2</span><span class="n">,</span><span class="w">
  </span><span class="mi">3</span><span class="w">
</span><span class="p">])</span><span class="w">
</span></code></pre></div></div>

<p>It is a strong rule for every Lisp dialect and you’ve got to get on with it. The sooner you get an editor powered with a plugin to manage parenthesis the better it is for you as a programmer. Emacs + Paredit is a good choice but it’s a matter of preference.</p>


                    <p><a href="/en/clojure-guide/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/whos-guilty/">Кто виноват</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-11-25T00:00:00+00:00">
        Nov 25, 2022
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Наверное, вы слышали: чтобы получить правильный ответ, задавайте правильный вопрос. И наоборот: неправильный вопрос займет массу времени и сил, но ответа не даст. Удивительно, что многие вопросы, что мы задаем, поставлены неверно. Один из них звучит как в заголовке — кто виноват?</p>

<p>Стоит чуть-чуть подумать, как станет ясно, что это неправильный вопрос. Так ли важно, кто именно виноват? Что это дает? Как виновность поможет исправить ситуацию и предотвратить ошибку в будущем?</p>

<p>Если взять историю любой катастрофы — Титаник, Чернобыль — везде окажется, что виноваты не люди на местах. Это очень желанно руководству, особенно если исполнитель умер. Непрофессиональные операторы взорвали реактор. Беспечная команда нашла на айсберг, и делу конец.</p>

<p>Да что катастрофы, вспомним истории с падением прода. Всегда оказывается, что программист Вася запустил опасный скрипт с кредами от прода, которых у него быть не должно. Креды дал ему под честное слово админ во время попойки в баре. Креды выдаются по заявке, нужно собрать пять подписей, но гендиректору некогда, его зам на больничном и так далее.</p>

<p>Когда сотрудник Гитлаба удалил базу с прода, выяснилось много вещей. Бекапы не работали, оповещения об ошибке бекапов тоже не работали. Пока петух не клюнул, никто не волновался.</p>

<p>Какой-то чел из системы очистки воды оставил штат без питья на неделю. Оказалось, он подключался из дома к рабочей машине по TeamViewer, чтобы не ездить по ночам. Десять раз писал начальству с просьбой сделать доступ по впн, но просьбы даже не рассмотрели.</p>

<p>Представим теперь, что условного Васю взяли за шкирку и объявили: ты виноват. Кому от этого легче? Даже если Васю уволят, ситуация повторится в будущем.</p>

<p>Верный признак, что вопрос вины неверно поставлен — он дает большой выхлоп. Вася виноват, но… и дальше экраны текста, что на самом деле чего-то там. Так быть не должно.</p>

<p>Вместо “кто виноват” нужно спрашивать “кто несет ответственность”. Это все меняет: оказывается, вина и ответственность — разные вещи, которые делятся между людьми. Виноват один, отвечает другой. Как они разрулят между собой — не наше дело.</p>

<p>Вася уронил прод и он виноват. Но отвечает техдиректор, потому что у Васи в принципе не должно быть доступа к проду.</p>

<p>Оператор взорвал реактор и он виноват. Отвечают те, кто проектировал, вводил в эксплуатацию и тестировал.</p>

<p>Капитан навел корабль на айсберг и он виноват. За нехватку шлюпок, за неумение команды спасти пассажиров отвечает перевозчик.</p>

<p>Пьяный устроил дебош в клубе. Он виноват, но отвечает охрана, которая его пропустила.</p>

<p>Сотрудник слил базу клиентов. Он виноват, но отвечает фирма — юрлицо. Будьте любезны штраф в десять тысяч за каждую строку. Сливы сразу прекратятся.</p>

<p>Водитель в Воронеже сбил насмерть коляску с грудным ребенком. Оказалось, у него десятки неоплаченных штрафов за последние полгода. Он виноват. Но пусть начальник ГИБДД объяснит, почему водителю не аннулировали права.</p>

<p>Правило: когда случилось что-то из ряда вон, ищите ответственного, а не виновного. Когда найден первый, второй появится автоматически. Но не наоборот: чаще имеем виновного Васю, с которого нечего взять, а ответственных нет.</p>

<p>Бывает, что ответственный известен, но сыскать с него ничего нельзя. Это значит, игра заведомо проиграна. В следующий раз не ведитесь.</p>

<p>Сказанное имеет прямое отношение к сегодняшней ситуации. В России часто ищут виновных и находят их в лице американских президентов, англосаксов, оппозиции, инагентов и бог знает кого еще. Каждый раз, когда это слышу, в голове вопрос: ладно, пусть виноваты англосаксы, но кто несет ответственность? Если никто, что толку мне знать?</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/geointernet/">Интернет и геополитика</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-11-03T00:00:00+00:00">
        Nov 3, 2022
    </time>

    <a href="/tag/web/" rel="tag">web</a>

</div>


            <div class="entry">
                
                    <p>На заре интернета было забавное по текущим временам мнение. Якобы он станет средой, которая объединит людей, отбросив границы и политические взгляды. Что противоречия физического мира отпадут, и все найдут согласие. Что коллективный разум возобладает над политиками и превзойдет их.</p>

<p>Забавно видеть, что все из этого не только не сбылось, но и наоборот — интернет все больше становится геополитизированным. Увы, в нашу жизнь пришла геополитика — смесь двух терминов, каждый из которых тащит худшее прошлого века: политику и территории. Что из этого вышло, мы наблюдаем сегодня.</p>

<p>Современный интернет геополитизирован, потому что регулируется двумя принципами: политикой и географией. Крупные сервисы блокируют людей по их положению на планете. Страны блокируют сервисы по политическим причинам. Большая часть запрещенного контента — это то, что запрещено режимом, причем не только в России.</p>

<p>Тезис о едином пространстве разваливается на глазах. Все меньше остается сервисов, куда можно попасть, не испытывая ограничений. Твиттер(1) и Инстаграм(2) заблокированы Россией. На Госуслуги и Налог.ру нельзя зайти, если ты не в России. Если уехал, ставь московский ВПН, что до недавнего времени звучало анекдотом.</p>

<p>Порнхаб в одной стране разрешен, в другой запрещен, в третьей — только с авторизацией через местную соцсеть. Grammarly не работает с российскими IP, нужен ВПН. Украинские сайты показывают россиянам плашку с расчлененкой.</p>

<p>Надоели сайты, защищенные Cloudflare. При каждом заходе видишь уродский экран с задержкой в 5-10 секунд. Иногда Cloudflare требует капчу с гидрантами и велосипедами. Двадцать минут — и сессия рвется, проверка начинается снова.</p>

<p>Гугл и Ютуб боятся ВПН как огня. С ним Ютуб показывает капчу — не дай бог ты пройдешь мимо Большого Брата. Фейсбук, Твиттер и аналоги блокируют Тор. Им лучше знать, что безопасно, а что нет.</p>

<p>Про Китай писать нет смысла.</p>

<p>Сервисы все больше ведут себя как государства. Пользователь, чей IP вызывает малейшее подозрение, приравнивается к нелегалу, незаконно переходящему границу. Его надо схватить и подвергнуть деанону.</p>

<p>Фейсбук и Твиттер открыто занимают позиции в социальных конфликтах США: выборы, BLM и так далее. Получить бан за поддержку Трампа теперь в порядке вещей. Не лучше ситуация и у нас, когда ВК и Мейл.ру сливают данные о тех, кто состоит в группах “оппозиции”.</p>

<p>В той или иной мере огораживается каждый второй сайт. Со включенным ВПН нельзя передать показания в энергослужбу или заказать б/у книгу. Знакомый справедливо заметил, что сегодня проще иметь два ноута — настроенный под иностранный сайты и для внутренних нужд.</p>

<p>Выделять какую-то страну в том плане, что они блокирую больше, чем остальные, нет смысла — это тренд. Интернет — это общение и информация, и государство всегда болезненно реагирует, когда то или другое выходит из под контроля. И неважно, какой политический строй: демократия, автократия или тоталитаризм. Благородный предлог найдется всегда: терроризм, антиваксы, тридевятая колонна. В каждой стране свои пугалки про черную руку и простыню.</p>

<p>Очевидно, никакого свободного интернета нет, более того — не интернет двигает обществом, а двигают им. Современная дурь оседает в интернете и приводит к ограничениям по IP, странам, действиям режима и остальному.</p>

<p>Получится ли сделать что-нибудь другое? Возможно, но это будет принципиально иной вид связи. Он должен быть максимально простым для пользователя и невозможным для блокировок. Примерно как блокчейн, хоть я и не люблю аналогии с криптой. К сожалению, лично мне этот новый вид связи трудно представить хотя бы приблизительно.</p>

<p><em>1, 2 – считаются экстремистскими организациями или вроде того.</em></p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/mobile-deg/">Мобильная деградация</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-10-31T00:00:00+00:00">
        Oct 31, 2022
    </time>

    <a href="/tag/web/" rel="tag">web</a>, <a href="/tag/ui/" rel="tag">ui</a>, <a href="/tag/github/" rel="tag">github</a>

</div>


            <div class="entry">
                
                    <p>Последнее время я делю экран пополам: слева браузер, справа Емакс. Такой сетап нужен для определенной работы, связанной с редактированием текста.</p>

<p>Заметил, что с браузером происходят странные вещи. Стоит только поджать окно на жалкие пиксели, включается мобильный режим. Лучше всего это наблюдать на Гитхабе. Нормальный режим:</p>

<p><img src="/assets/static/aws/mobdeg/1.jpg" /></p>

<p>Но стоит уменьшить окно на пиксель, как вдруг:</p>

<p><img src="/assets/static/aws/mobdeg/2.jpg" /></p>

<p>Кто-нибудь в курсе, зачем это? Код — самое главное на этой странице — пропал под выпадашку, хотя места достаточно. Появилась адская разреженность, кнопки сплющились, как будто по ним проехали катком. Кто вообще просил? Остается выругаться и расширить окно обратно.</p>

<p>Досадно от того, что кто-то сидел над этой хитрожопой версткой, трекал часы в Джире, презентовал менеджерам. А пользователь мечтает развидеть и вернуть все взад.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/autocomplete/">Автодополнение</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-10-31T00:00:00+00:00">
        Oct 31, 2022
    </time>

    <a href="/tag/chrome/" rel="tag">chrome</a>, <a href="/tag/autocomplete/" rel="tag">autocomplete</a>, <a href="/tag/web/" rel="tag">web</a>

</div>


            <div class="entry">
                
                    <p>В хромо-подобных браузерах есть полезная функция — сохранение форм. Дико выручает, когда в сотый раз вводишь имя, фамилию и почту на сайте. Буквально сегодня я заполнял форму на сайте налоговой шестнадцать(!) раз. Если бы не автокомплит, я бы, наверное, стер пальцы. Тем более умники-разработчики повы..бывались с некоторыми полями, и в них не работает вставка. Какой-то скрипт блокирует событие, я начал было смотреть в консоли, но в итоге плюнул на это.</p>

<p>Удивляет, однако, то, что автокомплит нельзя редактировать. В очередной раз я вставил не то значение, и оно осталось в выпадашке навсегда. Теперь каждый раз, выбирая из нее пункт, надо быть осторожнее, чтобы не тыкнуть не туда.</p>

<p><img src="/assets/static/aws/autocomplete/1.png" /></p>

<p>Не понимаю, почему автокомплит нельзя редактировать? Хватило бы удаления: напротив каждого элемента сделать крестик, который удаляет его из выпадашки. Просто и дешево.</p>

<p>Между прочим, такая функция есть в Телеграме. Предположим, вы искали сообщество LaTeX, а нашли латекс и доминирование:</p>

<p><img src="/assets/static/aws/autocomplete/2.png" /></p>

<p>Если тыкнуть в любой канал <em>(ну, просто так)</em>, он останется в истории поиска. Будет неприятно, если это всплывет на созвоне при шаринге экрана. Крестик справа удаляет элемент из истории поиска, и с ним я спокоен: никакого доминирования мой собеседник не увидит.</p>

<p><img src="/assets/static/aws/autocomplete/3.png" /></p>

<p>В общем смысле это ведет к правилу: собираешь данные — позволь клиенту их удалить. Удаление стоит усилий, порой огромных (привет GDPR), но тогда незачем и начинать.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/win-win/">Win-win</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-10-27T00:00:00+00:00">
        Oct 27, 2022
    </time>

    <a href="/tag/win-win/" rel="tag">win-win</a>, <a href="/tag/%D0%BF%D0%B5%D1%80%D0%B5%D0%B3%D0%BE%D0%B2%D0%BE%D1%80%D1%8B/" rel="tag">переговоры</a>

</div>


            <div class="entry">
                
                    
<p>Читаю книгу Егора <a href="https://www.piter.com/product/nash-kod-remeslo-professiya-iskusstvo">“Наш код”</a>. Хорошая книга, местами спорная, но ничего — просто держите в голове, что это Егор. Есть, однако, момент, мимо которого я не мог пройти молча — это эпизод с переговорами между двумя группами.</p>

<p>Я хотел привести оригинальный текст, однако электронной версии, откуда можно скопировать и вставить, в интернете нет. Поэтому расскажу завязку своими словами.</p>

<p>Есть группа разработчиков, которые пилят REST API, и есть группа потребителей. Понадобилась доработка сервиса, и потребители выдвигают условие: чтобы новые данные можно было забрать одним запросом. Разработчикам сервиса это неудобно: они сделали несколько новых методов, полагая, что потребители пошлют несколько запросов. Группы не сошлись во мнении, и начинается совещание.</p>


                    <p><a href="/win-win/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/preview/">Программа Preview</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-10-07T00:00:00+00:00">
        Oct 7, 2022
    </time>

    <a href="/tag/ui/" rel="tag">ui</a>, <a href="/tag/preview/" rel="tag">preview</a>, <a href="/tag/mac/" rel="tag">mac</a>, <a href="/tag/software/" rel="tag">software</a>

</div>


            <div class="entry">
                
                    <p>Если я когда-нибудь пересяду с Мака на что-либо другое, больше всего мне будет не хватать… программы Preview. Да, встроенной программы просмотра изображений. Все потому, что Preview — невероятно мощный софт. Просмотр картинок и PDF лишь малая часть ее возможностей. Ниже я расскажу, что именно она умеет.</p>

<p>(1) Банально, но все-таки — Preview открывает картинки и PDF. Не нужно ставить сторонний софт, который пропишет себя в автозагрузку и службы. С тяжелым сердцем вспоминаю Adobe Reader, который разросся до размера офисного пакета.</p>

<p>Поставив Windows 10 на игровой комп, был удивлен, что в ней нечем открыть PDF (браузер Edge не в счет). По клику на PDF открывается магазин Microsoft – как это возможно в 2022 году, не понимаю. А на Маке сел — и читаешь PDF.</p>


                    <p><a href="/preview/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/lndir/">Коротко об lndir</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-10-07T00:00:00+00:00">
        Oct 7, 2022
    </time>

    <a href="/tag/lndir/" rel="tag">lndir</a>, <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/symlink/" rel="tag">symlink</a>, <a href="/tag/make/" rel="tag">make</a>

</div>


            <div class="entry">
                
                    <p>Небольшая заметка о утилите, которая требуется редко, но метко – <code class="language-plaintext highlighter-rouge">lndir</code>.</p>

<p>Когда у меня стало больше одного Мака, появилась проблема синхронизации настроек. Другими словами, чтобы всякие <code class="language-plaintext highlighter-rouge">.thisrc</code> и <code class="language-plaintext highlighter-rouge">.thatrc</code> были одинаковы и подхватывались при изменении. Сюда входит конфиг Emacs, ssh, словари aspell, профили AWS, конфиги ctags, zshell и многое другое.</p>

<p>Легче всего держать dot-файлы в репозитории и ставить симлинки. Неожиданно я столкнулся с тем, что не так легко написать shell-скрипт, который бы поставил симлинки на файлы из папки. Пытался при помощи <code class="language-plaintext highlighter-rouge">find ... -execute</code> и <code class="language-plaintext highlighter-rouge">xargs</code>, но постоянно что-то мешало. То отсутствие файла, то его существование, словом, всякие досадные случаи. В итоге было две команды: сначала одна удаляет симлинки, а вторая создает их заново.</p>

<p>Оказалось, что <code class="language-plaintext highlighter-rouge">lndir</code> делает именно то, что я искал. Они принимает две папки и строит дерево симлинков из первой во вторую. При этом учитывает случаи, что я перечислил, например если симлинк уже есть. Благодаря этому дерево можно обновлять итеративно.</p>

<p>Пример: в каталоге <code class="language-plaintext highlighter-rouge">~/work/System/Dotfiles</code> хранятся оригинальные файлы Emacs, <code class="language-plaintext highlighter-rouge">.ssh</code> и прочие. Следующая команда make расставит симлинки в домашнюю папку:</p>

<div class="language-make highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">HOME</span> <span class="o">=</span> /Users/ivan
<span class="nv">PWD</span> <span class="o">=</span> <span class="nf">$(</span><span class="nb">shell</span> <span class="nb">pwd</span><span class="nf">)</span>

<span class="nl">create-symlinks</span><span class="o">:</span>
	lndir <span class="nv">${PWD}</span>/Dotfiles <span class="nv">${HOME}</span>
	<span class="nb">chmod </span>600 <span class="nv">${HOME}</span>/.ssh/<span class="k">*</span>
</code></pre></div></div>

<p>Для файлов ssh необходимо выставить права 600, иначе утилита ругается.</p>

<p>Синхронизация происходит обычным способом через git. Как только вы поменяли один из файлов, делаете коммит и пуш. На другой машине пулл и <code class="language-plaintext highlighter-rouge">make create-symlinks</code>, и все подхватывается. Репозиторий, понятно, должен быть приватным.</p>

<p>По умолчанию <code class="language-plaintext highlighter-rouge">lndir</code> нет в поставке Линукса и Мака. Ставится из привычных <code class="language-plaintext highlighter-rouge">apt</code> и <code class="language-plaintext highlighter-rouge">brew</code>.</p>

                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page3" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 4 из 62</span>
        
        <a href="/page5" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
