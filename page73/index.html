<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page73/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/meetup8/">Восьмая встреча</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-08-04T00:00:00+00:00">
        Aug 4, 2016
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/meetup/" rel="tag">meetup</a>, <a href="/tag/deep-refactoring/" rel="tag">deep-refactoring</a>

</div>


            <div class="entry">
                
                    <p>Провели восьмую встречу!</p>

<p>Я рассказал про монады. Читали Булгакова? “Оно, может, умно, да непонятно. Над
вами потешаться будут.” Потешались надо мной где-то час:</p>

<iframe width="100%" height="500" src="https://www.youtube.com/embed/5-yjqPQH_fU" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>

<p><a href="http://grishaev.me/talks/monads.html">Слайды</a></p>

<p>Денис Ковалев рассказал про криптографию. Очень хороший доклад получился:</p>

<iframe width="100%" height="500" src="https://www.youtube.com/embed/grD13PMeGXA" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen="">
</iframe>

<p><a href="http://www.slideshare.net/DenisKovalev2/ss-64503995">Слайды</a></p>

<p>Напомню, сообщество тусит в <a href="https://www.facebook.com/groups/deeprefactoring/">группе Фейсбука</a>.</p>

<p>Скоро анонс девятой встречи. Хотите выступить? Пишите в группу.</p>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/docker/">Докер</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-08-03T00:00:00+00:00">
        Aug 3, 2016
    </time>

    <a href="/tag/docker/" rel="tag">docker</a>

</div>


            <div class="entry">
                
                    <p>Последний месяц меня дико прет с Докера. Это настоящий прорыв в индустрии. Я
подключаю Докер ко всем репозиториям. Решил поделиться впечатлениями, описать
плюсы и рассмотреть реальный пример.</p>

<p>Про Докер написано очень много. Я не собираюсь досканально описывать как он
работает. Расскажу лишь кратко о том, что вы, возможно, не слышали.</p>

<p><a href="https://www.docker.com/">Докер</a> – утилита для запуска процесса в изолированном
окружении. Технически это работает поверх одной из фич ядра Линукса –
<a href="https://ru.wikipedia.org/wiki/Cgroups">Cgroups</a>.</p>

<p>Преимущество Докера в том, что стирается грань между отдельными машинами. Если
вы собрали образ на Линуксе, то он заведется на Маке. При этом понадобится
только Докер. Никаких либ или пакетов выкачивать не нужно.</p>

<p>Этот плюс я уже испытал на практике. Мне пришел из ремонта Мак. За время работы
на Линуксе я успел перевести большую часть репозиториев на Докер. На Маке все
завелось без проблем.</p>

<p>Докер идеален, когда нужно передать правильно настроенное приложение
заказчику. Вы делаете образ, заказчик запускает контейнер. Достаточно лишь,
чтобы у вас и у заказчика были близкие версии Докера.</p>

<p>Разработка с Докером напоминает идею виртуальной машины с байткодом. Как Джава
– однажды скомпилированное работает везде, был бы только рантайм. Преимущество
в том, что теперь речь идет не только о коде, а об утилитах, библиотеках,
словом, окружении в целом. Стало возможным сделать Линукс-среду
кросплатформенной!</p>

<p>Докер содержит систему в чистоте. Работая нативно, мы ставим сотни и тысячи
пакетов, которые оседают в системе как ил. Они занимают место на диске, что
особо важно для небольших SSD. Пакеты вызывают коллизии – три версии Руби, два
Питона, разные Ноды.</p>

<p>В случае с Докером все файлы ложатся в образ – единый файл. Удалив его, мы
достоверно вернем систему в то состояние, в котором она была до билда.</p>

<p>Начав работать на свежей системе, я поставил только Гит и Емакс. База, Редис,
различные Питоны, Кложа с Джавой крутятся в Докере. Система ничего о них не
знает.</p>

<p>Бытует ошибочное мнение, что Докер – средство вируализации. Это не так. Докер
не создает виртуальную машину как это делают Виртуал-Бокс и аналоги. Он
запускает процесс через Cgroups с ограничениями в ресурсах и файловой системе.</p>

<p>На Маке и Винде Докер эмулируется через виртуалку. Вы запускаете терминал
Докера, а на самом деле проваливаетесь в Виртуал-Бокс, где работает нативный
Докер. Но на Маке он тоже скоро будет нативный, уже есть бета-версия.</p>

<p>По этой причине я смеюсь над Микрософтом, которые добавили <code class="language-plaintext highlighter-rouge">ps</code> и <code class="language-plaintext highlighter-rouge">grep</code> в 10
Виноуз. Кому это нужно? В сети тысячи версий юникс-утилит, скомпилированных под
Винду. Скорей делайте нативный Докер!</p>

<p>Докер может стать принципиально иным способом распространения приложений. Вместо
того, чтобы собирать бинарник, мы будем делать образ. По клику мышкой Докер
будет запускать из него образ, как обычное приложение.</p>

<p>Докер – это отсутствие состояния. Контейнер может удалить все файлы внутри
себя, нагадить в конфиги и аварийно завершиться. Но стоит запустить контейнер из
образа, и мы вновь в прежнем состоянии: файлы, конфиги на месте. Иммутабельность
– это круто.</p>

<p>Докер отлично подходит для билдов всего и вся. Собрать проект, который требует
миллион пакетов и библиотек – милое дело.</p>

<p>Докер – это еще и пакетный менеджер. В экосистеме докера выделяют образы и
контейнеры. Образ – декларативное описание того, каким будет будущий
контейнер. Контейнер – результат запуска из образа. Выражаясь языком ООП, образ
это класс, а контейнер – экземпляр.</p>

<p>Существует <a href="https://hub.docker.com/">официальный хаб</a> образов. Оттуда можно скачать образ ЛЮБОЙ
версии Питона, Руби, Постгреса и т.д. Помните, какой это геморрой – на систему
с Питоном 2.7 ставить 3.4? Или проверить баг на старой версии БД? Теперь c этим
покончено.</p>

<p>Хранить приватные образы в хабе Докера разрешено за деньги. Альтернативой может
стать официальный сервис Амазона <a href="https://aws.amazon.com/ru/ecr/">ECR</a>, где все операции над образами
бесплатны.</p>

<p>Докер можно использовать и в продакшене для запуска приложений. На работе мы
подключили Докер к Дженкинсу для билдов и прогона тестов. Позже мы выкатили
приложение на Питоне в Амазон. Оно было разбито на 4 образа. Каждый образ
представлял собой микросервис и мог быть заменен независимо от других.</p>

<p>Теперь рассмотрим реальный пример применения Докера.</p>

<p>Бложик, что вы сейчас читаете, работает на движке <a href="/jekyll">Jekyll</a>. Это утилита
на Руби, которая собирает из маркдаун-файлов статический сайт на голом
HTML. <code class="language-plaintext highlighter-rouge">Jekyll</code> нативно поддерживается Гитхабом – стоит сделать комит, и твой
сайт сам обновляется.</p>

<p>Однако, прожде чем комитить, хочется посмотреть вживую, как выглядит пост. Для
этого я ставлю движок и запускаю локальный сервер. При этом <code class="language-plaintext highlighter-rouge">Jekyll</code> тянет за
собой вагон зависимых пакетов и просит dev-библиотеки для компиляции сишных
либ. Тут нам и поможет Докер.</p>

<p>Установка Докера подробно описана на <a href="https://docs.docker.com/engine/installation/">официальном сайте</a> под каждую
операционку в отдельности.</p>

<p>В корне проекта создаем файлик <code class="language-plaintext highlighter-rouge">Dockerfile</code> с содержимым:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>FROM ubuntu:16.04

RUN apt-get update
RUN apt-get install -y jekyll bundler

RUN mkdir /blog
WORKDIR /blog
COPY Gemfile* ./
RUN bundle install
RUN rm Gemfile*

CMD ["jekyll", "serve"]
</code></pre></div></div>

<p>Разберемся построчно:</p>

<ul>
  <li>Образ унаследован от официального образа Убунты версии 16.04.</li>
  <li>При создании образа обновить информацию о пакетах.</li>
  <li>Установить из пакетов <code class="language-plaintext highlighter-rouge">jekyll</code> (движок) и <code class="language-plaintext highlighter-rouge">bundler</code> (установщик пакетов для
Руби).</li>
  <li>Создать внутри образа папку <code class="language-plaintext highlighter-rouge">blog</code> в корне.</li>
  <li>Перейти в нее.</li>
  <li>Скопировать из хост-системы в образ файлы <code class="language-plaintext highlighter-rouge">Gemfile</code> и <code class="language-plaintext highlighter-rouge">Gemfile.lock</code>. Это
аналог питонячьего <code class="language-plaintext highlighter-rouge">pip.requirements.txt</code>.</li>
  <li>Поставить пакеты, специфичные для проекта.</li>
  <li>Удалить Gem-файлы.</li>
  <li>При запуске контейнера стартануть локальный сервер.</li>
</ul>

<p>Собираем образ <code class="language-plaintext highlighter-rouge">Make</code>-командой:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-build:
	docker build -t blog .
</code></pre></div></div>

<p>Параметр <code class="language-plaintext highlighter-rouge">-t &lt;foo:bar&gt;</code> задает имя и тег для образа.</p>

<p>Посмотрите, что показывает консоль при сборке:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>The following additional packages will be installed:
  ca-certificates cpp cpp-5 dbus file fontconfig-config fonts-dejavu-core
  fonts-lato ifupdown iproute2 isc-dhcp-client isc-dhcp-common
  javascript-common krb5-locales libasn1-8-heimdal libatm1 libauthen-sasl-perl
  libbsd0 libcap-ng0 libdbus-1-3 libdns-export162 libdrm-amdgpu1 libdrm-intel1
  libdrm-nouveau2 libdrm-radeon1 libdrm2 libedit2 libelf1
  libencode-locale-perl libexpat1 libffi6 libfile-basedir-perl
  libfile-desktopentry-perl libfile-listing-perl libfile-mimeinfo-perl
  libfont-afm-perl libfontconfig1 libfontenc1 libfreetype6 libgdbm3
  libgl1-mesa-dri libgl1-mesa-glx libglapi-mesa libglib2.0-0 libglib2.0-data
  libgmp10 libgnutls30 libgssapi-krb5-2 libgssapi3-heimdal libhcrypto4-heimdal
  libheimbase1-heimdal libheimntlm0-heimdal libhogweed4 libhtml-form-perl
  libhtml-format-perl libhtml-parser-perl libhtml-tagset-perl
  libhtml-tree-perl libhttp-cookies-perl libhttp-daemon-perl libhttp-date-perl
  libhttp-message-perl libhttp-negotiate-perl libhx509-5-heimdal libice6
  libicu55 libidn11 libio-html-perl libio-socket-ssl-perl
  libipc-system-simple-perl libisc-export160 libisl15 libjs-coffeescript
  libjs-jquery libk5crypto3 libkeyutils1 libkrb5-26-heimdal libkrb5-3
  libkrb5support0 libldap-2.4-2 libllvm3.8 liblwp-mediatypes-perl
  liblwp-protocol-https-perl libmagic1 libmailtools-perl libmnl0 libmpc3
  libmpfr4 libmysqlclient20 libnet-dbus-perl libnet-http-perl
  libnet-smtp-ssl-perl libnet-ssleay-perl libnettle6 libp11-kit0 libpciaccess0
  libperl5.22 libpng12-0 libpq5 libpython-stdlib libpython2.7-minimal
  libpython2.7-stdlib libroken18-heimdal libruby2.3 libsasl2-2
  libsasl2-modules libsasl2-modules-db libsm6 libsqlite3-0 libssl1.0.0
  libtasn1-6 libtext-iconv-perl libtie-ixhash-perl libtimedate-perl
  libtxc-dxtn-s2tc0 liburi-perl libuv1 libwind0-heimdal libwww-perl
  libwww-robotrules-perl libx11-6 libx11-data libx11-protocol-perl libx11-xcb1
  libxau6 libxaw7 libxcb-dri2-0 libxcb-dri3-0 libxcb-glx0 libxcb-present0
  libxcb-shape0 libxcb-sync1 libxcb1 libxcomposite1 libxcursor1 libxdamage1
  libxdmcp6 libxext6 libxfixes3 libxft2 libxi6 libxinerama1 libxml-parser-perl
  libxml-twig-perl libxml-xpathengine-perl libxml2 libxmu6 libxmuu1 libxpm4
  libxrandr2 libxrender1 libxshmfence1 libxt6 libxtables11 libxtst6 libxv1
  libxxf86dga1 libxxf86vm1 libyaml-0-2 mime-support mysql-common netbase
  nodejs openssl perl perl-modules-5.22 python python-chardet python-minimal
  python-pkg-resources python-pygments python2.7 python2.7-minimal rake rename
  ruby ruby-afm ruby-ascii85 ruby-blankslate ruby-classifier-reborn
  ruby-coderay ruby-coffee-script ruby-coffee-script-source ruby-colorator
  ruby-did-you-mean ruby-execjs ruby-fast-stemmer ruby-ffi ruby-hashery
  ruby-jekyll-coffeescript ruby-jekyll-feed ruby-jekyll-gist
  ruby-jekyll-paginate ruby-jekyll-sass-converter ruby-jekyll-watch ruby-json
  ruby-kramdown ruby-liquid ruby-listen ruby-mercenary ruby-mime-types
  ruby-minitest ruby-multi-json ruby-mysql ruby-net-telnet ruby-oj
  ruby-parslet ruby-pdf-core ruby-pdf-reader ruby-pg ruby-posix-spawn
  ruby-power-assert ruby-prawn ruby-prawn-table ruby-pygments.rb
  ruby-rb-inotify ruby-rc4 ruby-rdiscount ruby-redcarpet ruby-rouge
  ruby-safe-yaml ruby-sass ruby-sequel ruby-sequel-pg ruby-stringex
  ruby-test-unit ruby-toml ruby-ttfunk ruby-yajl ruby2.3 rubygems-integration
  sgml-base shared-mime-info ucf unzip x11-common x11-utils x11-xserver-utils
  xdg-user-dirs xdg-utils xml-core zip
Suggested packages:
  cpp-doc gcc-5-locales dbus-user-session | dbus-x11 ppp rdnssd iproute2-doc
  resolvconf avahi-autoipd isc-dhcp-client-ddns apparmor apache2 | lighttpd
  | httpd libdigest-hmac-perl libgssapi-perl gnutls-bin krb5-doc krb5-user
  libdata-dump-perl coffeescript libcrypt-ssleay-perl pciutils
  libsasl2-modules-otp libsasl2-modules-ldap libsasl2-modules-sql
  libsasl2-modules-gssapi-mit | libsasl2-modules-gssapi-heimdal
  libauthen-ntlm-perl libunicode-map8-perl libunicode-string-perl
  xml-twig-tools perl-doc libterm-readline-gnu-perl
  | libterm-readline-perl-perl make python-doc python-tk python-setuptools
  ttf-bitstream-vera python2.7-doc binutils binfmt-support ri ruby-dev
  libjs-mathjax ruby-activesupport doc-base coderay fonts-arphic-gkai00mp
  ruby-pdf-inspector ruby-prawn-doc ttf-dejavu-core bundler sgml-base-doc
  mesa-utils nickle cairo-5c xorg-docs-core gvfs-bin debhelper
The following NEW packages will be installed:
  ca-certificates cpp cpp-5 dbus file fontconfig-config fonts-dejavu-core
  fonts-lato ifupdown iproute2 isc-dhcp-client isc-dhcp-common
  javascript-common jekyll krb5-locales libasn1-8-heimdal libatm1
  libauthen-sasl-perl libbsd0 libcap-ng0 libdbus-1-3 libdns-export162
  libdrm-amdgpu1 libdrm-intel1 libdrm-nouveau2 libdrm-radeon1 libdrm2 libedit2
  libelf1 libencode-locale-perl libexpat1 libffi6 libfile-basedir-perl
  libfile-desktopentry-perl libfile-listing-perl libfile-mimeinfo-perl
  libfont-afm-perl libfontconfig1 libfontenc1 libfreetype6 libgdbm3
  libgl1-mesa-dri libgl1-mesa-glx libglapi-mesa libglib2.0-0 libglib2.0-data
  libgmp10 libgnutls30 libgssapi-krb5-2 libgssapi3-heimdal libhcrypto4-heimdal
  libheimbase1-heimdal libheimntlm0-heimdal libhogweed4 libhtml-form-perl
  libhtml-format-perl libhtml-parser-perl libhtml-tagset-perl
  libhtml-tree-perl libhttp-cookies-perl libhttp-daemon-perl libhttp-date-perl
  libhttp-message-perl libhttp-negotiate-perl libhx509-5-heimdal libice6
  libicu55 libidn11 libio-html-perl libio-socket-ssl-perl
  libipc-system-simple-perl libisc-export160 libisl15 libjs-coffeescript
  libjs-jquery libk5crypto3 libkeyutils1 libkrb5-26-heimdal libkrb5-3
  libkrb5support0 libldap-2.4-2 libllvm3.8 liblwp-mediatypes-perl
  liblwp-protocol-https-perl libmagic1 libmailtools-perl libmnl0 libmpc3
  libmpfr4 libmysqlclient20 libnet-dbus-perl libnet-http-perl
  libnet-smtp-ssl-perl libnet-ssleay-perl libnettle6 libp11-kit0 libpciaccess0
  libperl5.22 libpng12-0 libpq5 libpython-stdlib libpython2.7-minimal
  libpython2.7-stdlib libroken18-heimdal libruby2.3 libsasl2-2
  libsasl2-modules libsasl2-modules-db libsm6 libsqlite3-0 libssl1.0.0
  libtasn1-6 libtext-iconv-perl libtie-ixhash-perl libtimedate-perl
  libtxc-dxtn-s2tc0 liburi-perl libuv1 libwind0-heimdal libwww-perl
  libwww-robotrules-perl libx11-6 libx11-data libx11-protocol-perl libx11-xcb1
  libxau6 libxaw7 libxcb-dri2-0 libxcb-dri3-0 libxcb-glx0 libxcb-present0
  libxcb-shape0 libxcb-sync1 libxcb1 libxcomposite1 libxcursor1 libxdamage1
  libxdmcp6 libxext6 libxfixes3 libxft2 libxi6 libxinerama1 libxml-parser-perl
  libxml-twig-perl libxml-xpathengine-perl libxml2 libxmu6 libxmuu1 libxpm4
  libxrandr2 libxrender1 libxshmfence1 libxt6 libxtables11 libxtst6 libxv1
  libxxf86dga1 libxxf86vm1 libyaml-0-2 mime-support mysql-common netbase
  nodejs openssl perl perl-modules-5.22 python python-chardet python-minimal
  python-pkg-resources python-pygments python2.7 python2.7-minimal rake rename
  ruby ruby-afm ruby-ascii85 ruby-blankslate ruby-classifier-reborn
  ruby-coderay ruby-coffee-script ruby-coffee-script-source ruby-colorator
  ruby-did-you-mean ruby-execjs ruby-fast-stemmer ruby-ffi ruby-hashery
  ruby-jekyll-coffeescript ruby-jekyll-feed ruby-jekyll-gist
  ruby-jekyll-paginate ruby-jekyll-sass-converter ruby-jekyll-watch ruby-json
  ruby-kramdown ruby-liquid ruby-listen ruby-mercenary ruby-mime-types
  ruby-minitest ruby-multi-json ruby-mysql ruby-net-telnet ruby-oj
  ruby-parslet ruby-pdf-core ruby-pdf-reader ruby-pg ruby-posix-spawn
  ruby-power-assert ruby-prawn ruby-prawn-table ruby-pygments.rb
  ruby-rb-inotify ruby-rc4 ruby-rdiscount ruby-redcarpet ruby-rouge
  ruby-safe-yaml ruby-sass ruby-sequel ruby-sequel-pg ruby-stringex
  ruby-test-unit ruby-toml ruby-ttfunk ruby-yajl ruby2.3 rubygems-integration
  sgml-base shared-mime-info ucf unzip x11-common x11-utils x11-xserver-utils
  xdg-user-dirs xdg-utils xml-core zip
</code></pre></div></div>

<p><strong>А ю факин сириес?</strong> Миллион пакетов на установку одной тулзы! Представьте
теперь, что ставите ее нативно, без Докера. Колоссальное захламление системы. Вы
не сможете потом удалить эти пакеты. Не записывать же их на бумажку.</p>

<p>Это точка невозврата. Без Докера вы не сможете сделать систему такой, какой она
была до установки.</p>

<p>Ок, образ собрался. Запускаем через <code class="language-plaintext highlighter-rouge">Make</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker-run:
	docker run -it --rm -p 4000:4000 -v $(CURDIR):/blog blog
</code></pre></div></div>

<p>Параметры:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">-it</code> значит прикрепить <code class="language-plaintext highlighter-rouge">STDIN</code> хост-системы к контейнеру. Иначе говоря,
считывать пайпы или ввод с клавиатуры.</li>
  <li><code class="language-plaintext highlighter-rouge">--rm</code> – удалить контейнер по завершении процесса.</li>
  <li><code class="language-plaintext highlighter-rouge">-p 4000:4000</code> – пробросить 4000 порт хост-системы на аналогичный порт
контейнера.</li>
  <li><code class="language-plaintext highlighter-rouge">-v $(CURDIR):/blog</code> – смонтировать текущую папку хост-системы в папку
<code class="language-plaintext highlighter-rouge">/blog</code> образа.</li>
</ul>

<p>Make-переменная <code class="language-plaintext highlighter-rouge">$(CURDIR)</code> означает текущую папку. К сожалению, при пробросе
томов нельзя указать относительный путь, а хардкодить в Гите – моветон.</p>

<p>Если внутри образа я шагну в папку <code class="language-plaintext highlighter-rouge">/blog</code>, то увижу содержимое проекта.</p>

<p>При старте образа автоматом запустится сборка блога и сервер. Мне останется
открыть в браузере <code class="language-plaintext highlighter-rouge">http://127.0.0.1:4000/</code> и посмотреть на результат. При
изменении маркдаун-файлов – не важно где, в образе или на хосте – блог
автоматом себя перестроит.</p>

<p>Посмотреть исходники для <code class="language-plaintext highlighter-rouge">Make</code> и Докера можно в
<a href="https://github.com/igrishaev/igrishaev.github.io">репозитории блога</a>. Возможно, в следующий раз я расскажу об
инструменте <code class="language-plaintext highlighter-rouge">Docker Compose</code>. С помощью него мы создадим три контейнера –
приложение, база и Редис – и заставим идти в одной упряжке как единое целое.</p>

<p>Используете ли вы Докер, и если да, то как?</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/antitheism/">Антитеизм</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-08-02T00:00:00+00:00">
        Aug 2, 2016
    </time>

    <a href="/tag/antitheism/" rel="tag">antitheism</a>, <a href="/tag/religion/" rel="tag">religion</a>

</div>


            <div class="entry">
                
                    <p>Оказывается, мое отношение к религии называется “Антитеизм”. Вот и хорошо,
теперь можно просто ссылку кидать.</p>

<p><a href="https://ru.wikipedia.org/wiki/%D0%90%D0%BD%D1%82%D0%B8%D1%82%D0%B5%D0%B8%D0%B7%D0%BC">ТЫЦ</a></p>

<p>Цитата:</p>

<blockquote>
  <p>Я не только считаю, что все религии — это версии одной и той же неправды, но и
считаю, что влияние церквей и эффект от религиозной веры безусловно пагубен.</p>
</blockquote>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/python-tricks/">Питонячьи хитрости</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-07-26T00:00:00+00:00">
        Jul 26, 2016
    </time>

    <a href="/tag/python/" rel="tag">python</a>, <a href="/tag/tricks/" rel="tag">tricks</a>

</div>


            <div class="entry">
                
                    <p>Расскажу о всяких хитростях Питона, с которыми сталкивался в работе. Долгое
время записывал их на бумажку, а теперь решил скомпоновать. Думаю, будет
любопытно опытным питонщикам. Сказанное ниже носит познавательный характер. Не
призываю использовать в проде.</p>

<h3 id="многоточие">Многоточие</h3>

<p>Неожиданно, при определенных условиях многоточие <code class="language-plaintext highlighter-rouge">...</code> становится правильной
лексемой! Внутри оператора <code class="language-plaintext highlighter-rouge">[]</code> многоточие вырождается в объект <code class="language-plaintext highlighter-rouge">Ellipsis</code>:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&gt;&gt;&gt;</span> <span class="n">d</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">1</span><span class="p">,</span> <span class="bp">Ellipsis</span><span class="p">,</span> <span class="mi">2</span><span class="p">):</span> <span class="mi">42</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">d</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">...,</span> <span class="mi">2</span><span class="p">]</span>
<span class="mi">42</span>
</code></pre></div></div>

<p>Если переопределить метод <code class="language-plaintext highlighter-rouge">__getitem__</code> и проверять аргументы на многоточие,
можно добиться интересных результатов. Так работает библиотека
<a href="https://github.com/billpmurphy/hask">hask</a>. В ней с помощью многоточия
определяются бесконечные списки:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># бесконечный ленивый список от единицы
</span><span class="n">List</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">...]</span>

<span class="c1"># ленивый список от 1 до 100
</span><span class="n">List</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">...,</span> <span class="mi">100</span><span class="p">]</span>

<span class="c1"># аналогично, но с шагом в 2
</span><span class="n">List</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">...]</span>
</code></pre></div></div>

<p>В другом месте многоточие вызовет ошибку синтаксиса.</p>

<h3 id="срезы-в-аргументах">Срезы в аргументах</h3>

<p>В оператор индекса <code class="language-plaintext highlighter-rouge">[]</code> можно передать синтаксис словаря: <code class="language-plaintext highlighter-rouge">key: value,
...</code>. Тогда в методе <code class="language-plaintext highlighter-rouge">__getitem__</code> мы получим кортеж объектов <code class="language-plaintext highlighter-rouge">slice</code>. Ключ и
значение хранятся в полях <code class="language-plaintext highlighter-rouge">.start</code> и <code class="language-plaintext highlighter-rouge">.stop</code>. Выглядит так:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">slices</span><span class="p">):</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">slices</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">slice_tuple</span> <span class="o">=</span> <span class="n">slices</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">slice_tuple</span> <span class="o">=</span> <span class="p">(</span><span class="n">slices</span><span class="p">,</span> <span class="p">)</span>

        <span class="n">keys</span> <span class="o">=</span> <span class="p">(</span><span class="n">sl</span><span class="p">.</span><span class="n">start</span> <span class="k">for</span> <span class="n">sl</span> <span class="ow">in</span> <span class="n">slice_tuple</span><span class="p">)</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">sl</span><span class="p">.</span><span class="n">stop</span> <span class="k">for</span> <span class="n">sl</span> <span class="ow">in</span> <span class="n">slice_tuple</span><span class="p">)</span>

        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">keys</span><span class="p">,</span> <span class="n">vals</span><span class="p">))</span>

<span class="n">YourClass</span><span class="p">[</span><span class="s">"foo"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="s">"bar"</span><span class="p">:</span> <span class="s">"test"</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">{</span><span class="s">"foo"</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span> <span class="s">"bar"</span><span class="p">:</span> <span class="s">"test"</span><span class="p">}</span>
</code></pre></div></div>

<h3 id="деструктивный-синтаксис">Деструктивный синтаксис</h3>

<p>Внезапно, деструктивный синтаксис, о котором я <a href="/destructuring">уже писал</a>,
выпилен в тройке: не проходит проверку синтаксиса. Печаль моя не знает границ.</p>

<p>Это объективный минус третьего Питона. Зачем лишать разработчиков удобной
возможности? Я постоянно работаю с парами. Синтаксиса <code class="language-plaintext highlighter-rouge">def action((key, val)):</code>
теперь будет не хватать.</p>

<h3 id="погружение-в-словарь">Погружение в словарь</h3>

<p>Предположим, есть вложенные словари, ответ какого-то микросервиса. Нужно взять
поле из глубины. Структура ответа меняется. Часто разработчики пишут следующее:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'result'</span><span class="p">,</span> <span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">'user'</span><span class="p">,</span> <span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'unknown'</span><span class="p">)</span>
</code></pre></div></div>

<p>Минусы в том, что код плохо читается и созданы 2 лишних словаря. Аргументы
вычисляются до шага в функцию, поэтому словари будут созданы даже когда ключи
есть.</p>

<p>Неочевидный минус, из-за которого придется чинить прод в пятницу, кроется в
методе <code class="language-plaintext highlighter-rouge">.get</code>. Он возвращает дефолт только если ключа нет. А если ключ есть и
равен <code class="language-plaintext highlighter-rouge">None</code>, то вернется <code class="language-plaintext highlighter-rouge">None</code> вне зависимости от того, что передано в дефолт.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"result"</span><span class="p">:</span> <span class="p">{</span><span class="s">"user"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}}</span>
<span class="n">data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">'result'</span><span class="p">,</span> <span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">'user'</span><span class="p">,</span> <span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">'name'</span><span class="p">,</span> <span class="s">'unknown'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">AttributeError</span><span class="p">:</span> <span class="s">'NoneType'</span> <span class="nb">object</span> <span class="n">has</span> <span class="n">no</span> <span class="n">attribute</span> <span class="s">'get'</span>
</code></pre></div></div>

<p>В <a href="https://github.com/igrishaev/f">библиотеке f</a> я предложил нормальный способ
работы со вложенными словарями:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">f</span><span class="p">.</span><span class="n">ichain</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s">'result'</span><span class="p">,</span> <span class="s">'user'</span><span class="p">,</span> <span class="s">'name'</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="bp">None</span>
</code></pre></div></div>

<h3 id="конечное-приведение-типов">Конечное приведение типов</h3>

<p>Приводить типы в конце каждой операции – здравая мысль. Идея в том, чтобы
добавлять к концу вычислений кусочек <code class="language-plaintext highlighter-rouge">... or &lt;default&gt;</code>, например:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">get_users_count</span><span class="p">()</span> <span class="ow">or</span> <span class="mi">0</span>
<span class="o">&gt;&gt;&gt;</span> <span class="mi">0</span>

<span class="n">get_account_list</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="ow">or</span> <span class="p">[]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="p">[]</span>

<span class="n">f</span><span class="p">.</span><span class="n">ichain</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="s">'result'</span><span class="p">,</span> <span class="s">'user'</span><span class="p">,</span> <span class="s">'name'</span><span class="p">)</span> <span class="ow">or</span> <span class="s">'dunno'</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">dunno</span>
</code></pre></div></div>

<p>Этот прием спасает злополучного <code class="language-plaintext highlighter-rouge">None</code>, который лезет изо всех щелей. Беда в
том, что в скриптовых языках нет четких правил для пустых значений. Например,
функция может отдать или пустой список, или <code class="language-plaintext highlighter-rouge">None</code>. Запомнить невозможно. Рано
или поздно <code class="language-plaintext highlighter-rouge">None</code> провалится туда, где ожидают список или число.</p>

<p>Решение – выводить типы самостоятельно. Поскольку оператор <code class="language-plaintext highlighter-rouge">or</code> ленив во всех
языках, выражение справа не будет вычислено без необходимости. Следующий код:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s">"user"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
<span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="s">"user"</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}).</span><span class="n">get</span><span class="p">(</span><span class="s">"name"</span><span class="p">)</span> <span class="ow">or</span> <span class="s">"dunno"</span>
<span class="o">&gt;&gt;&gt;</span> <span class="s">"dunno"</span>
</code></pre></div></div>

<p>вернет ожидаемый дефолт, даже когда ключ есть и равен <code class="language-plaintext highlighter-rouge">None</code>. При этом если в
юзере лежат актуальные данные, пустой словарь не будет создан.</p>

<h3 id="правые-методы">Правые методы</h3>

<p>Еще одна особенность классов в Питоне – правые волшебные методы. Они начинаются
с префикса <code class="language-plaintext highlighter-rouge">r</code>:<code class="language-plaintext highlighter-rouge"> __radd__</code>, <code class="language-plaintext highlighter-rouge">__rsub__</code> и т.д. Как следует из названия, эти
методы вызываются для правого операнда в тех случаях, когда для левого операнда
метод не определен.</p>

<p>Другими словами, рассмотрим выражение <code class="language-plaintext highlighter-rouge">a + b</code>. Сперва Питон попытается сделать
так: <code class="language-plaintext highlighter-rouge">a.__add__(b)</code>. Если для <code class="language-plaintext highlighter-rouge">a</code> метод <code class="language-plaintext highlighter-rouge">__add__</code> неопределен, будет предпринята
другая попытка: <code class="language-plaintext highlighter-rouge">b.__radd__(a)</code>. И если <code class="language-plaintext highlighter-rouge">__radd__</code> тоже не определен для <code class="language-plaintext highlighter-rouge">b</code>,
вылезет ошибка.</p>

<p>Правые методы появились в третьей версии Питона. Попробуем реализовать следующее
поведение: к списку добавляем число. Если прибавляем слева, число становится в
начало списка. Если справа – в конец.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">List</span><span class="p">(</span><span class="nb">list</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">List</span><span class="p">,</span> <span class="bp">self</span><span class="p">).</span><span class="n">__add__</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span> <span class="o">+</span> <span class="p">[</span><span class="n">other</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__radd__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">return</span> <span class="n">other</span><span class="p">.</span><span class="n">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">other</span><span class="p">].</span><span class="n">__add__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

<span class="o">&gt;&gt;&gt;</span> <span class="mi">99</span> <span class="o">+</span> <span class="n">List</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>
<span class="p">[</span><span class="mi">99</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">List</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span> <span class="o">+</span> <span class="mi">99</span>
<span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">99</span><span class="p">]</span>
</code></pre></div></div>

<h3 id="особенности-среза-в-тройке">Особенности среза в тройке</h3>

<p>Во втором Питоне у классов был особый метод <code class="language-plaintext highlighter-rouge">__getslice__</code> для получения
среза. В тройке его объединили с <code class="language-plaintext highlighter-rouge">__getitem__</code>. Теперь интерпретатор проверяет,
что передано в <code class="language-plaintext highlighter-rouge">__getitem__</code>. Если написать <code class="language-plaintext highlighter-rouge">foo[1:2]</code>, будет передан экземпляр
класса <code class="language-plaintext highlighter-rouge">slice</code>, а если <code class="language-plaintext highlighter-rouge">foo[1, 2]</code> – кортеж.</p>

<p>Этот пункт я привожу к тому, что переопределив метод <code class="language-plaintext highlighter-rouge">__getitem__</code>, мы по запаре
можем сломать операцию среза. Приходится добавлять условие: если передан срез –
вызывать предка, если нет – своя логика:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="k">def</span> <span class="nf">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">item</span><span class="p">,</span> <span class="nb">slice</span><span class="p">):</span>
            <span class="k">return</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyClass</span><span class="p">,</span> <span class="bp">self</span><span class="p">).</span><span class="n">__getitem__</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">...</span>
</code></pre></div></div>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/linux-desktop/">Настольный Линукс</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-07-25T00:00:00+00:00">
        Jul 25, 2016
    </time>

    <a href="/tag/linux/" rel="tag">linux</a>, <a href="/tag/ubuntu/" rel="tag">ubuntu</a>, <a href="/tag/desktop/" rel="tag">desktop</a>

</div>


            <div class="entry">
                
                    <p>Пока Макбук на ремонте, вынужденно работаю в Убунте. Достал с антресолей
старенький Леново x220i, скачал образ 16.04, поставил с флешки. I’m using Linux,
woo-hoo!</p>

<p>Возвращаться в эту среду было интересно по двум причинам. Во-первых, испытать
прошлый опыт. До Мака я довольно долго сидел на Убунте с оконным менеджером
<a href="https://i3wm.org/">i3</a>. Во-вторых, оценить, что изменилось за 2 года c Маком, и
в какую сторону.</p>

<p>Ожидаемо, настольный Линкус по-прежнему уступает Маку. Удивляет, что многие из
претензий могли бы быть исправлены уже сейчас. Разработчикам Убунты не нужно,
как Джобсу, брить голову и идти в монахи. Достаточно поработать недельку в Маке,
а потом сесть за собственное поделие.</p>

<p>Первая претензия – ошибки при старте системы. Стоило поставить из пакетов
стандартные утилиты вроде Гита, Емакса, dev-библиотек, как при загрузке вылазят
диалоги “System Program Error”. Что случилось, как починить – не понятно. Число
ошибок со временем растет. Была одна, стало две. У знакомого штук 12
выскакивало.</p>

<p>Убунта не вывозит без частой перезагрузки. Работая на Маке, я не выключал его
месяцами. 2-3 месяца непрерывной работы – обычное дело. Рекод был 5 месяцев, и
все без перебоев.</p>

<p>Убунта же сливается к концу недели. Например, теряет сеть. Все, нет соединений,
ни фай-фая, ни провода. Только перезагрузка. Ставить сторонний менеджер сети я
считаю моветоном. Это должно быть из коробки.</p>

<p>Система забывает второй монитор. Настроил разрешение и позицию, через какое-то
время втыкаешь кабель – и все как в первый раз. Справедливости ради, в Маке
такое случалось, но крайне редко, а с обновлением до Эль Капитана пропало.</p>

<p>Разработчики Убунты не имеют базовых понятий об интерфейсе. Тыкая на балон с
нотификацией, я ожидаю увидеть окно с полной информацией. Но в Убунте принято
просто показать балон, а как добраться до цели – твои проблемы.</p>

<p>Наример, всплывает нотификашка – “Your software needs to be updated”. Ну, ок,
обновляйся. Тыкаю в пузырь, он бледнеет, ничего не происходит. Я сам должен идти
в дебри настроек и запускать апдейт. Заняться мне больше нечем, ага.</p>

<p>Миллион мелких косяков со шрифтами и выравниванием. Когда вываливается дропдаун,
его полотно в два раза больше, чем нужно на расположение опций. Студенческая
поделка на Дельфи. Хотя вру, в Дельфи гуй был нормальный, там при всем желании
нельзя было родить столь уродский дропдаун.</p>

<p>Стандартными средствами нельзя переназначить капс. Пришлось выкачивать какой-то
супер-твик-тулкит. В Маке – <a href="/2015/10/08/2/">стандартная опция</a>.</p>

<p>Установщик пакетов – беда. Поставить пакет без трудностей можно только в
терминале.</p>

<p>Главный минус – потеря времени. На исправление каждого косяка нужно минимум 30
минут чтобы нагуглить рецепт, вспомнить забытую команду, поправить конфиг,
перезагрузиться. Хотя вообще-то сел работать.</p>

<p>Мак не идеален, но как настольная система для повседневных задач гораздо
стабильней. Именно настольная, я делаю акцент. Потому что в серверном плане у
Линукса нет конкурентов. Десктоп пилить и пилить еще.</p>

<p>Убунтоводы, не спешите писать о недостатках Мака. Они есть, но о них в другом
посте.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/goal-book/">Книга "Цель"</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-07-20T00:00:00+00:00">
        Jul 20, 2016
    </time>

    <a href="/tag/goal/" rel="tag">goal</a>, <a href="/tag/book/" rel="tag">book</a>

</div>


            <div class="entry">
                
                    <p>Ох, какую книгу я прочитал – обзавидуетесь! Книга-праздник. Так я называю
книги, удовольствие от которых почти физическое. Рад представить:</p>

<h1 id="цель-процесс-непрерывного-улучшения">Цель. Процесс непрерывного улучшения</h1>

<p><img src="/assets/static/books/goal-cover.jpg" alt="The Goal Cover" /></p>

<p>Это бизнес-роман. С таким жанром я столкнулся впервые и был приятно
удивлен. Цель – это история об увлекательных тайнах бизнеса, оптимизации
производства, финансовых делах. Все это проходит сквозь жизнь главного героя,
который взвалил на себя нелегкую задачу в бизнесе. Одновременно он вынужден
разобраться с личными и семейными проблемами.</p>

<p>Алекс Рого, прообраз автора – директор завода в небольшом американском
городке. Дела на заводе идут плохо: заказы просрочены, процесс неясен, нехватка
материалов, задержки во всех рабочих центрах. Особо важные заказы приходится
“протаскивать”: в буквальном смысле сопровождать каждую партию деталей по
станкам, требовать экстренной перенастройки оборудования, набирать внеурочные
смены.</p>

<p>Из-за нервной обстановки нервы на пределе, рабочие допускают ошибки. Самый
важный заказ не ушел в срок: механик неверно наладил станок. Много брака, станок
уходит в ремонт. Счет за экстренный выезд наладчиков уводит прибыль от заказа в
минус. Мастер, допустивший ошибку, увольняется из-за нервов и боязни вычета. У
других рабочих нет квалификации для этого станка.</p>

<p>И так каждую неделю. Алекс фактически живет на заводе, пытаясь разрулить
трудности. Начинаются проблемы в семье.</p>

<p>Дела идут плохо не только на заводе Алекса, но и во всем дивизионе. Алексу
ставят ультиматум – если за 3 месяца не изменить ситуацию к лучшему, завод
закроют.</p>

<p>Для Алекса это катастрофа, провал, карьерная смерть. На новом рабочем месте ему
предложат низкую должность. Если остаться в текущей фирме, не будет
уважения. Алекс – надежда города, потому что завод дает тысячу рабочих мест, а
с бюджетом у городка не густо.</p>

<p>Главный герой пытается обратиться к книгам и учебным материалам, но ни времени,
ни сил на обучение не остается. Попытки провести анализ ситуации не дают
успеха. Помощь приходит с неожиданной стороны – от бывшего учителя по физике
Ионы.</p>

<p>Ранее ученый-физик, Иона занимается оптимизацией процессов на
производстве. Задав несколько вопросов, он быстрей Алекса понимает, в какой
заднице завод. Иона дает несколько странных, с точки зрения Алекса,
советов. Один из них звучит так – прежде чем мы начнем спасать завод, определи,
в чем цель фирмы.</p>

<p>Что дальше – не описать. Три напряженных месяца. Жизнь в жутком стрессе в
ожидании провала. Разрыв с женой. Первые проблески надежды. Снова
проблемы. Очередные наставления Ионы, взрывающие мозг. Успех. Новые трудности,
дело безнадежно. Потом…</p>

<p>Короче, надо читать самому. Книга рвет изрядное число шаблонов.</p>

<ul>
  <li>
    <p>На предприятии обязательно есть то, что главный герой называет бутылочным
горлышком. Это станок, сотрудник или узел, где мощность пропускного потока
ограничена. Горлышко есть всегда. Нежелание его обнаружить – главная проблема
на производстве.</p>
  </li>
  <li>
    <p>Бутылочное горлышко отвечает за производительность предприятия в целом. Час,
потерянный в горлышке, невозможно нагнать на следующих стадиях производства.</p>
  </li>
  <li>
    <p>Горлышек может быть несколько. В общем случае, их наличие – норма и даже
желаемый факт. Регулируя мощность горлышек, мы меняем производительность всего
предприятия.</p>
  </li>
  <li>
    <p>Обычный рабочий центр (или не-бутылочное горлышко) не должен работать свыше
нормы, заданной рынком. Иначе бутылочное горлышко не сможет потребить
потенциал не-горлышка, и возникнет избыточное производство.</p>
  </li>
  <li>
    <p>Последний термин полностью звучит как “Материально-товарные ценности”. Это
все, что было созданно в процесе производства. Высокое значение показателя
говорит о проблемах со сбытом. Если ценности растут, значит, производство
делает продукт, но его не покупают.</p>
  </li>
  <li>
    <p>Предприятие, в котором все центры работают на полную мощность – неэффективно!
Рано или поздно процесс упрется в бутылочные горлышки, которые не были заметны
раньше.</p>
  </li>
  <li>
    <p>Напротив, эффективно работает то предприятие, где всегда остается запас
нереализованной мощности. Это значит, что не люди бездельники. Персонал и
оборудование не обеспечили заказами. Нужно работать с рынком, искать новых
заказчиков.</p>
  </li>
  <li>
    <p>Вот почему вредно нагружать работой людей и технику только за тем, чтобы не
было простоев. Сотрудники поймут, что с головой у руководства не в порядке. В
случае с техникой нельзя забывать амортизацию и Мерфи.</p>
  </li>
  <li>
    <p>Ритм важнее темпа. Размеренность производства в приоритете перед скоростью
конкретного рабочего центра. Выигрыш в час рабочего времени на обычном узле не
несет выигрыша в целом.</p>
  </li>
  <li>
    <p>По этой же причине могут оказаться ложными показатели эффективности на
отдельных рабочих местах. Да, каждый справился на ура, но продукт выпустили с
опозданием. Работа на выходных съела часть прибыли. Кто виноват?</p>
  </li>
  <li>
    <p>В цепи событий возможны колебания. Ошибочно считать, что они нейтрализуют друг
друга. Напротив, погрешности накапливаются и двигаются волнами. Волна значит
бессонную ночь, задержки, увольнения.</p>
  </li>
  <li>
    <p>Пример: рабочие последовательно обрабатывают детали, передают их друг
другу. Эмпирически определена средняя выработка рабочего: <code class="language-plaintext highlighter-rouge">N</code> деталей в
час. По факту он делает от <code class="language-plaintext highlighter-rouge">(N - 5)</code> до <code class="language-plaintext highlighter-rouge">(N + 5)</code> деталей в час. Можем
предположить, что если первый случайно сделал <code class="language-plaintext highlighter-rouge">(N - 2)</code> деталей, то второй с
такой же вероятностью сделает <code class="language-plaintext highlighter-rouge">(N + 2)</code>, что сведет погрешность в ноль. На
самом деле второй рабочий не сможет сделать <code class="language-plaintext highlighter-rouge">(N + 2)</code>, потому что получит от
первого только <code class="language-plaintext highlighter-rouge">(N - 2)</code>. И все остальные сделают не больше <code class="language-plaintext highlighter-rouge">(N - 2)</code>. Это
значит, негативная погрешность распространяется до конца цепочки, а
позитивная, даже если случится, будет поглащена негативной где-то внутри.</p>
  </li>
  <li>
    <p>Этому существует математическое обоснование. Алекс провел игру с
одноклассниками сына. Мальчики кидали кости и передавали спички
(детали). Количество очков (обработанных деталей) распределилось строго по
убыванию очереди. Хотя среднее число очков на кости было одинаковым для
каждого мальчика (3.5), чем дальше он был в цепи, тем меньше спичек (деталей)
мог переложить из своей тарелки (рабочего центра) следующему.</p>
  </li>
  <li>
    <p>Чтобы решить проблемы в фирме, нужно четко понять, в чем ее цель. Незнание
цели ведет к растрате ресурсов и ложным ожиданиям.</p>
  </li>
  <li>
    <p>Ограничения носят блуждающий характер. Устранив ограничение, наивный
руководитель откидывается в кресло до наступления нового завала. Мудрый
руководитель умеет предсказать, где возникнет новое.</p>
  </li>
  <li>
    <p>Использование ресурса не всегда ведет к достижению цели. Например, заставить
рабочих таскать мешки из угла в угол только потому, что у них простой. Это
повысит показатели эффективности (8 рабочих часов вместо 6), но не приведет к
достижению цели.</p>
  </li>
  <li>
    <p>Новинки технического прогресса приносят пользу фирме лишь при правильном их
использовании. Так, формально новый роботизированный станок улучшил
эффективность фирмы по всем статьям, но на деле лишь быстрей потащил ее на
финансовое дно.</p>
  </li>
  <li>
    <p>Намереваясь сделать очередной шаг, спросите себя, как он приблизит вас к
цели. Например: добавляя эту фичу, мы улучшаем продукт, что расширит базу
клиентов и принесет прибыль. Контр-пример: мы хотим заменить устаревший
фреймворк на современный. Клиенты не почувствуют разницу, но разработчикам
будет интересно.</p>
  </li>
  <li>
    <p>Смотрите на любую вещь так, словно видете ее впервые. Оспаривайте выводы,
которые следуют из “здравого смысла” или “общеизвестных фактов”. Это главная
мысль книги.</p>
  </li>
</ul>

<p>Самый классный эпизод – три главы про поход Алекса с сыном и одноклассниками в
лес. Столько проблем и идей! Материал в этом месте особо плотный.</p>

<p>Книгу дополняют интервью с автором и руководителями крупных фирм, внедривших его
практики. Директор одного из заводов Дженерал Моторс рассказывает, что у него
ушло 5 лет на одни только бутылочные горлышки.</p>

<p>Теперь о том, какое отношение книга имеет к ай-ти. Я считаю,
непосредственное. Группа программистов – не завод, но многие из идей автора
верны для любой фирмы или просто группы людей. Что именно, полагаю, напишу
отдельным постом.</p>

<p>Пока читал книгу, вспоминал один крупный проект. Компания – гигант, деньги
гребет лопатой. Команда не маленькая. Но – мы не успевали. Каждый релиз был
мрак и боль. Внезапные баги, патчи на прод. Задержки, перенос релизов. И когда я
пытался сказать, что это неправильно, отвечали – так у всех. Поиск виноватых
напоминал ситуацию с заводом. Каждый в отдельности отработал отлично, закрыл
таски в Джире. А релиз хромой и с опозданием на неделю.</p>

<p>К счастью, я понял, что так не у всех. Нужно только пересмотреть ситуацию и
пойти к цели маленькими шагами. Если у всех плохо, не значит, что должно быть и
у вас. Герой автора это доказал. Ищите ограничения, смотрите на вещи под другим
углом и не ведитесь на общепринятые догмы.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/eng-terms/">Как писать иностранные термины</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-07-16T16:00:00+00:00">
        Jul 16, 2016
    </time>

    <a href="/tag/english/" rel="tag">english</a>, <a href="/tag/terms/" rel="tag">terms</a>, <a href="/tag/russion/" rel="tag">russion</a>, <a href="/tag/translate/" rel="tag">translate</a>

</div>


            <div class="entry">
                
                    <p>В комментариях на Хабре мне пишут, что, оказывается, я неправильно пишу
зарубежные термины – кириллицей, а надо латиницей. Это называют “в привычной
манере”. И добавляют: imho.</p>

<p>С этой болезнью я борюсь давно и не удивляюсь прокаженным.</p>

<p>Нет смысла спорить с человеком, который полагает, что писать “Google” вместо
Гугл или “iPhone” вместо Айфон – правильно. Это означает серьезную брешь в
самообразовании. Доказывать что-то бесполезно. Человек должен сам прийти к тому,
что правильно будет Гугл, Айфон, Айпад, Гит, Джаваскрипт и так далее.</p>

<p>Запомните следующий тезис:</p>

<h1 id="не-бывает-слов-которые-не-переводятся">Не бывает слов, которые не переводятся</h1>

<p>То есть вообще не бывает. Понятно? Любое слово из английского, испанского или
китайского можно взять и перевести.</p>

<p>Помните начало нулевых? Тогда многие всерьез писали Internet или Web-site. Они
думали, что эти слова не переводятся. А сегодня разве кто-то пишет Internet?
Только тот, кто не имеет к нему отношения.</p>

<p>Покажите мне человека, который пишет Pepsi вместо Пепси или Coca-Cola вместо
Кока-Кола. Почему-то эти слова прекрасно переводятся.</p>

<p>По аналогии, переводятся технические слова: названия инструментов, языков,
паттернов. Кстати, мы же не пишем pattern, а просто фигачим транслитом. Примеров
этому тысячи.</p>

<p>Непривычно! – кричит хабраюзер, который всю жизнь довольствовался
треш-переводами, где русских слов меньше, чем английских. Все сперва
непривычно. Новый язык, браузер, телефон, переезд – непривычно. Секс в первый
раз тоже непривычен.</p>

<p>Несколько лет назад я участвовал в мероприятии по переводу документации системы
Друпал. Знаете, такой мамонт на пы-хы-пе. Мой перевод не приняли по той причине,
что термин URL, оказывается, не переводится!</p>

<p>Админ с багом решил распространить баг на меня. В итоговой документации
английских слов было поровну с русскими. Это назвали переводом и выбросили в
сообщество.</p>

<p>Кто сегодня в трезвом уме пишет URL? Пишут “ссылка”, “адрес”. Представьте:</p>

<blockquote>
  <p>Миша, скинь URL на твой профиль в Skype?</p>
</blockquote>

<p>Видно же, что у человека рак мозга: четые раза переключал раскладку, набирал
капсом или с шифтом. Как можно позволить себе такую неэффективность? Это только
секретарше в госконторе простительно.</p>

<p>Развитый человек смотрит на проблему перевода с недоумением. В математике, если
нельзя вычислить значение функции от аргумента, должно быть этому
обоснование. Например, нельзя посчитать <code class="language-plaintext highlighter-rouge">a / x</code> при <code class="language-plaintext highlighter-rouge">x = 0</code>. А почему слово
нельзя перевести? Кто-то может внятно объяснить, не ссылаясь на привычки и
“здравый смысл”?</p>

<p>Особо одаренные пишут термин латиницей, а на хвост сажают русское
окончание. Получаюся уродцы в духе:</p>

<blockquote>
  <p>…расскажет о websocket-ах!</p>
</blockquote>

<blockquote>
  <p>…опубликовать в Facebook-е.</p>
</blockquote>

<blockquote>
  <p>…показать только свежие commit-ы?</p>
</blockquote>

<p>Вот смотрите, американец пишет текст. Если попадется слово на русском, польском,
китайском языках, он ни за что не напишет оригиналом. Вообще никогда.  Потому
что американский писатель уважает читателей. Как они прочтут незнакомое слово?</p>

<p>Кириллица для американца – все равно что иероглифы для русского. Как прочесть
букву “р”? Это “эр” или “пэ”? Буква “м” – это наша, американская “эм” или
что-то другое?</p>

<p>Вот идет гопник в майке с надписью “Russia”. Кто-нибудь хоть раз видел, чтобы
американцы печатали на одежде “США”?</p>

<p>Разве бывает, чтобы слово “водка” американцы написали русскими буквами?  Они
пишут vodka. Если речь о машине “Камаз” – пишут Kamaz. Еще пишут Volga,
matreshka, balalaika и так далее.</p>

<p>Если смысл слова не ясен, все равно пишут транслитом, а в скобках или под
сноской – значение. Вот реальный пример из учебника по английскому. Текст про
первую женщину-космонавтку:</p>

<blockquote>
  <p>Pilots named her Chaika (seagul in russian).</p>
</blockquote>

<p>Не “Чайка”, а “Chaika”.</p>

<p>Я уж не говорю о том, что названия китайских или японских брендов никогда не
пишут иероглифами.</p>

<p>Вернемся к нашим баранам. Очередной горе-перевод:</p>

<blockquote>
  <p>После раздумий он решил уйти из Google в Facebook.</p>
</blockquote>

<p>Вот подумай, переводчик, как читать эту фразу тем, кто не знаком с английским?
Из Гогле? Из Гоогл? Из Гугле? В Фасбук? Фесбоок? А если чел переехал Китай и
устроился в национальный поисковик 百度? Закорючками писать будешь?</p>

<p>Поможем неуверенному переводчику. Google переводится и будет по-русски
Гугл. Facebook, внезапно, тоже переводится и будет Фейсбук:</p>

<blockquote>
  <p>После раздумий он решил уйти из Гугла в Фейсбук.</p>
</blockquote>

<p>Китайский вариант:</p>

<blockquote>
  <p>После раздумий он решил уйти из Гугла в Байду.</p>
</blockquote>

<p>Еще раз: непереводимых слов нет. Да, вы не сможете написать “Фейсбук” на
африканском наречии, где 3 звука и 2 жеста. Но по-русски сможете.</p>

<p>Если все плохо и доводы вас не убедили, ситуацию все еще можно
спасти. Почитайте, что пишут достойные люди по этому поводу:</p>

<ul>
  <li><a href="http://maximilyahov.ru/blog/2012/12/11/1/">Не бойтесь говорить и писать по-русски</a></li>
  <li><a href="http://bolknote.ru/2012/05/20/">MOCKBA speaks English</a></li>
  <li><a href="http://artgorbunov.ru/bb/soviet/20111217/">Совет Артема Горбунова</a></li>
  <li><a href="http://old.valerypopoff.ru/blog/2011/08/04/1/">Айфон или iPhone</a></li>
</ul>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/f-habr/">Публикация на Хабре</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-07-16T00:00:00+00:00">
        Jul 16, 2016
    </time>

    <a href="/tag/habr/" rel="tag">habr</a>, <a href="/tag/open-source/" rel="tag">open-source</a>

</div>


            <div class="entry">
                
                    <p>На главной Хабра висит моя <a href="https://habrahabr.ru/post/305750/">статья о библиотеке <code class="language-plaintext highlighter-rouge">f</code></a> для
функционального программирования в Питоне.</p>

<p><a href="https://github.com/igrishaev/f">Гитхаб проекта</a> с документацией. <a href="https://github.com/igrishaev/f">Пакет в Pypi</a>.</p>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/bad-work/">Плохая работа</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-07-14T00:00:00+00:00">
        Jul 14, 2016
    </time>

    <a href="/tag/bad/" rel="tag">bad</a>, <a href="/tag/work/" rel="tag">work</a>

</div>


            <div class="entry">
                
                    <p>Бывает, когда что-то сделано плохо или не работает, я злюсь. Окружающие
удивляются: ну подумаешь, не работает! Можно открыть в другом браузере, зайти
позже, воспользоваться услугами конкурента. Я злюсь еще сильнее, потому что меня
не поняли.</p>

<p>Раздражает не факт того, что работа сделана плохо. Вот невидаль! Бесит, что
плохая работа прошла полный цикл исполнения, согласования, приема и внедрения. И
никто – ни один человек во всей цепочке – не сказал: ребят, мы же говно
сделали, как этим пользоваться?</p>

<p>Плохая работа повсюду. Сделали сайт – не открывается на Айпаде из-за
говно-скриптов. Сделали скат возле лестницы – невозможно катить
коляску. Парковочное место стоит впритык с тротуаром, машина загораживает
проход. В анкете не хватает места. Бордюры там, где их быть не должно.</p>

<p>И так далее.</p>

<p>Причина плохой работы кроется в следующем. Исполнитель либо не пользуется своим
продуктом, либо имеет халявный доступ к продукции фирмы. Оба фактора одинаково
плохи. В результате изделие или услуга не находят точек соприкосновения с
действительностью. Оно как бы есть, но люди пользуются обходными способами.</p>

<p>Артемий Лебедев предложил оригинальный способ приема пандусов. Прораба сажают в
инвалидную коляску и скатывают вниз. Скатился цел – работа принята. В противном
случае прораб сам станет инвалидом. Но это предотвратит появление других опасных
пандусов.</p>

<p>Ничто так не развращает, как халявный доступ к продукту. Получая бесплатно
своими же руками сделанное говно, исполнитель вздыхает – да, не очень, зато
бесплатно.</p>

<p>Максимальной привилегией, положенной сотруднику, должна быть обычная скидка в
10% от стоимости продукта. Ты делал – так купи! В фирмах, где действует это
правило, производят классные вещи и услуги.</p>

<p>В реальности картина должна быть такой. Если ты дизайнер и сделал бланк анкеты
– распечатай и заполни сам. Сразу станет ясно, где много места, где
мало. Сделал сайт – открой на медленной машине или на Айпаде. Если тормозит –
переделывай. Сделал пандус – сел в инвалидную коляску и попробовал съехать. Не
вышло – все разобрать и переделать. Убытки вычесть из зарплаты проектировщика.</p>

<p>И так далее. Короткими словами – нужно только обязать исполнителя
воспользоваться своим же продуктом.</p>

<p>Очень советую прочитать <a href="http://nl.livejournal.com/1214265.html">“Сказку О Криворуких Ебланах”</a>. Это именно то,
что я хотел передать.</p>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/why-not-pdf/">Причины отказа от ПДФ</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2016-07-09T00:00:00+00:00">
        Jul 9, 2016
    </time>

    <a href="/tag/pdf/" rel="tag">pdf</a>

</div>


            <div class="entry">
                
                    <p>Еще год назад я был твердо уверен, что лучший формат для книг и статей –
ПДФ. Только с покупкой <a href="/kindle">электронной читалки</a> я понял, как
ошибался. Теперь качаю ПДФ лишь когда других вариантов не остается.</p>

<p>Но дело не только в читалке. Немного подумав, я выделил весомые недостатки
формата. Разберемся, что с ним не так.</p>

<p>Формат ПДФ – потомок устаревшего языка Postscript, за изобретение которого
инженеры Адоби получили очень престижную премию. Дело в том, в те времена не
было единого правила, по которому принтер печатал документ.</p>

<p>Postscript был декларативным языком с инструкциями, что и как печатать. Даже
самый сложный дизайн стало возможным перевести в набор команд и отправить на
принтер. Поскольку Postscript – это текст, программа, которая не могла выдать
графический файл, сохраняла .ps-документ, составленный по шаблону.</p>

<p>ПДФ расширил возможности Постскрипта. На текущий момент существует девятое
поколение формата (1.9). Долгое время пользователям компьютеров и планшетов было
необходимо ставить Adobe Reader, т.к. в системе не было встроенной программы.</p>

<p>К счастью, времена изменились. Сегодня просмотреть ПДФ можно стандартной
программой даже в Линуксе. Все браузеры умеют отображать документ как страничку.</p>

<p>Основное достоинство ПДФ в том, что он хранит и растровую, и векторную графику
одновременно. Это крайне полезно для макетов с текстом. Текст стараются хранить
в векторе до самой последней стадии печатной обработки.</p>

<p>Главный недостаток формата следует из его достоинства. ПДФ предназначен для
печати, поэтому плохо влезает в небольшие экраны. Сжать можно только сам
документ. Текст не может быть скомпанован динамически. Умные читалки вроде
Киндла научились срезать пустые поля по краям документа, но это не приносит
значимой пользы.</p>

<p>ПДФ – бинарный формат. Документ плохо поддается машинной обработке. Огромные
усилия вложены во всевозможные парсеры, анализаторы и утилиты, которые
вытягивают из ПДФ данные в более дружелюбные форматы. Я лично участвовал в
подобном мероприятии.</p>

<p>На недостатках формата отдельные предприниматели строят бизнес. Фирма
<a href="http://www.verypdf.com/">VeryPDF</a> предоставляет клиентам автоматическое
распознавание таблиц в ПДФ. Многие ПДФ-библиотеки для языков программирования
либо платные, либо с несвободной лицензией.</p>

<p>ПДФ – сложный формат с огромным легаси. Задача парсинга упирается в то, что на
каждый случай, как обрабатывать тот или иной элемент, существует длинный
case-оператор в зависимости от версии.</p>

<p>В документ практически невозможно вставить какую-либо анимацию или
медиа-контент. Гифка не воспроизводится. Видео – только с помощью плагина,
который никто кроме Адоби не поддерживает.</p>

<p>Однажды я ради интереса скачал демо-документ с трехмерной сценой какой-то
детали. Он весил 170 Мб и при открытии 3 раза спросил про безопасность. А Гитхаб
без проблем показывает в Хроме рендер моделей для 3Д-принтеров.</p>

<p>Официальная программа Adobe Reader выродилась в жирного монстра, который
регистрирует 2 службы, прописывается в автозагрузку, забит по самые уши лишними
опциями.</p>

<p>Поверх формата ПДФ фирма Адоби пыталась создать облачную платфрму для совместной
работы с документами. Давно не узнавал, как идут дела, но на мой взгляд, не
густо. Все же, наследие формата для этого не подходит.</p>

<p>ПДФ это своего рода Флеш в плане безопасности. Массовые случаи заражений, утечек
данных, зависаний компьютеров. Как вообще могло в прийти голову разрешить
вложения .exe, .js, .vb файлов в ПДФ-документ?</p>

<p>Что же предпочесть в итоге?</p>

<p>На мой взгляд, лучший формат для текста и мультимедии – это дедушка ХТМЛ. Не
потому, что внезапно он стал чем-то лучше. Браузеры и устройства стали
показывать его очень хорошо. Анимация, видео, звук, интерактивные элементы, даже
игры – все это поддерживает ХТМЛ. Текст компонуется автоматически.</p>

<p>Если в документе исключительно теги заголовков и абзацев (h1..6 и p), то любой
мобильный девайс покажет текст на ура.</p>

<p>Мораль – упрощайте. Если устройство должно показывать текст, то лучший формат
– это просто текст.</p>

                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page72" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 73 из 95</span>
        
        <a href="/page74" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="https://t.me/igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
