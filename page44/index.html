<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page44/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px"><a href="/">Ivan Grishaev's blog</a></p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/open-source/">Open Source</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/dead-soft/">Мертвые программы</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-10-04T00:00:00+00:00">
        Oct 4, 2021
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Самые лучшие программы — те, что обыватели называют “мертвыми”.  То есть те, что
обновляются либо никогда, либо редко и по мелочам. Иной раз поражаюсь:
собеседник вроде неглуп, но Sublime Editor у него считается мертвым. Видите ли,
давно не обновлялся.</p>

<p>Не обновлялся, и что? Это же прекрасно! Никаких неожиданностей с интерфейсом,
дуракцих фич, синхронизации учетной записи, облачной подписки, что там
еще… Как в старые добрые времена. Поставил Фотошоп версии пять, через год
вышел шестой. А не через день, как сегодня. И нельзя запустить, пока не
скачаешь.</p>

<p>Желая обновлений, вы сами накликаете беду. Пусть будет софт, который не
обновляется. Такой, чтобы из года в год мы получали ту же программу, что и
раньше. Глупцы не понимают, что индустрия насыпет им обновлений сверх меры. Оно
вам надо? Софт, который из года в год работает одинаково, – разве не будет он
глотком воздуха в этом аду?</p>

<p>Удивляюсь тем, кто отслеживает грядущие фичи и расстраивается, если их нет в
релизе. Я всегда полагался только на то, что идет из коробки. Нахожу забавным
обзоры релизов какой-нибудь IDE от Джетбрейнс. Тут заработал автокомплит! А
здесь новое окошко! Прокрутка на 3.3 процента плавнее! Поддержка эмодзи, вы
слышали! Смехота и только.</p>

<p>Сердце моего окружения — это именно мертвые программы: Emacs, Git, Bash, утилиты
GNU, LaTeX. В них я могу создать программу, сайт, книгу. Они обновляются, но это
не играет роли: я использую только то, что в них уже много лет. Если завтра за
их поддержку введут смертную казнь, мне хватит их на оставшуюся жизнь. Они не
отвалятся из-за протухшей учетной записи, заблокированной кредитки или переезда
в Крым-наш.</p>

<p>Это очень круто и дает настоящую, неподдельную радость.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/printers/">Принтеры</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-09-22T00:00:00+00:00">
        Sep 22, 2021
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Пожалуй, самая нелепая, не поддающаяся описанию вещь в нашем мире — это
принтеры.</p>

<p>Даже если принтер размером с холодильник и стоит как самолет, его экран будет
как пейджер нулевых. То есть со спичечный коробок с четырьмя кнопками, у которых
по десять функций в зависимости от контекста.</p>

<p>У любого принтера ужасный драйвер и интерфейс опций. Типичный случай —
восемь-девять табов с опциями, раскиданными без всякой логики.</p>

<p>Принтеры ужасно выглядят: у них миллион каких-то щелей, фазок, выемок, лотков,
которыми никто не пользуется. Все это скрипит и ходит, как потертое седло. Те же
ощущения, что от ноутбуков HP десятилетней давности.</p>

<p>Самая феерия — это дозаправка картриджа. Производитель считает, что ты должен
купить новый у официалов, и если вставить заправленный картридж, система его не
увидит. Для своего принтера нагуглил инструкцию (копирую как есть):</p>

<ul>
  <li>Включите аппарат и откройте крышку.</li>
  <li>Теперь выключите принтер.</li>
  <li>Зажмите клавишу «Go» на клавиатуре панели управления устройства и не отпускайте.</li>
  <li>Снова включите принтер.</li>
  <li>Дождитесь пока начнут гореть все индикаторы кроме «Ready».</li>
  <li>После еще три секунды подержите и отпустите «Go».</li>
  <li>Теперь 10 раз нажмите «Go» и следите, чтобы после каждого загорался индикатор «Ready» именно зеленым цветом.</li>
  <li>После делаем небольшую паузу. В это время должны гореть три лампочки вверху.</li>
  <li>И снова кнопку «Go» жмем 5 раз.</li>
  <li>После этих мероприятий лампочки еще некоторое время помигают разными оттенками.</li>
  <li>В конце лампочка «Ready» должна начать постоянно светится.</li>
</ul>

<p>Удивительно, но это дерьмо работает. Реально, если нажать, подержать, помигать,
отпустить и так далее, то принтер подхватит заправленный картридж. Не знаю
плакать или смеяться. Представьте, если после замены воздушного фильтра в машине
надо зажать тормоз и газ, открыть все двери и перекреститься. А тут всерьез.</p>

<p>Дополняет все беды то, что системный диалог печати в операционных системах убог
до невозможности, а каждая программа предлагает свои уродские диалоги. В Ворде
он ужасен. В Хроме — кастрирован. Для себя нашел спасение: любой документ
сохраняю в PDF и печатаю из эпловского Preview. Единственная программа с
нормальным диалогом печати.</p>

<p>Интересно, что именно в компании Xerox начались изыскания в области
интерфейса. Окна, кнопки, вырезать-вставить. Но в итоге печатная промышленность
пришла куда-то не туда.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/that-is-what-I-do/">Что я делаю</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-09-16T00:00:00+00:00">
        Sep 16, 2021
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>В последнее время мало пишу в блог, потому что занят другими вещами. Эта заметка
— попытка обозначить их для самого себя. Итак, помимо основной работы, я делаю
вот что.</p>

<p>Менторю пару девушек: студентку и школьницу. Делаю это бесплатно, потому что не
вижу смысла брать с них денег. Путь лучше в будущем научат кого-то еще.</p>

<p>Занимаюсь вопросами дома, в котором живу. Только что провел тяжелейшее
голосование по установке шлагбаумов на территории. Теперь претворяю в
жизнь. Получил колоссальный опыт в плане общения с людьми и организации.</p>

<p>Редактирую текст второй главы по базам данных для следующей книги о Кложе. В
день выходит по чайной ложке, но все-же когда-нибудь добью.</p>

<p>Неожиданно стал майнить. Занимаюсь майнингом всего четыре месяца, на за это
время получил вагон знаний о железе, крипте и электричестве. Может, когда-нибудь
напишу про это небольшую книжку.</p>

<p>А блог… Что ж, пусть со временем он станет архивом. Реальные дела важнее.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/db-draft/">Анонс главы. Базы данных в Сlojure</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-09-02T00:00:00+00:00">
        Sep 2, 2021
    </time>

    <a href="/tag/book/" rel="tag">book</a>, <a href="/tag/draft/" rel="tag">draft</a>

</div>


            <div class="entry">
                
                    <p>Только что закончил черновик главы о реляционных базах в Сlojure. Вышло сто
страниц А4; в книжных страницах это около ста шестидесяти. Мой самый большой
текст.</p>

<p>В прошлом году я опубликовал <a href="/clj-jdbc-1/">огрызок</a> этой главы. Идея была в
том, чтобы выкладывать частями. Но потом передумал: гораздо лучше подчистить и
выложить целиком, чтобы не рассеивать внимание.</p>

<p>Посмотрел на дату публикации того огрызка и не поверил: ноябрь 2020 года. Прошел
почти год! С возрастом время летит незаметно.</p>

<p>Впереди еще несколько этапов чистки, и только потом опубликую главу. Думаю,
ждать осталось месяц.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/meduza/">Медуза</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-08-23T00:00:00+00:00">
        Aug 23, 2021
    </time>

    <a href="/tag/covid/" rel="tag">covid</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>С сожалением понял, что не могу больше читать Медузу. Это прекрасное издание, и
я даже поддерживаю их после признания иностранным агентом. Причина сложная, но
постараюсь грамотно ее передать.</p>

<p>Долгое время я рассматривал Медузу как новостной сайт. Но за последний год ее
формат изменился. Теперь это не новости, а скорее блоггинг или что-то вроде
того. Главный индикатор — в издании отчетливо слышится повестка.</p>

<p>Повесткой я называю тезисы и идеи, за которые кто-то топит. Например, моя
повестка — программирование, Лисп и ФП, образование, книги, управление
временем. Повестка условного Варламова — урбанистика, архитектура, политика,
общественные события. В блоге повестка обязательна: читатель сразу должен
понять, за что топит автор, и исходя из этого уйти или остаться. У меня, как и у
всех, есть мнение насчет госдолга США и как поднять Россию с колен, но я
стараюсь не писать на эти темы. В первую очередь из уважения к читателям.</p>

<p>В новостном издании, напротив, повестка не должна проступать так выпукло, как в
блоге. Когда я открываю новость, я не хочу, чтобы автор ее оценивал. Я жду
нейтральную информацию о том, что случилось, и если нужна оценка, то либо
составляю ее сам, либо обращаюсь к блоггерам.</p>

<p>Увы, Медуза нарушила этот формат. Ее публикации все больше напоминают блог
группы авторов. Сначала в интонации и между строк, а затем и в заголовках
редакция выражает свое отношение к новости, и это невыносимо.</p>

<p>Талибы(1) — плохо. Навальный — жертва. Его расследования — круто. Коронавирус —
главная угроза обществу. Вакцинация — хорошо. Тот, кто отрицает —
ковид-диссидент (даже термин придумали). Песков несет пургу. Стеб над
Путиным. Несправедливое отношение к геям и неграм. Ущемление лесбийских пар в
России.</p>

<p>Ощущение, что Медуза возомнила себя транслятором передовых идей Европы и
пытается окультурить отсталую Россию. Культурное прокси в Риге.</p>

<p>Дело не в том, что я поддерживаю Путина и Пескова — было бы странно заподозрить
меня в этом. Но мне не нравится, когда издание стебется над кем-то. Например,
Медуза частенько ставит на главную туманную цитату Пескова и приписывает
издевательский заголовок. По мне это то же самое, что подрисовывать усы в книге
— детский сад.</p>

<p>После признания ингантом Медуза ведет себя, как обидевшаяся женщина. В
заголовках — пассивная агрессия, стеб, сарказм. Так быть не должно. А еще эмодзи
в заголовках. Если смешно, то ржачный смайлик. Если грустно, то плачущий. Какое
дно.</p>

<p>В целом, попытка редакции сблизиться с читателем скорее меня отталкивает. Каждая
новость пытается выдавить из меня гнев, осуждение, негодование, отчаяние и
смех. Я не хочу всего этого. Если переживать за всех ущемленных и несправедливо
попавших под ментовский произвол, то исчерпаешь ментальную устойчивость. Да и
никакие это не новости. Это тот же условный Варламов.news, то есть блоггинг под
видом новостей.</p>

<p>Конечно, каждый из нас нуждается в толковании событий. Хорошо то или иное
событие или нет, молодцы эти ребята или нет. Поставили скульптуру в виде
<del>говна</del> глины. Если коллеги заспорят в курилке, за что мне топить? Говно или
искусство?  Для этого и существует блоггинг — люди делятся мнением, а читатель
выбирает, к какому лагерю примкнуть. Но тут важны две вещи.</p>

<p>Во-первых, не надо выключать голову. Бывает, насмотрится человек Шульман, и я по
второй-третьей фразе понимаю, откуда дровишки. Во-вторых, цените издания,
которые не дают оценки событий. Скорей всего, это вымирающий вид. Не станет их,
и вы волей-неволей скатитесь к просмотру варламовых и лебедевых.</p>

<p>Это все равно что клевать мертвечину.</p>

<p>(1): вроде бы считаются запрещенной в России организацией, так что вынужден дать
эту сноску.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/strategy/">Стратегия</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-08-02T00:00:00+00:00">
        Aug 2, 2021
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Предположим, вы смотрите какой-то митап на Ютубчике. Голова с экрана говорит
вам, что:</p>

<ul>
  <li>нужно нанимать только фулстек-разработчиков;</li>
  <li>нужно вставать в 5 утра;</li>
  <li>нужно читать по три книги в месяц</li>
</ul>

<p>и все в том же духе. При этом выступающий чего-то добился, и вроде как ему можно
доверять.</p>

<p>Что делать? Менять технический стек? Закупать книги? Ставить будильник?</p>

<p>Чтобы все объяснить, прибегу к дешевому трюку — аналогии.</p>

<p>Есть такой жанр компьютерных игр — стратегии. Это когда строишь юнитов и давишь
ими противника. Стратегии интересны бесконечным сочетанием юнитов, их
способностей, карты, выпавших предметов, случайности и других факторов.</p>

<p>У слова “стратегия” есть и другой смысл — набор действий в игре. Например,
удачная комбинация конкретных юнитов. Или порядок постойки зданий. Или покупка
предметов и зачистки монстров для раскачки.</p>

<p>Теперь внимание: в играх не бывает стратегии, которая однозначно определяет
успех. Если таковая находится, ее тут же исправляют патчем: ослабляют юнитов,
делают их дороже, сдвигают выше по технологическому дереву.</p>

<p>Известный игрок Moon на одном из турниров убил сильного противника базовым
юнитом — лучницами. Сразу после турнира многие стали играть так же, что не
принесло им успеха. Так появилась новая стратегия за эльфов, которую пробуют
время от времени, но она не обещает выигрыша.</p>

<p>Теперь обратно к говорящим из Ютуба. Рынок — это игра, в которой многие факторы
не определены. Жизнь постоянно корректирует его законы. Нет стратегии, которая
обязательно принесет прибыль.</p>

<p>Нужно нанимать только фулстек-разработчиков? Возможно, это зашло только в вашем
проекте и в группе конкретных людей.</p>

<p>Нужно вставать в 5 утра? Обратитесь к истории про Стивена Хокинга, когда он
совершил открытие ложась в кровать поздно ночью.</p>

<p>Надо держать монореп? У тех успешных ребят отдельные репы.</p>

<p>И так далее.</p>

<p>Понимаете, нет заведомо выигрышной стратегии. Одинокий тезис, высказанный со
сцены, на практике переплетен со сложным контекстом: где, когда и с кем. Но со
сцены вы его не услышите. Как и в Варкрафте, после успешного выступления сотни
людей бегут повторять увиденное, но почему-то не выходит.</p>

<p>Вывод? Смотри Ютуб, почитывай Хабр, но следуй своему пути.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/read-36/">Ссылки на выходные (выпуск 36)</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-07-31T00:00:00+00:00">
        Jul 31, 2021
    </time>

    <a href="/tag/read/" rel="tag">read</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Этот выпуск посвящаю Федору Борщеву. Федор – программист, консультант,
занимался Медузой и другими масштабными проектами. Полную информацию о нем вы
найдете на сайте, а я прикладываю несколько заметок, чтобы подогреть интерес.</p>

<ul>
  <li>
    <p><a href="https://borshev.com/50-percent/">Тупое правило про 50%</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/bro-said/">Пацан сказал — пацан сделал</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/rest-responsibility/">Отдых — твоя ответственность</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/no-confuse/">Не сомневаться в принятых решениях</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/small-changes/">Небольшие доработочки</a></p>
  </li>
</ul>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/covid/">Коронавирус на Титанике</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-07-19T00:00:00+00:00">
        Jul 19, 2021
    </time>

    <a href="/tag/covid/" rel="tag">covid</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Несколько лет назад мы с сыном увлекались Титаником. Посмотрели несколько
документальных фильмов, читали Википедию. Помнится, в 2012 году была столетняя
годовщина со дня трагедии, и под это дело Титаник всплыл в информационном поле.</p>

<p>Изучая историю Титаника, поражаешься нелепым промахам и неудачам. По сути вся
история — это череда ошибок. Титаник был приговорен еще в момент спуска на воду,
да что там — на этапе чертежей. Проплыви он тот рейс, проблема возникла бы в
следующий. Через десять рейсов или сто, неважно. Точно так же была бы трагедия и
тысяча с лишним погибших.</p>

<p>В спорах о Титанике даже речи не может быть о том, какую именно ошибку допустил
экипаж. Их было столь много, что можно спорить только о вкладе в общую картину,
но никак не о бинарном признаке “было/не было”.</p>

<p>Прямо сейчас, не заглядывая ни в какие интернеты, перечисляю ошибки по
памяти. Для удобства делю причины на группы.</p>

<p><strong>Устройство</strong></p>

<ul>
  <li>Дрянные заклепки корпуса, которые лопнули при столкновении.</li>
  <li>Система сообщающихся отсеков. Заполнив один отсек, вода спокойно переливалась в
следующий и так далее.</li>
  <li>Недостаточное число шлюпок и мест в них: 1200 мест на 2600 пассажиров.</li>
</ul>

<p><strong>Халатность</strong></p>
<ul>
  <li>Только один бинокль на смотровой площадке. При смене вахты смотрящий забыл
передать ключ от сейфа с биноклем второму смотрящему, а тот поленился идти за
ним.</li>
  <li>На борту были только белые сигнальные огни, которые означают внимание. Судно
браконьеров было рядом, но там белые огни приняли за фейерверк и поспешили
уплыть. Красных огней, означающих бедствие, не было.</li>
</ul>

<p><strong>Действия экипажа</strong></p>

<ul>
  <li>Первые двадцать минут после столкновения судно шло на полном
ходу, из-за чего напор воды из пробоины усилился в десять раз.</li>
  <li>Долгое время никто ничего не понимал, считали, что все хорошо.</li>
  <li>Решение опустить перегородки в отсека было фатальным. Если бы вода равномерно
растекалась по корпусу, судно погружалось бы в течение 15 часов. За это время
пришла бы помощь. Из-за того, что отсеки заполнялись по одному, судно
накренилось и переломилось спустя три часа после столкновения.</li>
  <li>Радисты посылали старый сигнал CQD, хотя все уже перешли на SOS.</li>
  <li>Экипаж не умел спускать шлюпки, учения никогда не проводились. Где-то их
спускали наполовину пустыми, на голову другим или переворачивали.</li>
</ul>

<p>Список можно растянуть на два-три экрана. Не будем этого делать, потому что и
так ясно: с самого начала все пошло не так, и кончиться иначе не могло. Сегодня,
когда мы смотрим фильм про Титаник или читаем википедию, в голове одна мысль:
как так? Почему провафлили все что можно? Почему обделались буквально на каждом
шаге? Разве нельзя было подумать заранее?</p>

<p>Всю эту петрушку про Титаник я написал потому, что вижу явное, стопроцентное
совпадение с короновирусом. Как и сто лет назад, человечество целиком
обосралось. Уверен, в будущем события наших дней будут разбирать с тем же
чувством сочувствия и снисхождения. Видите, что устроили эти болезные. Что ж,
пожалеем их, вздохнем и пообещаем так не делать.</p>

<p>В борьбе с коронавирусом мы, как и отчаянный экипаж идущего на дно судна,
сделали неправильно буквально все. В защиту экипажа можно сказать, что у них
было не более часа на обдумывание ситуации. А у нас ковидная вакханалия длится
уже полтора года, но просвета чиновничей глупости не видно.</p>

<p>Отмотаем время на год назад. Помните ковидные локдауны по три месяца? Stay Home?
Ролики с селебрити, где на все лады повторяли эту фразу? Очевидно, это не
сработало. Стоило людям выйти на улицу, настала т.н. “вторая волна”. Беру в
кавычки, потому что именно под этим термином нам ее подавали. На самом деле это
была первая волна, которую просто искусственно прервали. Да и вообще, нет
никаких волн — есть локальные вспышки, есть сезонность. А волны только в Доте.</p>

<p>Сиденье в закрытых помещениях на столь долгий срок привело к тому, что многие
потеряли работу. Как удаленно работать учителю музыки, официанту, гардеробщику?
Принимать шубу по скайпу? В считанные месяцы население обеднело и, как
результат, стало хуже питаться. Повысились стресс и домашнее насилие. В закрытых
помещениях без свежего воздуха теряется иммунитет.</p>

<p>На людей обрушилась невероятная по своей мощи информационная волна. Новости,
ежедневные сводки, ток-шоу, эксперты. Вирус несется из каждого утюга. Сраная
Медуза показывает в шапке график заболеваемости, словно это курс
доллара. Манипуляции с цифрами и статистикой. На ковид списывают ножевые ранения
и несчастные случаи. Врачам доплачивают за ковид.</p>

<p>Подтягиваются политики и чиновники. Настал их час: всем хочется порулить в
момент кризиса, чтобы стать героем. Ввели пропуска, отменили пропуска. Вчера
победили ковид, а завтра ВНЕЗАПНАЯ третья (четвертая, пятая) волна. Еще лучше:
новый штамм (бета, гамма, сигма — греческих букв хватит надолго).</p>

<p>Ввели QR-коды, отменили QR-коды. Ввели мобильное приложение, отменили мобильное
приложение. Попутно выставив миллионы штрафов просто за то, что люди не осилили
адский интерфейс.</p>

<p>Все ситуативно, непредсказуемо. Сыпятся ограничения, при этом нет режима ЧП. Нет
никакого плана или стратегии хотя бы на месяц. Все решается в полете.</p>

<p>Каждый день в новостях высказывания одно тупей другого. Вылазят обласканные
политикой врачи. Те, кто не хочет привиться — биотеррористы. Дополню: приравнять
к зомби и выдать лицензию на отстрел.</p>

<p>Потребление наркотиков возросло на 60%. Неудивительно: как иначе людям
справляться с накатившим стрессом?</p>

<p>Начинается война вакцин и сегрегация. В условную Францию нельзя, потому что не
привит. Или привит, но не тем. Сраная Европа не одобряет вакцину России. Сраная
Россия не одобряет европейскую. Думай о том, чем привиться выгодней, чтобы
охватить больше стран. Чиновники массово едут в Европу и колят Файзер, который
простому смертному не достать.</p>

<p>Во всем этом нет ни грамма заботы о людях. От начала до конца все основано на
невежестве и жадности. Короновирус — исключительно политический момент. Он стал
поводом, чтобы проталкивать внешние и внутренние решения. Внешние — в плане
вакцин, чтобы застолбить свой стандарт. Тот, чья вакцина выиграет, будет
подтираться золотой бумагой. Внутренние — для давления на население. Митинги
нельзя, больше двух не собираться, не уколешься — не получишь зарплату.</p>

<p>Коронавирус — это война человечества с самим собой. В отличии от старых войн,
теперь не нужно сбрасывать бомбы и давить танками крестьян. Враг безлик, его
нельзя найти в горах и уничтожить. Очень удобно.</p>

<p>Помнится, Барак Обама возвещал, что Россия и вирус Эбола представляют главную
угрозу человечеству. С Эболой не сложилось, но уже тогда было видно, насколько
желанна эпидемия мирового масштаба.</p>

<p>Ладно, что же надо делать?</p>

<p>Во-первых, определиться с терминами. Что такое эпидемия и пандемия? При каких
порогах можно утверждать, что в стране происходит второе или первое? Когда
определения и пороги найдены, составить план и следовать ему, при этом
оперативно уведомлять население о том, где мы и куда движемся. Ничего подобного
я не вижу в принципе. Если включить новости Москвы, то все будет плохо, при этом
чрезвычайного положения нет, все оперативно и на ходу.</p>

<p>Наиболее разумный шаг — оставить население в покое. От недостатка денег и
стресса умирает гораздо больше людей, чем от коронавируса. Загуглите графики
избыточной смертности в Москве и в Питере. Странным образом вместе с ковидниками
умирает много других людей. Это те, кто в результате беспощадной борьбы не смог
получить помощь: сердечники, раковые больные, инвалиды с редкими болезнями.</p>

<p>Не вводить поголовную вакцинацию. Вакцина нужна ослабленным людям, пожилым и
тем, кто в группе риска. Остальным — повышать иммунитет, качество воды,
продуктов питания и жизни в целом. Поощрять проветривания и зарядку.</p>

<p>Уж давно выяснили, что вирус боится именно проветривания, а не социальной
дистанции в полтора метра. Но по-прежнему многие помещения задраены, окна
закрыты, а тебя просят “одеть масочку”. Заодно вскрылась бездна людей, не
способных отличить “одеть” от “надеть”.</p>

<p>Наконец, за полтора года можно было вывести из комы массовую медицинскую
помощь. Выясняется, что в 18 году число койко-мест “оптимизировали” до 40%. И не
только у нас. В Америке программа Obama Care точно так же похоронила массовую
медицинскую помощь. Смысл программы в том, чтобы обязать гражданина купить
медстраховку. А на что ее купить, если сидишь дома или потерял работу? Или
работаешь неофициально? В ответ программа несет чушь про гибкую систему скидок.</p>

<p>Государства, что наше, что иностранные, полностью снимают с себя ответственность
за здоровье гражданина. В результате Америка угробила население, обогатив
кошельки страховых компаний. Россия ничуть не лучше: деньги от “оптимизации”
медицины пошли явно не на медицину.</p>

<p>Еще раз: в полуторагодовой борьбе с вирусом нет ни грамма заботы о людях. Ни
одна страна не ставит цель иметь здоровое население, где локальные вспышки гасит
массовая бесплатная медицинская помощь. Ковид — два в одном, повод и
инструмент. Это политика, деньги и война вакцин. Печально наблюдать эту картину
Босха в мировом масштабе, и тем труднее сохранить остатки критики и разума.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/read-35/">Ссылки на выходные (выпуск 35)</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-07-17T00:00:00+00:00">
        Jul 17, 2021
    </time>

    <a href="/tag/read/" rel="tag">read</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Давно не писал в блог. Все свободное время трачу на большую главу по базам
данных в Кложе. На какой-то период ограничимся ссылками на выходные.</p>

<p>Этот выпуск посвящаю Леониду Каганову.</p>

<ul>
  <li>
    <p>Фантастический рассказ <a href="https://lleo.me/arhive/fan2006/mne_povezet.shtml">“Мне повезет”</a></p>

    <p>Занятный рассказ, и смешно и грустно одновременно. Займет двадцать минут, не пожалеете.</p>
  </li>
  <li>
    <p><a href="https://lleo.me/dnevnik/2021/07/12">Поговорим про умный дом?</a></p>

    <p>Давно хотел написать о том, какая чушь все эти умные дома. Но Леонид сделал это раньше и лучше.</p>
  </li>
</ul>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/cron-mail/">Crontab и отправка почты</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-06-23T00:00:00+00:00">
        Jun 23, 2021
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/cron/" rel="tag">cron</a>, <a href="/tag/mail/" rel="tag">mail</a>

</div>


            <div class="entry">
                
                    <p>На днях столкнулся с проблемой. На моем ноуте крутится несколько
crontab-задач. Хотелось бы видеть, когда сработала каждая из них и если нет, то
почему. Какое-то время я выкручивался с помощью логов. Оба канала (stdout и
stderr) перехватываются в общий пайп, где каждая строка предваряется текущий
датой и записывается в файл. Например:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">SHELL</span><span class="o">=</span>/bin/bash

0 <span class="k">*</span>/3 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /path/to/command &amp;&gt; <span class="o">&gt;(</span> <span class="k">while </span><span class="nb">read </span>line<span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">date</span><span class="si">)</span><span class="s2">: </span><span class="k">${</span><span class="nv">line</span><span class="k">}</span><span class="s2">"</span><span class="p">;</span> <span class="k">done</span> <span class="o">&gt;&gt;</span> /Users/ivan/logs/command.log<span class="o">)</span>
</code></pre></div></div>

<p>В результате и обычный, и ошибочный выхлоп оседают в файле. Выглядит это так:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Tue Jun 22 15:58:02 MSK 2021: warning: Skipping file ...
Tue Jun 22 15:58:19 MSK 2021: Completed 0 file(s) with ...
Tue Jun 22 15:59:02 MSK 2021: warning: Skipping file /Users/ivan/...
Tue Jun 22 15:59:19 MSK 2021: Completed 0 file(s) with ...
</code></pre></div></div>

<p>Недостаток в том, что логи нужно регулярно проверять. Об этом легко забыть на
месяц, а потом выяснится, что задача не работала из-за глупой ошибки.</p>

<p>Тут я вспомнил, что крон умеет отправлять выхлоп задачи на почту. Если задана
переменная <code class="language-plaintext highlighter-rouge">MAILTO=&lt;email&gt;</code>, то на эту почту свалится выхлоп. Это значит,
отпадают логи, ведь теперь достаточно проверить почту. Проверять ее можно и с
телефона, что в разы удобней.</p>

<p>Отправка письма работает за счет утилиты <code class="language-plaintext highlighter-rouge">mail</code>. В общем виде ей пользуются так:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>something | mail <span class="nt">-s</span> <span class="s1">'subject'</span> friend@domain.com
</code></pre></div></div>

<p>Эта команда отправит письмо на сервер <code class="language-plaintext highlighter-rouge">domain.com</code>, при этом отправитель будет
выглядеть как <code class="language-plaintext highlighter-rouge">ivan@ivan.local</code>, то есть имя пользователя и текущего хоста. То
же самое можно получить командой:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo `whoami`@`hostname`
</code></pre></div></div>

<p>Обратите внимание на кавычки – они означают выполнить выражение в новом шелле и
подставить результат.</p>

<p>Отправленное письмо никто не получит, что потому что современные сервера
отметают письма, где айпи отправителя не совпадает с айпи его домена. Это
хорошо, иначе бы мы утонули в спаме. Будем отправлять письма с серверов Гугла. А
чтобы <code class="language-plaintext highlighter-rouge">mail</code> мог подключиться к Гуглу, сделаем три вещи.</p>

<p><strong>Первое.</strong> В файл <code class="language-plaintext highlighter-rouge">/etc/postfix/main.cf</code> дописать строки ниже. Делать это нужно
под <code class="language-plaintext highlighter-rouge">sudo</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>relayhost = [smtp.gmail.com]:587
smtp_sasl_auth_enable = yes
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_sasl_security_options = noanonymous
smtp_use_tls = yes
smtp_sasl_mechanism_filter = plain
</code></pre></div></div>

<p><strong>Второе.</strong> Создать файл <code class="language-plaintext highlighter-rouge">/etc/postfix/sasl_passwd</code> и вписать в него:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[smtp.gmail.com]:587 username@gmail.com:password
</code></pre></div></div>

<p>, где <code class="language-plaintext highlighter-rouge">password</code> — пароль приложения для почты. Сгенерить этот пароль можно на
специальной <a href="https://myaccount.google.com/apppasswords">странице Гугла</a>.</p>

<p>Замечу, что вместо <code class="language-plaintext highlighter-rouge">gmail.com</code> может быть ваш домен, если он нацелен на гугловые
сервера как в моем случае.</p>

<p><strong>Третье</strong> — указать <code class="language-plaintext highlighter-rouge">postfix</code> новые конфиги и перезагрузить его:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo chmod 600 /etc/postfix/sasl_passwd
sudo postmap /etc/postfix/sasl_passwd
sudo launchctl stop org.postfix.master
sudo launchctl start org.postfix.master
</code></pre></div></div>

<p>Все. Пробуем отправить письмо. Сообщим в нем содержимое домашней папки:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-l</span> | mail <span class="nt">-s</span> <span class="s1">'my home dir'</span> ivan@grishaev.me
</code></pre></div></div>

<p>Мне пришло с первого раза. Plain text, красота.</p>

<p>Так вот, теперь когда почта работает, настроим крон. Открываем его командой
<code class="language-plaintext highlighter-rouge">crontab -e</code> и пишем сверху:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MAILTO=&lt;ваша@почта&gt;
</code></pre></div></div>

<p>Кроме того, в конец каждой команды добавляем эхо, например:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0 */3 * * * cd /some/path &amp;&amp; command --foo 42 &amp;&amp; echo OK
</code></pre></div></div>

<p>Зачем нужно эхо? Оказалось, что крон не отправляет письмо, если выхлоп задачи
пуст. А поскольку я всегда хочу знать о запуске задачи, то делаю вывод не
пустым. Вместо <code class="language-plaintext highlighter-rouge">echo OK</code> можно вывести текущую дату с помощью <code class="language-plaintext highlighter-rouge">&amp;&amp; date</code>.</p>

<p>В результате мы получим письмо, где тема — команда задачи, а тело — ее
выхлоп. Работает в том числе и для задач, которые не сработали из-за ошибки.</p>

<p>Я уж не говорю о том, что с помощью <code class="language-plaintext highlighter-rouge">mail</code> можно быстро что-то скидывать себе на
почту, организовать какие-то заметки и прочее. Что самое прекрасное — нет
интерфейса, все простое и открытое, работает везде. Чудо.</p>

<p>В следующий раз расскажу, что именно я ставлю на крон, там тоже интересные вещи.</p>

                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page43" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 44 из 97</span>
        
        <a href="/page45" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="https://t.me/igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
