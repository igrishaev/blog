---
layout: post
title:  "Фаервол"
permalink: /firewall/
tags: macos firewall lulu
---


Лучшая вещь, что случилась со мной в последнее время — это установка фаервола на
всех маках. Вот как это произошло.

Когда-то я жаловался, что программы без спроса лезут в интернет
обновляться. Открыл Саблайм — а он показывает модалку, что вышла новая
версия. Открыл то, другое, а там то же самое: скачай-обновись.

Идея как это победить простая — нужно отобрать у программы доступ в интернет. Я
пошел настраивать встроенный фаервол, но оказалось, он убогий: закрывает только
входящие соединения, а исходящие не трогает. В результате даже если добавить в
список программу, она спокойно идет в сеть.

Путем гугления нашел программу Lulu. Хоть название и затасканное, программа
просто супер: удобный интерфейс и настройка. Lulu делит программы на группы:
родные Эпла, уже установленные и другие. Можно включать и выключать целые
группы, а можно по отдельности. Правила формируются в разрезе программ, папок,
регулярных выражений.

Можно настроить гибкий контроль по урлам. Например, дать программе доступ к
хосту `sync.blabla.com` для синхронизации, но запретить обновления по хосту
`update.blabla.com`.

Можно дать временный доступ по номеру процесса. Когда программа запуститься в
cледующий раз, номер будет другим, и Lulu спросит опять.

Фаервол может работать в интерактивном режиме, показывая диалог на события,
которых нет в правилах, а может молча разрешать или разрешать все, что
происходит.

Для себя я сделал так: удалил все правила, кроме Эпловских, а затем настраивал
вручную. Запретил все программы Адоба, офисного пакета, всякие редакторы вроде
Саблайма — их задача работать с текстом, а не лазить за обновлениями. Запретил
обновки для Dash, программы оффлайн-документации, и много что другое.

На старом ноуте обнаружил несколько вирусов. Это программы с названиями типа
robstoaf, прописанные в автозагрузке. Время от времени они ходят в сеть на левые
хосты. Возможно, крадут историю браузеров или это ботнет. Так что не слушайте
байки про то, что под Мак вирусов нет.

Что немаловажно, Lulu запрашивает подтверждение, когда левая программа хочет
добавить себя в автозагрузку. Всякое дерьмо вроде Zoom, MS Teams прописывают
себя там, и в итоге запускаются в фоне, даже если вы не просили. Больше этого
беспредела нет.

Программа так понравилась, что я хотел перевести автору денег, долларов
сто. Хотел скинуть с Пейпала, а у него только патреон — то есть регистрируйся,
вводи персональные данные, карту, подтверждай — извините, нет.

Кроме Lulu, у автора есть смежные утилиты для безопасности, например монитор
клавиатуры на предмет прослушки и что-то еще второстепенное.

Словом, не знаю как жить без Lulu: теперь это первая программа, которую я ставлю
на Мак. Как раз недавно ставил ее на свежий ноут. Неистово рекомендую!

Картинки, описание и загрузка здесь:
https://objective-see.org/products/lulu.html
