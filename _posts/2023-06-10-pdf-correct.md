---
layout: post
title:  "Корректура в PDF"
permalink: /pdf-correct/
tags: book pdf
---

Если кто не знает, откуда столько ненависти к PDF, сейчас объясню.

У PDF одно назначение — просмотр и печать документов. Это конечный артефакт,
который получают при компиляции проекта — будь то Индизайн, Латех, что
угодно. Править PDF после его получения — это то же самое, что править байтики в
exe-файле, вместо того, чтобы поправить код.

[preview]: /preview/

Один раз [я даже писал][preview] про возможности Preview по работе с PDF, но все это уловки
для бедных, когда нет исходника.

Тезис о том, что с PDF нельзя работать как с документом, подтверждает следующий
опыт: **середина 2023 года, тридцать лет с момента появления PDF — и не найти
программы, которая бы работала с ним без ошибок**.

Если конкретно, то я готовлю вторую книгу к печати. Заказал корректуру, говорю:
готов распечатать и прислать любой службой за мой счет. Нет, берем только
PDF. Ладно, выслал, получил обратно с комментариями.

Теперь самое интересное. Внос правок сводится к шагам: перешел к очередному
комментарию, поправил исходник, удалил коммент. Что же пошло не так? А вот что.

Preview на Mac M1 не может удалить некоторые комментарии. Те, что с типом
Highlight — да, а Note — нет. Специально проверил, старый Preview на Интеле
может, но поведение неочевидно. В целом работа с аннотациями в Preview глючная:
коммент может висеть еще долго после удаления. Иногда фокус смещается
произвольно и удаляется не тот коммент.

Не все это можно передать в картинках, но например: слева у комментария есть
опция удаления, а справа у Note — нет.

{% include static.html path="pdf/1.jpeg" %}

Для демонстрации других косяков нужно записывать гифки, к чему я не готов.

Вы скажете — браузер. Не вопрос, открыл в Хроме, а там такое:

{% include static.html path="pdf/2.jpeg" %}

Плюс комменты нельзя удалять, read-only.

Может, Акробат наше все? Ну, уже сам факт, что установка требует sudo, внушает опасения. Ладно, поставил. Документ не открывается перетаскиванием в программу — только File -> Open, только хардкор. Удаление комментов работает, но если скопировать текст из PDF, получим такое:

~~~
Âòîðàÿ ãëàâà ïîñâÿùåíà ðåëÿöèîííûì áàçàì äàííûõ,
~~~

Словом, кто вносил корректуру, тот в цирке не смеется.

Повторю тезис из начала заметки: любая работа с PDF — это боль по
определению. Он специально сделан так, чтобы правки были максимально
затруднены. Бинарный формат, девять редакций, адское легаси. Любая программа,
которая предлагает редактирование PDF — это н...балово. Оно работает только в
примитивных случаях, а как что-то серьезней — сплошная беда.

Поэтому, кстати, я считаю, что корректор, который не работает с бумагой — это
слабый корректор. Хороший как минимум не должен ее избегать.

**UPD**

Продолжение заметки. Добрые люди подсказали два варианта: PDF Expert и Master
PDF Editor. Первая не обслуживает пользователей из России, но ставится из
brew. Оказалось, она не работает без облачной учетной записи. Попап закрывает
интерфейс, хоть усрись, но создай учетку. Скриншот не сохранил, прогу удалил.
Поставил Master PDF Editor, на первый взгляд все отлично. Посидел два часа,
вносил корректуру. Сохранил файл и перекинул на другой комп. Открываю, а там:

{% include static.html path="pdf/3.jpeg" %}

Знаете, это уже не смешно. Похоже, на вопрос из прошлой заметки — есть ли в
природе программа, которая работает с PDF без ошибок — ответ все-таки
отрицательный.

Эту работу я как-нибудь доделаю, но она стоила много нервов. *Очень, очень много
нервов.*
