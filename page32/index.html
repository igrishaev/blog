<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page32/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img id="avatar" src="/assets/static/avatar.jpg" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod-2/">Книга «Clojure на производстве», второй том</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/thank-you-for/">Спасибо, что</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-02-01T00:00:00+00:00">
        Feb 1, 2023
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Кто читает Ильяхова, знает про “заранее спасибо”. Это когда пытаются манипулировать — свалить задачу, важное дело — и как бы проявляют вежливость.</p>

<p>Сделай до понедельника, заранее спасибо. Напиши за ночь, заранее спасибо. Заполни сто полей, подтверди почту и телефон, заранее спасибо. Словом, все то, после чего думаешь “нет уж, спасибо”.</p>

<p>В определенных кругах “заранее спасибо” стало мемом. Например, обращаешься за помощью и в шутку добавляешь эту фразу. Только важно убедиться, что человек на том конце понимает юмор.</p>

<p>У “заранее спасибо” есть другая форма: “спасибо, что”. Как и в случае с оригиналом, она вызывает одну мысль — я и не собирался. Лучше объясни, что делать, а не благодари.</p>

<p>— Спасибо, что закрыли дверь!</p>

<p>— Поставь доводчик.</p>

<p>— Спасибо, убрали за собой!</p>

<p>— Что убирать? Куда убирать? Как быть с жидкостями?</p>

<p>Оказалось, “спасибо, что” есть и в английском языке. Когда-то давно я переписывался с коллегой, и он сказал “…and thank you for doing bla-bla-bla”. Я слегка удивился: вроде ничего не делал, а коллега благодарит. Начал было объяснять, но потом понял — это просто формулировка. Поручение в замысловатой форме, а thank you для того, чтобы я не обиделся. Типа такая вежливость. Bla-bla-bla я в итоге сделал, но душок от манеры речи остался.</p>

<p>Надо ли говорить, что подобные вещи хоть в русском, хоть в английском языке смотрятся плохо. Общее между ними одно — манипуляция. Просьбу всегда следует выражать явно. Затасканная фраза вместо прикрытия дает фальшь.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/interview-today/">Собеседование сегодня</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-01-30T00:00:00+00:00">
        Jan 30, 2023
    </time>

    <a href="/tag/interview/" rel="tag">interview</a>

</div>


            <div class="entry">
                
                    <p>Много лет назад я работал в Датаарте, писал код на Питоне. В какой-то момент мне доверили собеседовать кандидатов, и я заинтересовался темой. Смотрел видео, читал материалы и писал в блог по тегу interview. Считал, что хорошо разбираюсь в собеседованиях и все такое.</p>

<p>В выходом на удаленку я перестал собеседовать. Так складывается, что я пишу код, а решения о найме принимают другие люди. К тому же со временем мои взгляды на собеседование сильно изменились. Ниже — мысли о том, как я вижу собеседование сегодня. Как бы я собеседовал кандидата в свою воображаемую фирму, которой, конечно, у меня нет и вряд ли когда-то будет.</p>

<p>Итак, цель собеседования в том, чтобы определить, подходит кандидат или нет. Однако редко кто из собеседующих понимает суть процесса. Кандидату задают расплывчатые вопросы, ответы на которые прикидывают “на глазок”. Часто бывает, что один неудачный ответ затмевает остальные и собеседующий помнит только его. Или наоборот: кандидат не умеет писать код, но понравился эйчару манерой общения.</p>

<p>Мне кажется, на собеседовании должна быть только конкретика. Вопросы про слабости и неудачи, видение себя через пять лет и прочее я считаю дурным тоном. Сюда же относятся расплывчатые технические вопросы, например сравнение архитектур, Linux vs Windows и другие темы, где главное — как подвешен язык.</p>

<p>На предпоследнем собеседовании меня спросили, как работает компьютер. Я наплел всякую лажу про регистры, сумматоры и прерывания процессора, переходы и вот это все. Прошел (хотя не взяли по особым причинам). Но если бы не наплел, что бы это изменило?</p>

<p>На последнем собеседовании спросили, какую проблему в айти я бы решил, если б имел неограниченные ресурсы. Тоже наплел ахинею про зависимости, пакеты и прочее. Прошел, вот сижу и пишу на Кложе. Спрашивается, если бы не наплел, хуже бы тогда писал?</p>

<p>Еще одна категория вопросов, которые не стоит задавать — это родимые травмы языков. Например, что получится, если сложить объект и массив в Javascript? Не заглядывая в консоль Хрома, подумайте и объясните, какой будет результат и почему не иначе:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{}</span> <span class="o">+</span> <span class="p">{}</span>
</code></pre></div></div>

<p>Если вы знали заранее, это круто. Когда-то я тоже знал, но потом выкинул из головы, потому что понял: если на вход подать мусор, получим мусор. Ни к чему хранить в памяти подобные рецепты и делать мозг окружающим.</p>

<p>Приведу пример из Python, который задавал всем кандидатам на этот язык. Предположим, нужна холостая лямбда, которая не делает ничего. Можно ли описать ее как в коде ниже и что случиться, если его запустить?</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">nope</span> <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="k">pass</span>
</code></pre></div></div>

<p>Другой вариант этой задачи: лямбда, которая всегда бросает исключения:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">riser</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="k">raise</span> <span class="nb">Exception</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div></div>

<p>Прежде чем читать далее, предлагаю подумать и вам.</p>

<p>Ответ: код не запустится из-за ошибки синтаксиса. Анонимная функция в Питоне устроена так, что в теле может быть только выражение. В нашем случае <code class="language-plaintext highlighter-rouge">pass</code> и <code class="language-plaintext highlighter-rouge">raise</code> — это операторы, а не выражения, отсюда ошибка компиляции. Чтобы первая лямбда работала, нужно заменить pass на None.</p>

<p>Разумеется, ни один кандидат не ответил без подсказок, а я гордился, что знаю такое поведение. Хотя очевидно, это бред: что мешает поправить компилятор так, чтобы <code class="language-plaintext highlighter-rouge">pass</code> в лямбде возвращал <code class="language-plaintext highlighter-rouge">None</code>? Это дело нескольких строк, просто никому нет дела. Поэтому не парьте мозги окружающим.</p>

<p>В крупные компании, куда стоят толпы народу, практикуют метод “нам не нужны неудачники” из известного анекдота. Не смог перестроить красно-чёрное дерево на бумаге? Пошел вон. И неважно, что в будущем будешь перекладывать протобуфы из Кафки в базу — нужно как-то отсеять желающих. Эйчаров на всех не хватает, а искусственный интеллект, как обычно, заработает не сейчас, а в скором будущем (сейчас он работает, но неправильно: выбирает белых образованных мужчин).</p>

<p>Плохи те собеседования, где предлагают решить одну сложную задачу. Обычно она требует концентрации и гугления алгоритмов, что запрещено форматом интервью. Если добавить сюда стресс и неидеальную связь, станет ясно: задача служит скорее фильтром неудачника из прошлого абзаца.</p>

<p>Знакомый собеседовался в Яндекс на высокую должность. Архимаг по алгоритмам дал задачу на поиск строки с мудреными ограничениями. Главный критерий был в том, чтобы решить за O(N), а все очевидные решения давали квадрат. Эту задачу мы решали всем чатом, но так и не нашли ответа с O(N). Должности в Яндексе знакомый не получил.</p>

<p>Оглядываясь на этот эпизод, пытаюсь понять, какой в этом смысл? Зачем мучить человека одной задачей в течение часа? Разве сотрудник Яндекса работает в таких же условиях? — его заводят в комнату на час, и если он не найдет алгоритм, увольняют? Уж наверное он общается с коллегами, ходит в курилку и все такое. Почему кандидат, который был в шаге от решения, не имел возможности даже пройтись по комнате? Все тот же критерий неудачника.</p>

<p>Требовать от кандидата решить задачу на время значит поставить его в неудобное положение. Каждому известно, что мозг работает в двух режимах: сфокусированном и рассеянном. Их комбинация и продолжительность зависят от генетики. Возможно, кандидат нашел решение сразу после ответа “мы вам перезвоним”. Может быть, ему нужно сходить до туалета, чтобы смочить лицо. Или в магазин за молоком. Может, его знакомый уже решал такую задачу и может за пять минут поделиться опытом. Но собеседующего это не волнует: часы затрекал, таску закрыл.</p>

<p>Бинарная оценка — решил/не решил — по своей сути не отличается от оценки по размеру груди, знаку зодиака или цвету волос кандидата. Так можно, если вы условный Яндекс. Но важно понимать, что в основе этой градации лежит дурацкий принцип и пренебрежение к людям.</p>

<p>Правильным — хотя скорее, более нравственным — способом будет дать простую задачу и постепенно усложнять ее. Под усложнением я имею в виду постепенный охват смежных тем. От написания кода перейти к оценке алгоритма, поиску ошибок, тестам и их запуску. С таким подходом видны навыки кандидата и его потенциальный грейд.</p>

<p>На роль усложняемой задачи подходит всем известный FizzBuzz. И хотя многие о нем слышали, редкий кандидат решит его без ошибок. Подвох FizzBuzz в том, что, как правило, кандидат пишет логику как слышит, то есть проверяет сперва на 3, потом на 5, а затем на оба числа:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">101</span><span class="p">):</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Fizz"</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Buzz"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"FizzBuzz"</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</code></pre></div></div>

<p>Первое же число, которое делится на 3 и 5 — это 15 — даст сбой: для него сработает первая ветка, и вместо FizzBuzz получим Fizz. В этом нет ничего страшного, гораздо важнее, как довести ошибку до кандидата и оценить его действия.</p>

<p>Можно сказать, что в коде ошибка и предложить ее найти. Другой вариант — скинуть выхлоп правильного FizzBuzz и предложить написать тест. Это интересный случай, потому что навык писать тесты обязателен для программиста. Скорей всего, тест вынудит кандидата изменить код, чтобы вместо печати он строил список строк. Продвинутый кандидат перехватит вывод  консоли в файл или поток.</p>

<p>Если кандидат написал FizzBuzz, пусть даже с ошибкой в начале, и покрыл его тестами, поздравляю: это редкий случай. Берите и не спрашивайте о круглых люках, недостатках, хобби и прочей ерунде. Если нужен человек, который хорошо пишет код, и кандидат хорошо пишет код, какие могут быть вопросы?</p>

<p>Дополнительно можно спросить про SQL и оператор JOIN. Если кандидат выбрал пользователей и профили одним запросом с LEFT JOIN, это вообще круто. Отпадают все сомнения.</p>

<p>Если FizzBuzz приелся, замените его на другое задание с подвохом — факториал. Написать его можно сотней способов — apply, loop, recur — и каждый дает пищу для размышлений (например, хвостовая рекурсия: что такое, примеры). Подвох в том, что факториал нуля равен единице, и редкий кандидат помнит об этом. Как и в случае с FizzBuzz, предложите найти ошибку. Как будет лучше ее исправить? Добавить if/else или вести счетчик от нуля? Поправить аккумулятор? И конечно, написать и запустить тесты.</p>

<p>В таких заданиях я смотрю не столько на решение, сколько на принцип работы кандидата. Настроена ли у него среда разработки? Если он претендует на Кложу, а пишет код в блокноте, мягко говоря, это сомнительно. Как он работает с REPL-ом? Как выполняет код из редактора? Как запускает тесты — и пишет ли их в принципе? Простой FizzBuzz даст на порядки больше информации, чем зубодробилка с O(N).</p>

<p>Если вам интересно, моя градация следующая. Не смог написать FizzBuzz или факториал — извини, к нам еще рано. Если смог и исправил ошибку — джун. То же самое плюс варианты решений — мидл. Смог тесты — заявка на сеньора. Смог SQL — дай тебя поцелую!</p>

<p>Просто, линейно. Без круглых люков, ваших слабостей и провалов, кем-видения через пять лет и остального. Да, возможно, кандидат круто играет на гитаре, читает книги на английском и просто хороший человек. Но моя задача взять того, кто пишет хороший код и тесты — и умеет это прямо сейчас, а не обещает выучиться за две недели.</p>

<p>В заключение — краткие тезисы.</p>

<ul>
  <li>От кандидата вас интересует его последний год. Прерывайте, если он рассказывает, как заводил Doom на утюге в 11 лет. Это никому не интересно.</li>
  <li>Программиста берут, чтобы он писал код и тесты. Еще до собеседования попросите кандидата поделиться кодом. Подойдут гитхаб или приватные гисты. Если кода нет вообще никакого, это странно.</li>
  <li>Дайте простую задачу, в которой, тем не менее, легко ошибиться. Оцените, как кандидат найдет ошибку и исправит ее.</li>
  <li>Считаю, что тесты обязательны. Программист, который с ними не знаком, претендует в лучшем случае на мидла.</li>
  <li>Полезно узнать навыки SQL. База встречается почти в каждом проекте, чего не скажешь про Кафки-Редисы. Эти опционально.</li>
</ul>

<p>Как-то так.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/avatar2/">Аватар 2</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-01-16T00:00:00+00:00">
        Jan 16, 2023
    </time>

    <a href="/tag/movies/" rel="tag">movies</a>, <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/avatar/" rel="tag">avatar</a>

</div>


            <div class="entry">
                
                    <p>Что ж, сходил я на второй Аватар. Красиво, качество картинки просто космос. Хоть фильм и затянут, есть моменты, когда наслаждаешься кадрами, ни о чем не думая. Качество съемок, рендера, анимации тянет на миллион по какой угодно шкале.</p>

<p>Удивляет другое: если на фильм тратят космические деньги — сотни миллионов долларов, — то почему нельзя написать хороший сценарий? Чтобы он был целостный, а не как лоскутное одеяло — с лишними ответвлениями, забытыми персонажами и слабыми местами. Это правда тяжело понять.</p>

<p>Еще первый Аватар журили за избитый сюжет. Герой попадает к дикарям с корыстными целями, но переходит на их сторону. До какого-то момента он двойной агент, далее его раскрывают и выгоняют. Тогда он находит супер-девайс — меч, эликсир, дракона — и возвращает доверие. Происходит битва, и вождь как нельзя кстати гибнет. Герой становится вождем, получает королевство и царскую дочку.</p>

<p>При всей банальности у этого сюжета неоспоримый плюс — он целостный и законченный. Все персонажи приходят к своему финалу (победа, любовь, поражение), не остается открытых вопросов, внутренний и внешний конфликты решены. Зрители довольные расходятся по домам.</p>

<p>Во втором Аватаре пошли по принципу “добавим больше всего”. Получилось скомканно и путано; возникают вопросы о нестыковках. Перечислю некоторые из них.</p>

<p>В начале фильма показывают сильную женщину, главу поселения. Сразу ясно: она главная, и даже злодей в ее подчинении. При первой встрече она лупит боксерскую грушу, показывая — смотрите, я баба с яйцами. Очевидно, она должна быть в финале, чтобы ответить за вторжение. Что имеем в итоге? Ее показывают пару раз и забывают. Зачем вводить персонажа, если он не доходит до финала и не влияет на сюжет? Банальная глупость.</p>

<p>Далее: злодей, противник героя. Он настолько примитивен, что просто руки опускаются. Едва подорвался с больничной койки, как побежал убивать Джейка. Почему так глупо? Неужели его нисколько не коснулись вопросы самоидентификации: кто я, в каком мире я живу и для чего? Зачем убивать какого-то типа, который не причинил мне вреда? И это при том, что злодей прекрасно понимает — он просто копия того вояки, другое существо со своей волей.</p>

<p>Все списали на то, что он унаследовал воспоминания, плюс добавили сцену с останками на месте сражения из первой части. Но будем откровенны — посыл очень слабый. На базе этих предпосылок можно было бы сделать отличную концовку, кораздо более сложную и филосовскую (см. ниже).</p>

<p>Есть еще один персонаж, за счет которого можно было бы усложнить сюжет — это Паук, человек, который живет с Нави. Это классический двойной агент вроде Маугли — вроде бы свой, но помани пальцем, и он перейдет к врагу. Паренек не сдает Нави явно, но работает против них: учит злодея штучкам и языку, переводит на допросах. Из-за него гибнет старший сын. Что в итоге? Паука освобождают и принимают обратно. Молодец, че.</p>

<p>Классические сюжеты учат, что подобные вещи не сходят с рук так легко. За них платят самопожертвованием или в лучшем случе рискуют жизнью. Это и драма, и логическое завершение сюжета: накосячил — исправляй. Кроме того, при помощи Паука можно было устроить другую мощную концовку, о которой я тоже скажу ниже.</p>

<p>Еще одна нелепость — нет единства конфликта. В первой части люди добывали минерал, который стоил конских денег (8 миллионов за кило). Куда делся этот минерал в новой части, не ясно. Ладно, дана другая установка — переселение всех жителей Земли на Пандору. Однако в середине фильме оказывается, у людей новый промысел: ловля китов. Их рыбий жир дает вечную жизнь и стоит на Земле миллиарды. Получается нестыковка: в чем главная угроза — экспансия людей или убийство китов? С чем мы боремся? Я понимаю, что технически можно и то, и другое, но для сюжета это вредно: должна быть одна проблема.</p>

<p>Нелепые ответвления сюжета. Дети героя — подростки, и конфликт старших братьев уже оттягивает на себя внимание. Внезапно приемная дочь становится экстрасенсом, впадает в обмороки и прочее. В нелепой сцене она видит мать, которую куда-то засасывает. Эта история должна разрешиться во что-то серьезное, но на деле оказывается банальностью: девочка управляет растениями, которые губят единственный батискаф. В конце она позвала светлячков, чтобы осветить путь побега, но это тоже слабо. Тему экстрасенсов надо было либо убрать, либо развить за счет чего-то другого.</p>

<p>Фильм не дает ответа на вопрос: как все-таки выгнать понаехавших людей. В фильме показано даже не поселение, а крупный город с инфраструктурой — поездами, рельсами и прочее. А герой весь фильм убивал один-единственный корабль. Да, много техники и людей погибло, но в масштабах города это капля в море. В итоге опять блуждающий конец: взяли сражение, но до победы далеко, а тут еще и злодей выполз из-под руин. Совершенная банальность.</p>

<p>Весь фильм меня бесило, что играют на чувствах родителя. Три раза повторяется паттерн “дети убежали” -&gt; “попали в плен” -&gt; “пошли их спасать”. Как родитель я не принимаю сюжет, где гибнет ребенок. Это хтоническое дно, так просто нельзя. Сотни дикарей плывут на пулеметы и хоть бы что, а подающего надежды сына убили. Сценаристы спохватились, что надо кого-то убить из наших. Убили, да не того.</p>

<p>Нормально, когда убивают родителей или они жертвуют собой. Тут все логично: отец ушел, его дело продолжил сын. Но когда наоборот, это полное днище. Решили добавить драмы, но сделали топорно, особенно при том, что была сотня способов повернуть сюжет — тут не хватает приличных слов. В какой-то момент возникла мысль — блин, увезите детей в горы и заприте в шкаф. Победите злодеев, а потом выпускайте. Минус две трети всех проблем.</p>

<p>Пока на экране показывали медуз и карасей, я все думал о том, как сложится финал. И надумал по крайней мере три концовки, которые опишу ниже.</p>

<p>Первая связана с идентификацией злодея. Как я писал выше, он крайне туп — при всем интеллекте человека действует как биоробот. Его путь надо было сделать похожим на путь героя из первой части. Сначала он ловит героя как человек без особого успеха. Затем изучает повадки и язык Нави. Далее наступает внутренний конфликт — он не понимает, кто он: человек или Нави. Воспоминания полковника теряются, их заменяют новые ощущения.</p>

<p>В штабе видят, что злодей неуправляем и его пытаются убить. Злодей переходит на сторону Нави и вместе с героем берет город. В эпичном финале убивают бабу с яйцами, что снимает вопрос о ее нужности. Бывший злодей гибнет или жертвует собой, искупляя причиненное им зло. Его подельники образуют в лесу поселение. Чтобы помочь им выжить и разнообразить род, часть племени героя переходит к ним. В эпилоге показано, что на Земле отказались от программы клонировать Нави. Экспансию на Пандору откладывают, потому что ни одна попытка не окупила себя.</p>

<p>Эта концовка просто супер. Все конфликты решены, все приходят к финалу, ничего лишнего. Что мешало сделать так же?</p>

<p>Вторая концовка связана с Пауком. Парнишка должен был сыграть роль Дарта Вейдера — сперва помогает творить зло, но в итоге встает на путь истинный и искупляет грехи. В финальной битве злодей побеждает, надежды нет. Его сынуля вертит головой, борется внутри. Затем затаскивает папулю в тонущий батискаф и говорит: я помогал тебе творить зло, исправляю вину. Все это с пафосом, под крики и слезы. Есть шанс спастить самому, но это дело чести. Злодей мертв, предатель пожертвовал собой, все сходится, конфликт закрыт.</p>

<p>Третью концовку я не успел как следует продумать, вот ее черновик. Из самопожертвования Паука, рыбьего жира и девочки-экстрасенса можно было слепить оживление погибшего сына. Еще лучше — перенести душу сына в тело Паука. Почему нет, ведь в первой части такое было? Эту версию нужно проработать, чтобы избежать глупой сказочности; однако в ней нет ничего, что противоречит фильму. Замечу, что это тоже хеппи-энд: сын вроде бы и умер, но воскрес в другом облике. Паук тоже умер, но облик остался. Стал два-в-одном, все довольны. Тема бессмертия и дочки-экстрасенса раскрыта, все конфликты решены.</p>

<p>Все это придумал обычный программист из Воронежа. Почему сценаристы из Голливуда со ставкой миллион в час не могли так же?</p>

<p>Несколько слов в завершение. Великий писатель Антон Чехов высказал простой тезис: если на стене висит ружье, в финале оно должно выстрелить. Это касается буквально каждой мелочи в произведении. Показал персонажа — либо он одержит победу, либо умрет. Показал чудо-кристалл — либо он поможет герою, либо навредит злодею. У кого-то приступы ясновидения — в финале это расстроит замыслы врага. Все в том же роде, исключений не бывает. Все идет к своему финалу: люди, предметы, явления.</p>

<p>Из кинозала я вышел вовсе не раздраженный, а вполне сдержанный. Сняли продолжение — спасибо и на этом. Огромный труд и столько пищи для ума. Новая веха в кинематографе.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/files2/">Возня с файлами (2)</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-01-06T00:00:00+00:00">
        Jan 6, 2023
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/files/" rel="tag">files</a>, <a href="/tag/s3/" rel="tag">s3</a>, <a href="/tag/yandex/" rel="tag">yandex</a>, <a href="/tag/amazon/" rel="tag">amazon</a>

</div>


            <div class="entry">
                
                    <p>Это продолжение <a href="/files/">прошлого поста</a> на тему синхронизации файлов. Небольшое дополнение и руководство как все настроить.</p>

<p>Одно время я бекапил файлы в S3 при помощи <a href="https://aws.amazon.com/cli/">aws cli</a> — утилиты на питоне. Она работает просто: указываешь источник и приемник, и файлы переливаются из первого во второе. Источником и приемником могут быть локальная папка или бакет S3. В случае с S3 клиент посылает HEAD-запросы, чтобы сберечь трафик.</p>

<p>Схема хороша тем, что протокол S3 поддерживает масса сторонних сервисов, например Яндекс.Облако, Digital Ocean, Exoscale (где автор имел честь работать) и другие. Если что-то пойдет не так, переезд сводится к изменению урла в настройках.</p>

<p>Для айфона нашлось приложение <a href="https://apps.apple.com/us/app/aws-s3-manager/id1352683230">S3 Manager</a>, написанное на коленке одним добрым человеком. Показывает файлы из облака, умеет сохранять локально. Спартанское, немного топорное, но в этом и прелесть. Работает с Яндексом, проверял лично.</p>

<p>Недостаток aws cli в том, что это односторонняя синхронизация. Сюда же относятся утилиты вроде rsync и аналоги. Их объединяет то, что одна из сторон считается верной, а другая подстраивается под первую. Например, если синхронизировать папки A и B, то файлы из А окажутся в В. Однако если в B были новые файлы, то в лучшем случае они игнорируются, а в худшем удаляются. Двойной синк по принципу сначала из А в В, а потом наоборот, эту проблему не решает.</p>

<p>Забегая вперед, скажу, что в итоге поставил Syncthing, который пробовал еще год назад. Однако в процессе экспериментов узнал о замечательной программе <a href="https://www.cis.upenn.edu/~bcpierce/unison/">Unison</a>, и теперь коротко ее опишу.</p>

<p>Это консольная утилита, написанная на OCaml. Работает на каждом утюге, включая Солярис. Синхронизирует два пути с учетом слияния файлов. Для этого программа ведет свой реестр и по нему сверяеся, что делать с файлами.</p>

<p>Путь может быть удаленным (на другом машине). В этом случае операции с файлами протекают по SSH. У программы два режима: интерактивный (ручной) и автоматический. В первом случае, если встретится конфликт, программа запрашивает действие. Понравился богатый выбор, в том числе разрешение конфликтов при помощи сторонних утилит (<code class="language-plaintext highlighter-rouge">kdiff</code>, <code class="language-plaintext highlighter-rouge">meld</code>), что очень удобно.</p>

<p>В автоматическом режиме (для скриптов и crontab) интерактивного ввода нет, все разруливается флагами.</p>

<p>Unison оставил прятное впечатление. Видно, что программе много лет: огромное число функций, подробная докуметация. Но смутило, что Unison не работает в режиме демона и нуждается в регулярном запуске по крону. Плюс не очень подходит к Винде из-за SSH — как там его настроить даже не представляю.</p>

<p>Закончил эсперименты тем, что поставил на удаленной машине Syncthing и работаю через него. Полагаю, о Syncthing знают все, поэтому нет смысла расписывать его возможности. Ниже — инструкция о том, как сделать все максимально быстро.</p>

<p>Итак, понадобится VPS с большим диском. Путем гугления я вышел на AlphaVPS, где за три евро в месяц можно взять машину с диском на 256 гигабайт (а за три с половиной — на 512). Диски, ясное дело, не SSD, но в моем случае это не важно.</p>

<p><img src="/assets/static/aws/files2/1.jpeg" /></p>

<p>Заказываем машину с Ubuntu 22, заходим под рутом. Создаем пользователя:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>useradd <span class="nt">-s</span> /bin/bash <span class="nt">-d</span> /home/ivan/ <span class="nt">-m</span> <span class="nt">-G</span> <span class="nb">sudo </span>ivan
passwd ivan
</code></pre></div></div>

<p>Перекидываем SSH-ключ:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-copy-id <span class="nt">-i</span> ~/.ssh/ivan.pub ivan@123.123.123.123
</code></pre></div></div>

<p>В <code class="language-plaintext highlighter-rouge">~/.ssh/config</code> прописываем алиас</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Host alpha
    HostName 123.123.123.123
    IdentityFile ~/.ssh/ivan
    User ivan
</code></pre></div></div>

<p>Далее заходим по <code class="language-plaintext highlighter-rouge">ssh alpha</code> и вводим команды:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"deb https://apt.syncthing.net/ syncthing stable"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/syncthing.list
curl <span class="nt">-s</span> https://syncthing.net/release-key.txt | <span class="nb">sudo </span>apt-key add -
<span class="nb">sudo </span>apt update
<span class="nb">sudo </span>apt <span class="nb">install </span>syncthing
</code></pre></div></div>

<p>Чтобы Syncthing запускался в автозагрузке, добавим его в systemctl:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl <span class="nb">enable </span>syncthing@ivan.service
</code></pre></div></div>

<p>Остается включить:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>systemctl start syncthing@ivan.service
</code></pre></div></div>

<p>Syncthing настраивается через веб-интерфейс, однако он доступен только с локального хоста. Поднимаем SSH-тоннель:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-N</span> <span class="nt">-L</span> 18384:localhost:8384 alpha
</code></pre></div></div>

<p>Теперь откройте браузер на странице localhost:18384 — появится интерфейс Syncthing на удаленной машине. Ну а дальше вы сами знаете: создаете папки, связываете машины друг с другом и так далее.</p>

<p>На текущий момент у меня VPS за три евро и три компа: два мака и винда. Вроде бы работает, файлы подхватываются. К сожалению, Syncthing не так гибок в плане текстовых файлов, как Unison: умеет только брать файл А или В, а про слияние сторонней тулзой ничего не знает. Однако для текстовых файлов есть git.</p>

<p>В общем, ничего нового в плане синхронизации файлов я не открыл. Это скорее инструкция для тех, кто не хочет париться с терминалом, гуглением команд и прочей болью.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/no-update/">Обновления</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-01-04T00:00:00+00:00">
        Jan 4, 2023
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Современный софт огорчает просьбами обновиться. С какой-то поры этой заразы стало так много, что не знаешь, куда деваться. Открыл Siblime Text, а он предлагает обновиться:</p>

<p><img src="/assets/static/aws/update/1.jpeg" /></p>

<p>Открыл Dash, программу офлайн-документации, а она предлагает обновиться:</p>

<p><img src="/assets/static/aws/update/3.jpeg" /></p>

<p>Открыл Wireshark для просмотра трафика, а она предлагает обновиться:</p>

<p><img src="/assets/static/aws/update/6.jpeg" /></p>

<p>Firefox в конец обнаглел: теперь обновления нельзя отключить. Ставить обязательно: либо с подтверждением, либо без него. Справа постоянно висит нотификация.</p>

<p><img src="/assets/static/aws/update/2.jpeg" /></p>

<p>Туда же скатился Телеграм: появляется блямба “обновить”, которая молозит глаза. Конечно, никто не принуждает, дело добровольное. Просто попробуй посиди с ней — долго не протянешь.</p>

<p><img src="/assets/static/aws/update/5.jpeg" /></p>

<p>Все это приводит к тому, что, запуская программу, я уже не жду, что она работает с первой секунды. Обязательно выскочит диалог с предложением обновиться или прокликать новые разделы меню. Это какое-то свинство: сел работать, а в лицо несут пургу.</p>

<p>Почему-то ни один диалог не отвечает на вопрос: какая польза мне в обновлении. Программа работает, покрывает все нужды, жалоб нет. С какой стати тратить время на обновление? Если найдется баг, я выберу “О программе” → “Проверить обновления” и тогда обновлюсь.</p>

<p>Причина в том, что разработчики забывают об этике. Некрасиво, когда программа делает то, о чем ее не просили. Это понимали еще пятьдесят лет назад во времена Unix. А сегодня понятия цифровой этики не существует. Так быть не должно.</p>

<p>Вспомнился частный случай с Гуглом — организации, которую трудно заподозрить в желании сделать кому-то удобно. Когда браузер Хром вошел в фазу взрывного роста, он обновлялся даже не каждый день, а несколько раз в день. В результате обновления сделали полностью скрытыми от пользователя. Это потребовало усилий, но они того стоили. Уж если корпорация решила за меня, что и как обновлять, то и спрашивать согласия не нужно. Иначе зачем?</p>

<p>Ужасно, но подход с обновлением переходит в консольные утилиты, например pip и npm. Когда работал с Питоном, жутко бесило сообщение pip: воу-воу, у тебя версия, 2.5.1, а последняя — 2.5.3, поставь немедленно! Перед каждой командой pip ломился в сеть с GET-запросом, ожидая ответа. Это такая тупость, что даже руки опускаются. Ясное дело, что обновления отключаются какими-то переменными среды, которые вечно гуглишь на StackOverflow.</p>

<p>В свое время я ставил программы для работы с текстом, например <a href="https://getoptima.ru/">Optima</a>. Минимальный интерфейс, интеграция с Главредом, красиво. Но уже на второй день он распахнул диалог с предложением обновиться. У меня в таких случаях одна мысль — пошел на х..й. Грубовато, но это первое, что приходит в голову. Вздумал прервать меня за работой? Отправляйся в ведро: “приложения” → Optima → “удалить”.</p>

<p>Идеально в этом плане ведет себя Emacs. Каждый раз я ставлю его с опозданием на две-три мажорных версии, а он хоть бы слово сказал. Поставил 25.1, хотя доступен 28.2 — значит, так надо: версия 25.1 просто работает. Сложно что ли сделать так в других программах?</p>

<p>Бесконечное стремление вперед просто вымораживает. Если бы от него был толк! Сколько я вижу бажного кода, написанного в последних версиях JetBrains! Сколько уродской верстки, сделанной в свежем In Design! Сколько вырвиглазного текста, набранного в последнем Ворде!</p>

<p>Обновившись по самые помидоры, программист по-прежнему не пишет тесты к своему коду. Подставляет параметры в SQL функцией format. Посылает тысячу запросов к базе в цикле. Что, IDE не подсвечивает? Подожди обновлений — может, со следующим релизом подсветит.</p>

<p>В общем, разработчики: успокойтесь с обновлениями. Вашими усилиями почти не осталось софта, который работает молча. Дайте уже спокойно поработать.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/post-2022/">Как я провел 2022 год</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2023-01-02T00:00:00+00:00">
        Jan 2, 2023
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    
<p>Появилось время написать что-нибудь в блог. Ниже — коротко о том, чем занимался раньше и что делаю сейчас.</p>

<p>После увольнения из Exoscale я устроился стартап Clashapp (ныне <a href="https://huddlesapp.co/">Huddles</a>). Это мобильное приложение с короткими видео и встроенной валютой. Вместе с коллегами пилили бекенд на Кложе. В техническом плане проект был очень продвинут, многие вещи взял на заметку. Тимлидом у нас был <a href="https://www.linkedin.com/in/eric-dvorsak-58336837/">Eric Dvorsak</a>, и работать с ним было одно удовольствие.</p>

<p>К сожалению, стратап не потянул финансовую часть. К концу года руководство сообщило, что “не будет возражать, если сотрудники найдут другую работу”. Первый раз в жизни услышал такую формулировку.</p>

<p>Должен признать, что с поиском удаленной работы из России сейчас беда. Все требуют релокации, иностранные счета особо не помогают. К счастью, нашлись добрые люди, которые помогли устроиться в автралийский стартап.</p>

<p>Работа в Австралии отличается графиком. Разница с офисом семь часов, пересекаюсь с руководителем буквально один час в день. Это первый случай в моей практике, когда разница столь велика. Есть и плюсы, и минусы. С одной стороны, приучает работать автономно, задавать вопросы, проверять задачи на точность. Полезно иметь пул задач, чтобы в случае затыка с одной переключиться на другую.</p>

<p>С другой стороны, пересечение всего лишь час в день — неописуемое благо. Отбрехался с утра — и свободен: никаких ретро, синков, тренингов, медитаций, эстимейтов, постмортемов и что там еще. Никто не потревожит, никто не вломится в зум. Все асинхронно, красота!</p>

<p>Однако сломался привычный режим работы. Дело в том, что уже несколько лет я провожу дни одинаково: когда прихожу на работу, сперва трачу час на книгу, блог или библиотеки. Затем перекус и тупняк в интернет. Затем утренний созвон и работа на оставшийся день. Если я потратил час на себя, на остальное мне уже плевать: упал прод или нет, закрыли спринт или нет. Самое главное уже случилось, а остальное рутина. И когда этого часа не было, начинаю злиться.</p>

<p>Так вот, из-за разницы во времени с Автралией каждое утро теперь начинается со звонка. Час на личные дела либо уходит во вторую половину дня, либо выпадает. Пытаюсь перестроить режим так, чтобы этого не было.</p>

<p>Последние месяцы мало пишу в блог, потому что занимаюсь второй книгой. Много времени потратил на редактирование глав. Перед праздниками создал <a href="https://github.com/igrishaev/clj-book2">репозиторий</a>, желающие могут посмотреть. Книга уже собирается в Докере, то есть прошла стадию глубокого черновика.</p>

<p>Немало нервов мне стоил один европейский банк (да, на Кложе). Прошел собеседование без проблем, а дальше мне отказали из-за нежелания украинских и польских членов команды работать со мной. По прошествии полугода подался туда снова, и на этот раз сначала да, потом нет. Потом опять были торги и условия, связанные с релокацией и политической обстановкой. Насколько я понял, можно было покривить душой и пролезть, но после раздумий я отказался. Размышляя над всем этим, представил себя осликом, которого манят морковкой в нужном кому-то направлении. Нет, работа никуда не убежит, я сам решу, когда придет время.</p>

<p>Все это, конечно, чепуха по сравнению с тем, что выпало на долю украинских коллег. С некоторыми я поддерживаю связь и знаю о происходящем из первых уст. Увольнения и трудности с поиском работы не сравнятся с услышанным.</p>

<p>Помогаю выпускнице, с которой делали диплом, найти работу Питон-джуниором. Ох непросто стало сейчас.</p>

<p>В планах на 2023 год — выпустить книжку.</p>

<p>Поздравляю всех с наступившим Новым годом. Желаю больше стойкости к стрессу и информационному шуму. Меньше пропускать через себя, чтобы не сойти с ума. Оставаться людьми. Это, пожалуй, самое важное.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/en/clojure-guide/">Clojure Coding Guide</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-12-03T00:00:00+00:00">
        Dec 3, 2022
    </time>

    <a href="/tag/clojure/" rel="tag">clojure</a>, <a href="/tag/code/" rel="tag">code</a>

</div>


            <div class="entry">
                
                    
<p><em>TL;DR: this is a detailed description of how to write good Clojure code. It’s based on my 8 years of experience with Clojure for both commercial purposes and side projects as well. Some parts of this document repeat the <a href="https://github.com/bbatsov/clojure-style-guide">well-known guide</a> by Bojidar. Other parts instead break the conventional rules in Clojure development. For such cases, I give an explanation of why they are what they are. Everything written below has come from practice, and I hope you’ll find it useful.</em></p>

<h2>

    Table of Contents

</h2>

<ul id="toc-item-clojure-guide">
  <li><a href="#parentheses" id="toc-item-clojure-guide-parentheses">Parentheses</a></li>
  <li><a href="#namespaces" id="toc-item-clojure-guide-namespaces">Namespaces</a></li>
  <li><a href="#variables-and-defs" id="toc-item-clojure-guide-variables-and-defs">Variables and defs</a></li>
  <li><a href="#atoms" id="toc-item-clojure-guide-atoms">Atoms</a></li>
  <li><a href="#exceptions" id="toc-item-clojure-guide-exceptions">Exceptions</a></li>
  <li><a href="#assertions" id="toc-item-clojure-guide-assertions">Assertions</a></li>
  <li><a href="#functions" id="toc-item-clojure-guide-functions">Functions</a></li>
  <li><a href="#arguments" id="toc-item-clojure-guide-arguments">Arguments</a></li>
  <li><a href="#destructuring" id="toc-item-clojure-guide-destructuring">Destructuring</a></li>
  <li><a href="#keywords" id="toc-item-clojure-guide-keywords">Keywords</a></li>
  <li><a href="#keyword-processing" id="toc-item-clojure-guide-keyword-processing">Keyword processing</a></li>
  <li><a href="#type-hints" id="toc-item-clojure-guide-type-hints">Type hints</a></li>
  <li><a href="#naming" id="toc-item-clojure-guide-naming">Naming</a></li>
  <li><a href="#lines-and-indentation" id="toc-item-clojure-guide-lines-and-indentation">Lines and indentation</a></li>
  <li><a href="#maps" id="toc-item-clojure-guide-maps">Maps</a></li>
  <li><a href="#let" id="toc-item-clojure-guide-let">Let</a></li>
  <li><a href="#case-cond" id="toc-item-clojure-guide-case-cond">Case, cond</a></li>
  <li><a href="#macros-indentation" id="toc-item-clojure-guide-macros-indentation">Macros indentation</a></li>
  <li><a href="#java-interop" id="toc-item-clojure-guide-java-interop">Java interop</a></li>
  <li><a href="#java-like-classes" id="toc-item-clojure-guide-java-like-classes">Java-like classes</a></li>
  <li><a href="#reuse-java-classes" id="toc-item-clojure-guide-reuse-java-classes">Reuse Java classes</a></li>
  <li><a href="#systems-and-components" id="toc-item-clojure-guide-systems-and-components">Systems and Components</a></li>
  <li><a href="#collections" id="toc-item-clojure-guide-collections">Collections</a></li>
  <li><a href="#clojurespec" id="toc-item-clojure-guide-clojurespec">Clojure.spec</a></li>
  <li><a href="#types--records" id="toc-item-clojure-guide-types--records">Types &amp; Records</a></li>
  <li><a href="#named-sections" id="toc-item-clojure-guide-named-sections">Named sections</a></li>
  <li><a href="#comments" id="toc-item-clojure-guide-comments">Comments</a></li>
  <li><a href="#trailing-spaces" id="toc-item-clojure-guide-trailing-spaces">Trailing spaces</a></li>
  <li><a href="#commented-code-and-dev-sections" id="toc-item-clojure-guide-commented-code-and-dev-sections">Commented code and dev sections</a></li>
  <li><a href="#tests" id="toc-item-clojure-guide-tests">Tests</a></li>
  <li><a href="#coreasync" id="toc-item-clojure-guide-coreasync">Core.async</a></li>
  <li><a href="#amazonica" id="toc-item-clojure-guide-amazonica">Amazonica</a></li>
  <li><a href="#libraries" id="toc-item-clojure-guide-libraries">Libraries</a></li>
</ul>

<h2 id="parentheses">Parentheses</h2>

<p>Let’s start with something obvious yet worthy of repeating. When writing Lisp code, don’t balance parentheses as you did before in Python or JavaScript. Not like this:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">time</span><span class="w">
 </span><span class="p">(</span><span class="nb">doseq</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w">
   </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">a</span><span class="p">)]</span><span class="w">
     </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w">
     </span><span class="p">)</span><span class="w">
   </span><span class="p">)</span><span class="w">
 </span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>But this:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nb">time</span><span class="w">
 </span><span class="p">(</span><span class="nb">doseq</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="mi">3</span><span class="p">]]</span><span class="w">
   </span><span class="p">(</span><span class="k">let</span><span class="w"> </span><span class="p">[</span><span class="n">b</span><span class="w"> </span><span class="p">(</span><span class="nb">*</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">a</span><span class="p">)]</span><span class="w">
     </span><span class="p">(</span><span class="nb">println</span><span class="w"> </span><span class="n">b</span><span class="p">))))</span><span class="w">
</span></code></pre></div></div>

<p>The same rule applies to collections. The following code fragments look weird in Clojure:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">mapping</span><span class="w"> </span><span class="p">{</span><span class="w">
   </span><span class="no">:name</span><span class="w"> </span><span class="s">"Ivan"</span><span class="w">
   </span><span class="no">:email</span><span class="w"> </span><span class="s">"test@test.com"</span><span class="w">
</span><span class="p">})</span><span class="w">

</span><span class="p">(</span><span class="k">def</span><span class="w"> </span><span class="n">numbers</span><span class="w"> </span><span class="p">[</span><span class="w">
  </span><span class="mi">1</span><span class="n">,</span><span class="w">
  </span><span class="mi">2</span><span class="n">,</span><span class="w">
  </span><span class="mi">3</span><span class="w">
</span><span class="p">])</span><span class="w">
</span></code></pre></div></div>

<p>It is a strong rule for every Lisp dialect and you’ve got to get on with it. The sooner you get an editor powered with a plugin to manage parenthesis the better it is for you as a programmer. Emacs + Paredit is a good choice but it’s a matter of preference.</p>


                    <p><a href="/en/clojure-guide/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/whos-guilty/">Кто виноват</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-11-25T00:00:00+00:00">
        Nov 25, 2022
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Наверное, вы слышали: чтобы получить правильный ответ, задавайте правильный вопрос. И наоборот: неправильный вопрос займет массу времени и сил, но ответа не даст. Удивительно, что многие вопросы, что мы задаем, поставлены неверно. Один из них звучит как в заголовке — кто виноват?</p>

<p>Стоит чуть-чуть подумать, как станет ясно, что это неправильный вопрос. Так ли важно, кто именно виноват? Что это дает? Как виновность поможет исправить ситуацию и предотвратить ошибку в будущем?</p>

<p>Если взять историю любой катастрофы — Титаник, Чернобыль — везде окажется, что виноваты не люди на местах. Это очень желанно руководству, особенно если исполнитель умер. Непрофессиональные операторы взорвали реактор. Беспечная команда нашла на айсберг, и делу конец.</p>

<p>Да что катастрофы, вспомним истории с падением прода. Всегда оказывается, что программист Вася запустил опасный скрипт с кредами от прода, которых у него быть не должно. Креды дал ему под честное слово админ во время попойки в баре. Креды выдаются по заявке, нужно собрать пять подписей, но гендиректору некогда, его зам на больничном и так далее.</p>

<p>Когда сотрудник Гитлаба удалил базу с прода, выяснилось много вещей. Бекапы не работали, оповещения об ошибке бекапов тоже не работали. Пока петух не клюнул, никто не волновался.</p>

<p>Какой-то чел из системы очистки воды оставил штат без питья на неделю. Оказалось, он подключался из дома к рабочей машине по TeamViewer, чтобы не ездить по ночам. Десять раз писал начальству с просьбой сделать доступ по впн, но просьбы даже не рассмотрели.</p>

<p>Представим теперь, что условного Васю взяли за шкирку и объявили: ты виноват. Кому от этого легче? Даже если Васю уволят, ситуация повторится в будущем.</p>

<p>Верный признак, что вопрос вины неверно поставлен — он дает большой выхлоп. Вася виноват, но… и дальше экраны текста, что на самом деле чего-то там. Так быть не должно.</p>

<p>Вместо “кто виноват” нужно спрашивать “кто несет ответственность”. Это все меняет: оказывается, вина и ответственность — разные вещи, которые делятся между людьми. Виноват один, отвечает другой. Как они разрулят между собой — не наше дело.</p>

<p>Вася уронил прод и он виноват. Но отвечает техдиректор, потому что у Васи в принципе не должно быть доступа к проду.</p>

<p>Оператор взорвал реактор и он виноват. Отвечают те, кто проектировал, вводил в эксплуатацию и тестировал.</p>

<p>Капитан навел корабль на айсберг и он виноват. За нехватку шлюпок, за неумение команды спасти пассажиров отвечает перевозчик.</p>

<p>Пьяный устроил дебош в клубе. Он виноват, но отвечает охрана, которая его пропустила.</p>

<p>Сотрудник слил базу клиентов. Он виноват, но отвечает фирма — юрлицо. Будьте любезны штраф в десять тысяч за каждую строку. Сливы сразу прекратятся.</p>

<p>Водитель в Воронеже сбил насмерть коляску с грудным ребенком. Оказалось, у него десятки неоплаченных штрафов за последние полгода. Он виноват. Но пусть начальник ГИБДД объяснит, почему водителю не аннулировали права.</p>

<p>Правило: когда случилось что-то из ряда вон, ищите ответственного, а не виновного. Когда найден первый, второй появится автоматически. Но не наоборот: чаще имеем виновного Васю, с которого нечего взять, а ответственных нет.</p>

<p>Бывает, что ответственный известен, но сыскать с него ничего нельзя. Это значит, игра заведомо проиграна. В следующий раз не ведитесь.</p>

<p>Сказанное имеет прямое отношение к сегодняшней ситуации. В России часто ищут виновных и находят их в лице американских президентов, англосаксов, оппозиции, инагентов и бог знает кого еще. Каждый раз, когда это слышу, в голове вопрос: ладно, пусть виноваты англосаксы, но кто несет ответственность? Если никто, что толку мне знать?</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/geointernet/">Интернет и геополитика</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-11-03T00:00:00+00:00">
        Nov 3, 2022
    </time>

    <a href="/tag/web/" rel="tag">web</a>

</div>


            <div class="entry">
                
                    <p>На заре интернета было забавное по текущим временам мнение. Якобы он станет средой, которая объединит людей, отбросив границы и политические взгляды. Что противоречия физического мира отпадут, и все найдут согласие. Что коллективный разум возобладает над политиками и превзойдет их.</p>

<p>Забавно видеть, что все из этого не только не сбылось, но и наоборот — интернет все больше становится геополитизированным. Увы, в нашу жизнь пришла геополитика — смесь двух терминов, каждый из которых тащит худшее прошлого века: политику и территории. Что из этого вышло, мы наблюдаем сегодня.</p>

<p>Современный интернет геополитизирован, потому что регулируется двумя принципами: политикой и географией. Крупные сервисы блокируют людей по их положению на планете. Страны блокируют сервисы по политическим причинам. Большая часть запрещенного контента — это то, что запрещено режимом, причем не только в России.</p>

<p>Тезис о едином пространстве разваливается на глазах. Все меньше остается сервисов, куда можно попасть, не испытывая ограничений. Твиттер(1) и Инстаграм(2) заблокированы Россией. На Госуслуги и Налог.ру нельзя зайти, если ты не в России. Если уехал, ставь московский ВПН, что до недавнего времени звучало анекдотом.</p>

<p>Порнхаб в одной стране разрешен, в другой запрещен, в третьей — только с авторизацией через местную соцсеть. Grammarly не работает с российскими IP, нужен ВПН. Украинские сайты показывают россиянам плашку с расчлененкой.</p>

<p>Надоели сайты, защищенные Cloudflare. При каждом заходе видишь уродский экран с задержкой в 5-10 секунд. Иногда Cloudflare требует капчу с гидрантами и велосипедами. Двадцать минут — и сессия рвется, проверка начинается снова.</p>

<p>Гугл и Ютуб боятся ВПН как огня. С ним Ютуб показывает капчу — не дай бог ты пройдешь мимо Большого Брата. Фейсбук, Твиттер и аналоги блокируют Тор. Им лучше знать, что безопасно, а что нет.</p>

<p>Про Китай писать нет смысла.</p>

<p>Сервисы все больше ведут себя как государства. Пользователь, чей IP вызывает малейшее подозрение, приравнивается к нелегалу, незаконно переходящему границу. Его надо схватить и подвергнуть деанону.</p>

<p>Фейсбук и Твиттер открыто занимают позиции в социальных конфликтах США: выборы, BLM и так далее. Получить бан за поддержку Трампа теперь в порядке вещей. Не лучше ситуация и у нас, когда ВК и Мейл.ру сливают данные о тех, кто состоит в группах “оппозиции”.</p>

<p>В той или иной мере огораживается каждый второй сайт. Со включенным ВПН нельзя передать показания в энергослужбу или заказать б/у книгу. Знакомый справедливо заметил, что сегодня проще иметь два ноута — настроенный под иностранный сайты и для внутренних нужд.</p>

<p>Выделять какую-то страну в том плане, что они блокирую больше, чем остальные, нет смысла — это тренд. Интернет — это общение и информация, и государство всегда болезненно реагирует, когда то или другое выходит из под контроля. И неважно, какой политический строй: демократия, автократия или тоталитаризм. Благородный предлог найдется всегда: терроризм, антиваксы, тридевятая колонна. В каждой стране свои пугалки про черную руку и простыню.</p>

<p>Очевидно, никакого свободного интернета нет, более того — не интернет двигает обществом, а двигают им. Современная дурь оседает в интернете и приводит к ограничениям по IP, странам, действиям режима и остальному.</p>

<p>Получится ли сделать что-нибудь другое? Возможно, но это будет принципиально иной вид связи. Он должен быть максимально простым для пользователя и невозможным для блокировок. Примерно как блокчейн, хоть я и не люблю аналогии с криптой. К сожалению, лично мне этот новый вид связи трудно представить хотя бы приблизительно.</p>

<p><em>1, 2 – считаются экстремистскими организациями или вроде того.</em></p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/mobile-deg/">Мобильная деградация</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2022-10-31T00:00:00+00:00">
        Oct 31, 2022
    </time>

    <a href="/tag/web/" rel="tag">web</a>, <a href="/tag/ui/" rel="tag">ui</a>, <a href="/tag/github/" rel="tag">github</a>

</div>


            <div class="entry">
                
                    <p>Последнее время я делю экран пополам: слева браузер, справа Емакс. Такой сетап нужен для определенной работы, связанной с редактированием текста.</p>

<p>Заметил, что с браузером происходят странные вещи. Стоит только поджать окно на жалкие пиксели, включается мобильный режим. Лучше всего это наблюдать на Гитхабе. Нормальный режим:</p>

<p><img src="/assets/static/aws/mobdeg/1.jpg" /></p>

<p>Но стоит уменьшить окно на пиксель, как вдруг:</p>

<p><img src="/assets/static/aws/mobdeg/2.jpg" /></p>

<p>Кто-нибудь в курсе, зачем это? Код — самое главное на этой странице — пропал под выпадашку, хотя места достаточно. Появилась адская разреженность, кнопки сплющились, как будто по ним проехали катком. Кто вообще просил? Остается выругаться и расширить окно обратно.</p>

<p>Досадно от того, что кто-то сидел над этой хитрожопой версткой, трекал часы в Джире, презентовал менеджерам. А пользователь мечтает развидеть и вернуть все взад.</p>

                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page31" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 32 из 91</span>
        
        <a href="/page33" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="https://t.me/igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
