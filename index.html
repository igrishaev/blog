<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33533163-2', 'auto');
    ga('send', 'pageview');

</script>

    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img src="/assets/static/photo-round-small.png" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/meduza/">Медуза</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-08-23T00:00:00+00:00">
        Aug 23, 2021
    </time>

    <a href="/tag/covid/" rel="tag">covid</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>С сожалением понял, что не могу больше читать Медузу. Это прекрасное издание, и
я даже поддерживаю их после признания иностранным агентом. Причина сложная, но
постараюсь грамотно ее передать.</p>

<p>Долгое время я рассматривал Медузу как новостной сайт. Но за последний год ее
формат изменился. Теперь это не новости, а скорее блоггинг или что-то вроде
того. Главный индикатор — в издании отчетливо слышится повестка.</p>

<p>Повесткой я называю тезисы и идеи, за которые кто-то топит. Например, моя
повестка — программирование, Лисп и ФП, образование, книги, управление
временем. Повестка условного Варламова — урбанистика, архитектура, политика,
общественные события. В блоге повестка обязательна: читатель сразу должен
понять, за что топит автор, и исходя из этого уйти или остаться. У меня, как и у
всех, есть мнение насчет госдолга США и как поднять Россию с колен, но я
стараюсь не писать на эти темы. В первую очередь из уважения к читателям.</p>

<p>В новостном издании, напротив, повестка не должна проступать так выпукло, как в
блоге. Когда я открываю новость, я не хочу, чтобы автор ее оценивал. Я жду
нейтральную информацию о том, что случилось, и если нужна оценка, то либо
составляю ее сам, либо обращаюсь к блоггерам.</p>

<p>Увы, Медуза нарушила этот формат. Ее публикации все больше напоминают блог
группы авторов. Сначала в интонации и между строк, а затем и в заголовках
редакция выражает свое отношение к новости, и это невыносимо.</p>

<p>Талибы(1) — плохо. Навальный — жертва. Его расследования — круто. Коронавирус —
главная угроза обществу. Вакцинация — хорошо. Тот, кто отрицает —
ковид-диссидент (даже термин придумали). Песков несет пургу. Стеб над
Путиным. Несправедливое отношение к геям и неграм. Ущемление лесбийских пар в
России.</p>

<p>Ощущение, что Медуза возомнила себя транслятором передовых идей Европы и
пытается окультурить отсталую Россию. Культурное прокси в Риге.</p>

<p>Дело не в том, что я поддерживаю Путина и Пескова — было бы странно заподозрить
меня в этом. Но мне не нравится, когда издание стебется над кем-то. Например,
Медуза частенько ставит на главную туманную цитату Пескова и приписывает
издевательский заголовок. По мне это то же самое, что подрисовывать усы в книге
— детский сад.</p>

<p>После признания ингантом Медуза ведет себя, как обидевшаяся женщина. В
заголовках — пассивная агрессия, стеб, сарказм. Так быть не должно. А еще эмодзи
в заголовках. Если смешно, то ржачный смайлик. Если грустно, то плачущий. Какое
дно.</p>

<p>В целом, попытка редакции сблизиться с читателем скорее меня отталкивает. Каждая
новость пытается выдавить из меня гнев, осуждение, негодование, отчаяние и
смех. Я не хочу всего этого. Если переживать за всех ущемленных и несправедливо
попавших под ментовский произвол, то исчерпаешь ментальную устойчивость. Да и
никакие это не новости. Это тот же условный Варламов.news, то есть блоггинг под
видом новостей.</p>

<p>Конечно, каждый из нас нуждается в толковании событий. Хорошо то или иное
событие или нет, молодцы эти ребята или нет. Поставили скульптуру в виде
<del>говна</del> глины. Если коллеги заспорят в курилке, за что мне топить? Говно или
искусство?  Для этого и существует блоггинг — люди делятся мнением, а читатель
выбирает, к какому лагерю примкнуть. Но тут важны две вещи.</p>

<p>Во-первых, не надо выключать голову. Бывает, насмотрится человек Шульман, и я по
второй-третьей фразе понимаю, откуда дровишки. Во-вторых, цените издания,
которые не дают оценки событий. Скорей всего, это вымирающий вид. Не станет их,
и вы волей-неволей скатитесь к просмотру варламовых и лебедевых.</p>

<p>Это все равно что клевать мертвечину.</p>

<p>(1): вроде бы считаются запрещенной в России организацией, так что вынужден дать
эту сноску.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/strategy/">Стратегия</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-08-02T00:00:00+00:00">
        Aug 2, 2021
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/programming/" rel="tag">programming</a>

</div>


            <div class="entry">
                
                    <p>Предположим, вы смотрите какой-то митап на Ютубчике. Голова с экрана говорит
вам, что:</p>

<ul>
  <li>нужно нанимать только фулстек-разработчиков;</li>
  <li>нужно вставать в 5 утра;</li>
  <li>нужно читать по три книги в месяц</li>
</ul>

<p>и все в том же духе. При этом выступающий чего-то добился, и вроде как ему можно
доверять.</p>

<p>Что делать? Менять технический стек? Закупать книги? Ставить будильник?</p>

<p>Чтобы все объяснить, прибегу к дешевому трюку — аналогии.</p>

<p>Есть такой жанр компьютерных игр — стратегии. Это когда строишь юнитов и давишь
ими противника. Стратегии интересны бесконечным сочетанием юнитов, их
способностей, карты, выпавших предметов, случайности и других факторов.</p>

<p>У слова “стратегия” есть и другой смысл — набор действий в игре. Например,
удачная комбинация конкретных юнитов. Или порядок постойки зданий. Или покупка
предметов и зачистки монстров для раскачки.</p>

<p>Теперь внимание: в играх не бывает стратегии, которая однозначно определяет
успех. Если таковая находится, ее тут же исправляют патчем: ослабляют юнитов,
делают их дороже, сдвигают выше по технологическому дереву.</p>

<p>Известный игрок Moon на одном из турниров убил сильного противника базовым
юнитом — лучницами. Сразу после турнира многие стали играть так же, что не
принесло им успеха. Так появилась новая стратегия за эльфов, которую пробуют
время от времени, но она не обещает выигрыша.</p>

<p>Теперь обратно к говорящим из Ютуба. Рынок — это игра, в которой многие факторы
не определены. Жизнь постоянно корректирует его законы. Нет стратегии, которая
обязательно принесет прибыль.</p>

<p>Нужно нанимать только фулстек-разработчиков? Возможно, это зашло только в вашем
проекте и в группе конкретных людей.</p>

<p>Нужно вставать в 5 утра? Обратитесь к истории про Стивена Хокинга, когда он
совершил открытие ложась в кровать поздно ночью.</p>

<p>Надо держать монореп? У тех успешных ребят отдельные репы.</p>

<p>И так далее.</p>

<p>Понимаете, нет заведомо выигрышной стратегии. Одинокий тезис, высказанный со
сцены, на практике переплетен со сложным контекстом: где, когда и с кем. Но со
сцены вы его не услышите. Как и в Варкрафте, после успешного выступления сотни
людей бегут повторять увиденное, но почему-то не выходит.</p>

<p>Вывод? Смотри Ютуб, почитывай Хабр, но следуй своему пути.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/read-36/">Ссылки на выходные (выпуск 36)</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-07-31T00:00:00+00:00">
        Jul 31, 2021
    </time>

    <a href="/tag/read/" rel="tag">read</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Этот выпуск посвящаю Федору Борщеву. Федор – программист, консультант,
занимался Медузой и другими масштабными проектами. Полную информацию о нем вы
найдете на сайте, а я прикладываю несколько заметок, чтобы подогреть интерес.</p>

<ul>
  <li>
    <p><a href="https://borshev.com/50-percent/">Тупое правило про 50%</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/bro-said/">Пацан сказал — пацан сделал</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/rest-responsibility/">Отдых — твоя ответственность</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/no-confuse/">Не сомневаться в принятых решениях</a></p>
  </li>
  <li>
    <p><a href="https://borshev.com/small-changes/">Небольшие доработочки</a></p>
  </li>
</ul>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/covid/">Коронавирус на Титанике</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-07-19T00:00:00+00:00">
        Jul 19, 2021
    </time>

    <a href="/tag/covid/" rel="tag">covid</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Несколько лет назад мы с сыном увлекались Титаником. Посмотрели несколько
документальных фильмов, читали Википедию. Помнится, в 2012 году была столетняя
годовщина со дня трагедии, и под это дело Титаник всплыл в информационном поле.</p>

<p>Изучая историю Титаника, поражаешься нелепым промахам и неудачам. По сути вся
история — это череда ошибок. Титаник был приговорен еще в момент спуска на воду,
да что там — на этапе чертежей. Проплыви он тот рейс, проблема возникла бы в
следующий. Через десять рейсов или сто, неважно. Точно так же была бы трагедия и
тысяча с лишним погибших.</p>

<p>В спорах о Титанике даже речи не может быть о том, какую именно ошибку допустил
экипаж. Их было столь много, что можно спорить только о вкладе в общую картину,
но никак не о бинарном признаке “было/не было”.</p>

<p>Прямо сейчас, не заглядывая ни в какие интернеты, перечисляю ошибки по
памяти. Для удобства делю причины на группы.</p>

<p><strong>Устройство</strong></p>

<ul>
  <li>Дрянные заклепки корпуса, которые лопнули при столкновении.</li>
  <li>Система сообщающихся отсеков. Заполнив один отсек, вода спокойно переливалась в
следующий и так далее.</li>
  <li>Недостаточное число шлюпок и мест в них: 1200 мест на 2600 пассажиров.</li>
</ul>

<p><strong>Халатность</strong></p>
<ul>
  <li>Только один бинокль на смотровой площадке. При смене вахты смотрящий забыл
передать ключ от сейфа с биноклем второму смотрящему, а тот поленился идти за
ним.</li>
  <li>На борту были только белые сигнальные огни, которые означают внимание. Судно
браконьеров было рядом, но там белые огни приняли за фейерверк и поспешили
уплыть. Красных огней, означающих бедствие, не было.</li>
</ul>

<p><strong>Действия экипажа</strong></p>

<ul>
  <li>Первые двадцать минут после столкновения судно шло на полном
ходу, из-за чего напор воды из пробоины усилился в десять раз.</li>
  <li>Долгое время никто ничего не понимал, считали, что все хорошо.</li>
  <li>Решение опустить перегородки в отсека было фатальным. Если бы вода равномерно
растекалась по корпусу, судно погружалось бы в течение 15 часов. За это время
пришла бы помощь. Из-за того, что отсеки заполнялись по одному, судно
накренилось и переломилось спустя три часа после столкновения.</li>
  <li>Радисты посылали старый сигнал CQD, хотя все уже перешли на SOS.</li>
  <li>Экипаж не умел спускать шлюпки, учения никогда не проводились. Где-то их
спускали наполовину пустыми, на голову другим или переворачивали.</li>
</ul>

<p>Список можно растянуть на два-три экрана. Не будем этого делать, потому что и
так ясно: с самого начала все пошло не так, и кончиться иначе не могло. Сегодня,
когда мы смотрим фильм про Титаник или читаем википедию, в голове одна мысль:
как так? Почему провафлили все что можно? Почему обделались буквально на каждом
шаге? Разве нельзя было подумать заранее?</p>

<p>Всю эту петрушку про Титаник я написал потому, что вижу явное, стопроцентное
совпадение с короновирусом. Как и сто лет назад, человечество целиком
обосралось. Уверен, в будущем события наших дней будут разбирать с тем же
чувством сочувствия и снисхождения. Видите, что устроили эти болезные. Что ж,
пожалеем их, вздохнем и пообещаем так не делать.</p>

<p>В борьбе с коронавирусом мы, как и отчаянный экипаж идущего на дно судна,
сделали неправильно буквально все. В защиту экипажа можно сказать, что у них
было не более часа на обдумывание ситуации. А у нас ковидная вакханалия длится
уже полтора года, но просвета чиновничей глупости не видно.</p>

<p>Отмотаем время на год назад. Помните ковидные локдауны по три месяца? Stay Home?
Ролики с селебрити, где на все лады повторяли эту фразу? Очевидно, это не
сработало. Стоило людям выйти на улицу, настала т.н. “вторая волна”. Беру в
кавычки, потому что именно под этим термином нам ее подавали. На самом деле это
была первая волна, которую просто искусственно прервали. Да и вообще, нет
никаких волн — есть локальные вспышки, есть сезонность. А волны только в Доте.</p>

<p>Сиденье в закрытых помещениях на столь долгий срок привело к тому, что многие
потеряли работу. Как удаленно работать учителю музыки, официанту, гардеробщику?
Принимать шубу по скайпу? В считанные месяцы население обеднело и, как
результат, стало хуже питаться. Повысились стресс и домашнее насилие. В закрытых
помещениях без свежего воздуха теряется иммунитет.</p>

<p>На людей обрушилась невероятная по своей мощи информационная волна. Новости,
ежедневные сводки, ток-шоу, эксперты. Вирус несется из каждого утюга. Сраная
Медуза показывает в шапке график заболеваемости, словно это курс
доллара. Манипуляции с цифрами и статистикой. На ковид списывают ножевые ранения
и несчастные случаи. Врачам доплачивают за ковид.</p>

<p>Подтягиваются политики и чиновники. Настал их час: всем хочется порулить в
момент кризиса, чтобы стать героем. Ввели пропуска, отменили пропуска. Вчера
победили ковид, а завтра ВНЕЗАПНАЯ третья (четвертая, пятая) волна. Еще лучше:
новый штамм (бета, гамма, сигма — греческих букв хватит надолго).</p>

<p>Ввели QR-коды, отменили QR-коды. Ввели мобильное приложение, отменили мобильное
приложение. Попутно выставив миллионы штрафов просто за то, что люди не осилили
адский интерфейс.</p>

<p>Все ситуативно, непредсказуемо. Сыпятся ограничения, при этом нет режима ЧП. Нет
никакого плана или стратегии хотя бы на месяц. Все решается в полете.</p>

<p>Каждый день в новостях высказывания одно тупей другого. Вылазят обласканные
политикой врачи. Те, кто не хочет привиться — биотеррористы. Дополню: приравнять
к зомби и выдать лицензию на отстрел.</p>

<p>Потребление наркотиков возросло на 60%. Неудивительно: как иначе людям
справляться с накатившим стрессом?</p>

<p>Начинается война вакцин и сегрегация. В условную Францию нельзя, потому что не
привит. Или привит, но не тем. Сраная Европа не одобряет вакцину России. Сраная
Россия не одобряет европейскую. Думай о том, чем привиться выгодней, чтобы
охватить больше стран. Чиновники массово едут в Европу и колят Файзер, который
простому смертному не достать.</p>

<p>Во всем этом нет ни грамма заботы о людях. От начала до конца все основано на
невежестве и жадности. Короновирус — исключительно политический момент. Он стал
поводом, чтобы проталкивать внешние и внутренние решения. Внешние — в плане
вакцин, чтобы застолбить свой стандарт. Тот, чья вакцина выиграет, будет
подтираться золотой бумагой. Внутренние — для давления на население. Митинги
нельзя, больше двух не собираться, не уколешься — не получишь зарплату.</p>

<p>Коронавирус — это война человечества с самим собой. В отличии от старых войн,
теперь не нужно сбрасывать бомбы и давить танками крестьян. Враг безлик, его
нельзя найти в горах и уничтожить. Очень удобно.</p>

<p>Помнится, Барак Обама возвещал, что Россия и вирус Эбола представляют главную
угрозу человечеству. С Эболой не сложилось, но уже тогда было видно, насколько
желанна эпидемия мирового масштаба.</p>

<p>Ладно, что же надо делать?</p>

<p>Во-первых, определиться с терминами. Что такое эпидемия и пандемия? При каких
порогах можно утверждать, что в стране происходит второе или первое? Когда
определения и пороги найдены, составить план и следовать ему, при этом
оперативно уведомлять население о том, где мы и куда движемся. Ничего подобного
я не вижу в принципе. Если включить новости Москвы, то все будет плохо, при этом
чрезвычайного положения нет, все оперативно и на ходу.</p>

<p>Наиболее разумный шаг — оставить население в покое. От недостатка денег и
стресса умирает гораздо больше людей, чем от коронавируса. Загуглите графики
избыточной смертности в Москве и в Питере. Странным образом вместе с ковидниками
умирает много других людей. Это те, кто в результате беспощадной борьбы не смог
получить помощь: сердечники, раковые больные, инвалиды с редкими болезнями.</p>

<p>Не вводить поголовную вакцинацию. Вакцина нужна ослабленным людям, пожилым и
тем, кто в группе риска. Остальным — повышать иммунитет, качество воды,
продуктов питания и жизни в целом. Поощрять проветривания и зарядку.</p>

<p>Уж давно выяснили, что вирус боится именно проветривания, а не социальной
дистанции в полтора метра. Но по-прежнему многие помещения задраены, окна
закрыты, а тебя просят “одеть масочку”. Заодно вскрылась бездна людей, не
способных отличить “одеть” от “надеть”.</p>

<p>Наконец, за полтора года можно было вывести из комы массовую медицинскую
помощь. Выясняется, что в 18 году число койко-мест “оптимизировали” до 40%. И не
только у нас. В Америке программа Obama Care точно так же похоронила массовую
медицинскую помощь. Смысл программы в том, чтобы обязать гражданина купить
медстраховку. А на что ее купить, если сидишь дома или потерял работу? Или
работаешь неофициально? В ответ программа несет чушь про гибкую систему скидок.</p>

<p>Государства, что наше, что иностранные, полностью снимают с себя ответственность
за здоровье гражданина. В результате Америка угробила население, обогатив
кошельки страховых компаний. Россия ничуть не лучше: деньги от “оптимизации”
медицины пошли явно не на медицину.</p>

<p>Еще раз: в полуторагодовой борьбе с вирусом нет ни грамма заботы о людях. Ни
одна страна не ставит цель иметь здоровое население, где локальные вспышки гасит
массовая бесплатная медицинская помощь. Ковид — два в одном, повод и
инструмент. Это политика, деньги и война вакцин. Печально наблюдать эту картину
Босха в мировом масштабе, и тем труднее сохранить остатки критики и разума.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/read-35/">Ссылки на выходные (выпуск 35)</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-07-17T00:00:00+00:00">
        Jul 17, 2021
    </time>

    <a href="/tag/read/" rel="tag">read</a>, <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Давно не писал в блог. Все свободное время трачу на большую главу по базам
данных в Кложе. На какой-то период ограничимся ссылками на выходные.</p>

<p>Этот выпуск посвящаю Леониду Каганову.</p>

<ul>
  <li>
    <p>Фантастический рассказ <a href="https://lleo.me/arhive/fan2006/mne_povezet.shtml">“Мне повезет”</a></p>

    <p>Занятный рассказ, и смешно и грустно одновременно. Займет двадцать минут, не пожалеете.</p>
  </li>
  <li>
    <p><a href="https://lleo.me/dnevnik/2021/07/12">Поговорим про умный дом?</a></p>

    <p>Давно хотел написать о том, какая чушь все эти умные дома. Но Леонид сделал это раньше и лучше.</p>
  </li>
</ul>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/cron-mail/">Crontab и отправка почты</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-06-23T00:00:00+00:00">
        Jun 23, 2021
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/cron/" rel="tag">cron</a>, <a href="/tag/mail/" rel="tag">mail</a>

</div>


            <div class="entry">
                
                    <p>На днях столкнулся с проблемой. На моем ноуте крутится несколько
crontab-задач. Хотелось бы видеть, когда сработала каждая из них и если нет, то
почему. Какое-то время я выкручивался с помощью логов. Оба канала (stdout и
stderr) перехватываются в общий пайп, где каждая строка предваряется текущий
датой и записывается в файл. Например:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">SHELL</span><span class="o">=</span>/bin/bash

0 <span class="k">*</span>/3 <span class="k">*</span> <span class="k">*</span> <span class="k">*</span> /path/to/command &amp;&gt; <span class="o">&gt;(</span> <span class="k">while </span><span class="nb">read </span>line<span class="p">;</span> <span class="k">do </span><span class="nb">echo</span> <span class="s2">"</span><span class="si">$(</span><span class="nb">date</span><span class="si">)</span><span class="s2">: </span><span class="k">${</span><span class="nv">line</span><span class="k">}</span><span class="s2">"</span><span class="p">;</span> <span class="k">done</span> <span class="o">&gt;&gt;</span> /Users/ivan/logs/command.log<span class="o">)</span>
</code></pre></div></div>

<p>В результате и обычный, и ошибочный выхлоп оседают в файле. Выглядит это так:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Tue Jun 22 15:58:02 MSK 2021: warning: Skipping file ...
Tue Jun 22 15:58:19 MSK 2021: Completed 0 file(s) with ...
Tue Jun 22 15:59:02 MSK 2021: warning: Skipping file /Users/ivan/...
Tue Jun 22 15:59:19 MSK 2021: Completed 0 file(s) with ...
</code></pre></div></div>

<p>Недостаток в том, что логи нужно регулярно проверять. Об этом легко забыть на
месяц, а потом выяснится, что задача не работала из-за глупой ошибки.</p>

<p>Тут я вспомнил, что крон умеет отправлять выхлоп задачи на почту. Если задана
переменная <code class="language-plaintext highlighter-rouge">MAILTO=&lt;email&gt;</code>, то на эту почту свалится выхлоп. Это значит,
отпадают логи, ведь теперь достаточно проверить почту. Проверять ее можно и с
телефона, что в разы удобней.</p>

<p>Отправка письма работает за счет утилиты <code class="language-plaintext highlighter-rouge">mail</code>. В общем виде ей пользуются так:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cat </span>something | mail <span class="nt">-s</span> <span class="s1">'subject'</span> friend@domain.com
</code></pre></div></div>

<p>Эта команда отправит письмо на сервер <code class="language-plaintext highlighter-rouge">domain.com</code>, при этом отправитель будет
выглядеть как <code class="language-plaintext highlighter-rouge">ivan@ivan.local</code>, то есть имя пользователя и текущего хоста. То
же самое можно получить командой:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>echo `whoami`@`hostname`
</code></pre></div></div>

<p>Обратите внимание на кавычки – они означают выполнить выражение в новом шелле и
подставить результат.</p>

<p>Отправленное письмо никто не получит, что потому что современные сервера
отметают письма, где айпи отправителя не совпадает с айпи его домена. Это
хорошо, иначе бы мы утонули в спаме. Будем отправлять письма с серверов Гугла. А
чтобы <code class="language-plaintext highlighter-rouge">mail</code> мог подключиться к Гуглу, сделаем три вещи.</p>

<p><strong>Первое.</strong> В файл <code class="language-plaintext highlighter-rouge">/etc/postfix/main.cf</code> дописать строки ниже. Делать это нужно
под <code class="language-plaintext highlighter-rouge">sudo</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>relayhost = [smtp.gmail.com]:587
smtp_sasl_auth_enable = yes
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_sasl_security_options = noanonymous
smtp_use_tls = yes
smtp_sasl_mechanism_filter = plain
</code></pre></div></div>

<p><strong>Второе.</strong> Создать файл <code class="language-plaintext highlighter-rouge">/etc/postfix/sasl_passwd</code> и вписать в него:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[smtp.gmail.com]:587 username@gmail.com:password
</code></pre></div></div>

<p>, где <code class="language-plaintext highlighter-rouge">password</code> — пароль приложения для почты. Сгенерить этот пароль можно на
специальной <a href="https://myaccount.google.com/apppasswords">странице Гугла</a>.</p>

<p>Замечу, что вместо <code class="language-plaintext highlighter-rouge">gmail.com</code> может быть ваш домен, если он нацелен на гугловые
сервера как в моем случае.</p>

<p><strong>Третье</strong> — указать <code class="language-plaintext highlighter-rouge">postfix</code> новые конфиги и перезагрузить его:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo chmod 600 /etc/postfix/sasl_passwd
sudo postmap /etc/postfix/sasl_passwd
sudo launchctl stop org.postfix.master
sudo launchctl start org.postfix.master
</code></pre></div></div>

<p>Все. Пробуем отправить письмо. Сообщим в нем содержимое домашней папки:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">ls</span> <span class="nt">-l</span> | mail <span class="nt">-s</span> <span class="s1">'my home dir'</span> ivan@grishaev.me
</code></pre></div></div>

<p>Мне пришло с первого раза. Plain text, красота.</p>

<p>Так вот, теперь когда почта работает, настроим крон. Открываем его командой
<code class="language-plaintext highlighter-rouge">crontab -e</code> и пишем сверху:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MAILTO=&lt;ваша@почта&gt;
</code></pre></div></div>

<p>Кроме того, в конец каждой команды добавляем эхо, например:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>0 */3 * * * cd /some/path &amp;&amp; command --foo 42 &amp;&amp; echo OK
</code></pre></div></div>

<p>Зачем нужно эхо? Оказалось, что крон не отправляет письмо, если выхлоп задачи
пуст. А поскольку я всегда хочу знать о запуске задачи, то делаю вывод не
пустым. Вместо <code class="language-plaintext highlighter-rouge">echo OK</code> можно вывести текущую дату с помощью <code class="language-plaintext highlighter-rouge">&amp;&amp; date</code>.</p>

<p>В результате мы получим письмо, где тема — команда задачи, а тело — ее
выхлоп. Работает в том числе и для задач, которые не сработали из-за ошибки.</p>

<p>Я уж не говорю о том, что с помощью <code class="language-plaintext highlighter-rouge">mail</code> можно быстро что-то скидывать себе на
почту, организовать какие-то заметки и прочее. Что самое прекрасное — нет
интерфейса, все простое и открытое, работает везде. Чудо.</p>

<p>В следующий раз расскажу, что именно я ставлю на крон, там тоже интересные вещи.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/books-more/">И ещё немного книг</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-06-05T00:00:00+00:00">
        Jun 5, 2021
    </time>

    <a href="/tag/book/" rel="tag">book</a>

</div>


            <div class="entry">
                
                    <p>Выкладываю ещё несколько прочитанных книжек. Полную подборку см. <a href="/bookshelf/">на книжной
полке</a>.</p>

<div class="book-list">

    
<div class="book-item">
    <div class="book-thumb">
        <img src="/assets/static/bookshelf/chern.jpg" />
    </div>
    <div class="book-text">
        <p>
            <b>Чернобыль. История катастрофы</b>
            <br />
            <em>Хиггинботам Адам</em>
        </p>

        <p>
Полная история чернобыльских событий. Начинается задолго до взрыва, охватывает
становление Припяти и ранние опыты с атомной энергией в СССР. Подробно описаны
причины, которые привели к взрыву, в том числе организационные. Центральные
персонажи показаны правдиво и без тех прикрас, что были в сериале HBO. Книга
заканчивается развалом СССР и эпилогом. Рекомендую к прочтению.
        </p>

    </div>
</div>



<div class="book-item">
    <div class="book-thumb">
        <img src="/assets/static/bookshelf/minimal.jpg" />
    </div>
    <div class="book-text">
        <p>
            <b>Digital минимализм. Как навести порядок в цифровой среде</b>
            <br />
            <em>Рыжина Анастасия</em>
        </p>

        <p>
Книга о том, как навести порядок в файлах: на локальном компе и в облачных
хранилищах. Довольно занятно, но затянуто. Проблема в том, что материал тянет на
хорошую статью, но никак не на книгу. Отсюда дешёвые способы выйти на объём:
мудрые цитаты на разворот, письма читателей и прочий балласт. Но пробежаться
стоит.
        </p>

    </div>
</div>



<div class="book-item">
    <div class="book-thumb">
        <img src="/assets/static/bookshelf/thinkmath.jpg" />
    </div>
    <div class="book-text">
        <p>
            <b>Думай как математик. Как решать любые задачи быстрее и эффективнее</b>
            <br />
            <em>Барбара Оакли</em>
        </p>

        <p>
Автор &mdash; женщина-учёный, служила в армии США, преподавала в университете. В
книге она описывает приемы эффективного обучения. Например, заниматься
понемногу, но регулярно; не подчеркивать в книгах; мысленно пересказывать
материал. Полезно, но затянуто. Я бы сократил книгу на треть.
        </p>

    </div>
</div>



<div class="book-item">
    <div class="book-thumb">
        <img src="/assets/static/bookshelf/java-algo.jpg" />
    </div>
    <div class="book-text">
        <p>
            <b>Структуры данных и алгоритмы в Java Лафоре Роберт</b>
            <br />
            <em>Лафоре Роберт</em>
        </p>

        <p>
Прекрасная книга об алгоритмах. Столь понятного изложения я уже давно не
встречал. Все алгоритмы показаны картинками и схемами; к каждому прилагается
программа с интерфейсом для визуализации. Первая часть книги посвящена
сортировке, вторая &mdash; деревьям. Все примеры на Java версии 1.3. Пусть это
вас не пугает: никаких классов, всё на примитивах и массивах. Горячо рекомендую
книгу всем, кто хочет разобраться с коллекциями и алгоритмами.
        </p>

    </div>
</div>




<div class="book-item">
    <div class="book-thumb">
        <img src="/assets/static/bookshelf/drama.jpg" />
    </div>
    <div class="book-text">
        <p>
            <b>Уступите место драме. Как писать интересно даже на скучные темы</b>
            <br />
            <em>Сарычева Людмила</em>
        </p>

        <p>
Книга о драматургии Люды Сарычевой, соавтора "Пиши, сокращай". Не думайте, что
драматургия &mdash; это обязательно Шекспир и все умирают. Речь о том, как
сделать текст интересней с помощью персонажей и конфликтов, как обострять
акценты и чередовать ритм. Прочитал половину: начало интересное и пригодится
всем, а дальше уже только для специалистов в теме.
        </p>

    </div>
</div>



<div class="book-item">
    <div class="book-thumb">
        <img src="/assets/static/bookshelf/moving-castle.jpg" />
    </div>
    <div class="book-text">
        <p>
            <b>Ходячий замок</b>
            <br />
            <em>Джонс Диана Уинн</em>
        </p>

        <p>
Смотрел этот мульт три раза и вот добрался до книги. Ощущения смешанные: сюжеты
расходится, характеры персонажей разнятся. Книга местами затянута и её ритм
скачет. Я бы сказал, что мультфильм лучше книги, причём не в плане эффектов, а
потому что несёт больше чувств. Но прочитать стоит.
        </p>

    </div>
</div>



<div class="book-item">
    <div class="book-thumb">
        <img src="/assets/static/bookshelf/art-of-war.jpg" />
    </div>
    <div class="book-text">
        <p>
            <b>Искусство войны</b>
            <br />
            <em>Сунь-Цзы</em>
        </p>

        <p>
Тот самый трактат о войне, написанный две с половиной тысячи лет назад. Оригинал
довольно короткий, буквально дюжина керамических табличек. Поэтому современные
издания напичканы комментариями толкователей всех мастей. Это весьма раздражает:
после каждой фразы оригинала следуют пять абзацев комментариев. К самому
трактату претензий нет: он точен, ясен, в нём нет лишних деталей, он несет много
пищи для размышления. Удивительно, что человек, который занимался войной, так
много пишет о милосердии и заботе о людях.
        </p>

    </div>
</div>


</div>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/en/farseer/">Introducing Farseer: the JSON RPC server, the client and utilities</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-06-02T00:00:00+00:00">
        Jun 2, 2021
    </time>

    <a href="/tag/clojure/" rel="tag">clojure</a>, <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/rpc/" rel="tag">RPC</a>

</div>


            <div class="entry">
                
                    
<p><em>(This is a copy of the readme file from the repository.)</em></p>

<p><a href="https://github.com/igrishaev/farseer">Farseer</a> is a set of modules for <a href="https://en.wikipedia.org/wiki/JSON-RPC">JSON RPC</a>. It includes a
transport-independent handler, Ring HTTP handler, Jetty server, HTTP client,
local stub, documentation, and more.</p>

<h2>

    

</h2>

<ul id="toc-item-farseer-en">
  <li><a href="#what-and-why-is-json-rpc" id="toc-item-farseer-en-what-and-why-is-json-rpc">What and Why is JSON RPC?</a>    <ul>
      <li><a href="#benefits" id="toc-item-farseer-en-benefits">Benefits</a></li>
      <li><a href="#disadvantages" id="toc-item-farseer-en-disadvantages">Disadvantages</a></li>
    </ul>
  </li>
  <li><a href="#the-structure-of-this-project" id="toc-item-farseer-en-the-structure-of-this-project">The Structure of this Project</a>    <ul>
      <li><a href="#installation" id="toc-item-farseer-en-installation">Installation</a></li>
    </ul>
  </li>
  <li><a href="#rpc-handler" id="toc-item-farseer-en-rpc-handler">RPC Handler</a>    <ul>
      <li><a href="#method-handlers" id="toc-item-farseer-en-method-handlers">Method handlers</a></li>
      <li><a href="#specs" id="toc-item-farseer-en-specs">Specs</a>        <ul>
          <li><a href="#input-spec" id="toc-item-farseer-en-input-spec">Input Spec</a></li>
          <li><a href="#output-spec" id="toc-item-farseer-en-output-spec">Output Spec</a></li>
          <li><a href="#in-production" id="toc-item-farseer-en-in-production">In Production</a></li>
        </ul>
      </li>
      <li><a href="#more-on-context" id="toc-item-farseer-en-more-on-context">More on Context</a>        <ul>
          <li><a href="#static-context" id="toc-item-farseer-en-static-context">Static Context</a></li>
          <li><a href="#dynamic-context" id="toc-item-farseer-en-dynamic-context">Dynamic Context</a></li>
        </ul>
      </li>
      <li><a href="#request--response-formats" id="toc-item-farseer-en-request--response-formats">Request &amp; Response Formats</a>        <ul>
          <li><a href="#request" id="toc-item-farseer-en-request">Request</a></li>
          <li><a href="#response" id="toc-item-farseer-en-response">Response</a></li>
          <li><a href="#error-codes" id="toc-item-farseer-en-error-codes">Error Codes</a></li>
        </ul>
      </li>
      <li><a href="#notifications" id="toc-item-farseer-en-notifications">Notifications</a></li>
      <li><a href="#batch-requests" id="toc-item-farseer-en-batch-requests">Batch Requests</a>        <ul>
          <li><a href="#note-on-parallelism" id="toc-item-farseer-en-note-on-parallelism">Note on Parallelism</a></li>
          <li><a href="#configuring--limiting-batch-requests" id="toc-item-farseer-en-configuring--limiting-batch-requests">Configuring &amp; Limiting Batch Requests</a></li>
        </ul>
      </li>
      <li><a href="#errors--exceptions" id="toc-item-farseer-en-errors--exceptions">Errors &amp; Exceptions</a>        <ul>
          <li><a href="#runtime-unexpected-errors" id="toc-item-farseer-en-runtime-unexpected-errors">Runtime (Unexpected) Errors</a></li>
          <li><a href="#rpc-expected-errors" id="toc-item-farseer-en-rpc-expected-errors">RPC (Expected) Errors</a></li>
          <li><a href="#raising-exceptions" id="toc-item-farseer-en-raising-exceptions">Raising Exceptions</a></li>
        </ul>
      </li>
      <li><a href="#configuration" id="toc-item-farseer-en-configuration">Configuration</a></li>
    </ul>
  </li>
  <li><a href="#ring-http-handler" id="toc-item-farseer-en-ring-http-handler">Ring HTTP Handler</a>    <ul>
      <li><a href="#negative-responses" id="toc-item-farseer-en-negative-responses">Negative Responses</a></li>
      <li><a href="#batch-requests-in-http" id="toc-item-farseer-en-batch-requests-in-http">Batch Requests in HTTP</a></li>
      <li><a href="#configuration-1" id="toc-item-farseer-en-configuration-1">Configuration</a></li>
      <li><a href="#middleware--authorization" id="toc-item-farseer-en-middleware--authorization">Middleware &amp; Authorization</a></li>
      <li><a href="#http-context" id="toc-item-farseer-en-http-context">HTTP Context</a></li>
    </ul>
  </li>
  <li><a href="#jetty-server" id="toc-item-farseer-en-jetty-server">Jetty Server</a>    <ul>
      <li><a href="#configuration-2" id="toc-item-farseer-en-configuration-2">Configuration</a></li>
      <li><a href="#with-server-macro" id="toc-item-farseer-en-with-server-macro">With-server macro</a></li>
      <li><a href="#component" id="toc-item-farseer-en-component">Component</a></li>
    </ul>
  </li>
  <li><a href="#http-stub" id="toc-item-farseer-en-http-stub">HTTP Stub</a>    <ul>
      <li><a href="#multiple-stub" id="toc-item-farseer-en-multiple-stub">Multiple Stub</a></li>
      <li><a href="#tests" id="toc-item-farseer-en-tests">Tests</a></li>
      <li><a href="#negative-responses-1" id="toc-item-farseer-en-negative-responses-1">Negative Responses</a></li>
    </ul>
  </li>
  <li><a href="#http-client" id="toc-item-farseer-en-http-client">HTTP Client</a>    <ul>
      <li><a href="#configuration-3" id="toc-item-farseer-en-configuration-3">Configuration</a></li>
      <li><a href="#handling-responses" id="toc-item-farseer-en-handling-responses">Handling Responses</a></li>
      <li><a href="#auth" id="toc-item-farseer-en-auth">Auth</a></li>
      <li><a href="#notifications-1" id="toc-item-farseer-en-notifications-1">Notifications</a></li>
      <li><a href="#batch-requests-1" id="toc-item-farseer-en-batch-requests-1">Batch Requests</a></li>
      <li><a href="#connection-manager-pool" id="toc-item-farseer-en-connection-manager-pool">Connection Manager (Pool)</a></li>
      <li><a href="#component-1" id="toc-item-farseer-en-component-1">Component</a></li>
    </ul>
  </li>
  <li><a href="#documentation-builder" id="toc-item-farseer-en-documentation-builder">Documentation Builder</a>    <ul>
      <li><a href="#configuration-4" id="toc-item-farseer-en-configuration-4">Configuration</a></li>
      <li><a href="#building" id="toc-item-farseer-en-building">Building</a></li>
      <li><a href="#demo" id="toc-item-farseer-en-demo">Demo</a></li>
      <li><a href="#selmer--context" id="toc-item-farseer-en-selmer--context">Selmer &amp; Context</a></li>
      <li><a href="#rendering-specs" id="toc-item-farseer-en-rendering-specs">Rendering Specs</a></li>
    </ul>
  </li>
  <li><a href="#ideas--further-development" id="toc-item-farseer-en-ideas--further-development">Ideas &amp; Further Development</a></li>
</ul>

<h2 id="what-and-why-is-json-rpc">What and Why is JSON RPC?</h2>

<p>Briefly, JSON RPC is a protocol based on HTTP &amp; JSON. When calling the server,
you specify the method (procedure) name and its parameters. The parameters could
be either a map or a vector. The server returns a JSON response with the
<code class="language-plaintext highlighter-rouge">result</code> or <code class="language-plaintext highlighter-rouge">error</code> fields. For example:</p>

<p>Request:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sum"</span><span class="p">,</span><span class="w"> </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">],</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Response:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="nl">"jsonrpc"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2.0"</span><span class="p">,</span><span class="w"> </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Pay attention: the protocol depends on neither HTTP method, nor query params,
nor HTTP headers and so on. Although looking a bit primitive, this schema
eventually appears to be robust, scalable and reliable.</p>


                    <p><a href="/en/farseer/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/dry/">Сага о DRY и зависимостях</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-05-21T00:00:00+00:00">
        May 21, 2021
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/dry/" rel="tag">dry</a>

</div>


            <div class="entry">
                
                    <p>Предположим, в вашем проекте два модуля: <code class="language-plaintext highlighter-rouge">project.foo</code> и <code class="language-plaintext highlighter-rouge">project.bar</code>. В первый
из них вы добавили служебную функцию, например поиск элемента по
предикату. Через некоторое время то же самое понадобилось во втором модуле. Как
вы поступите?</p>

<p>Варианты:</p>

<ol>
  <li>Вынесу функцию в третий модуль <code class="language-plaintext highlighter-rouge">project.utils</code> и подключу его к <code class="language-plaintext highlighter-rouge">foo</code> и
<code class="language-plaintext highlighter-rouge">bar</code>.</li>
  <li>Скопирую функцию во второй модуль.</li>
</ol>

<p>Конечно, вы и так знаете, что правильный способ — первый. <a href="https://ru.wikipedia.org/wiki/Don%E2%80%99t_repeat_yourself">DRY</a> (Don’t
Repeat Yourself), не дублируй код. Держи одну точку входа, чтобы в случае ошибки
править в одном месте. Копирование — наш враг и все такое. Я тоже тоже так думал
раньше, и вот, в тридцать пять лет, поменял мнение.</p>


                    <p><a href="/dry/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/en/clojure-zippers/">Clojure Zippers</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2021-05-20T00:00:00+00:00">
        May 20, 2021
    </time>

    <a href="/tag/clojure/" rel="tag">clojure</a>, <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/zippers/" rel="tag">zippers</a>

</div>


            <div class="entry">
                
                    
<h2>

    

</h2>

<ul id="toc-item-clojure-zippers-en">
  <li><a href="#part-1-the-basics-of-navigation" id="toc-item-clojure-zippers-en-part-1-the-basics-of-navigation">Part 1. The Basics of Navigation</a></li>
  <li><a href="#part-2-automatic-navigation" id="toc-item-clojure-zippers-en-part-2-automatic-navigation">Part 2. Automatic navigation</a></li>
  <li><a href="#part-3-xml-zippers" id="toc-item-clojure-zippers-en-part-3-xml-zippers">Part 3. XML zippers</a></li>
  <li><a href="#part-4-xml-search" id="toc-item-clojure-zippers-en-part-4-xml-search">Part 4. XML search</a></li>
  <li><a href="#part-5-editing" id="toc-item-clojure-zippers-en-part-5-editing">Part 5. Editing</a>    <ul>
      <li><a href="#multiple-change" id="toc-item-clojure-zippers-en-multiple-change">Multiple change</a></li>
      <li><a href="#prices-in-xml" id="toc-item-clojure-zippers-en-prices-in-xml">Prices in XML</a></li>
    </ul>
  </li>
  <li><a href="#part-6-virtual-trees-currency-exchange" id="toc-item-clojure-zippers-en-part-6-virtual-trees-currency-exchange">Part 6. Virtual Trees. Currency Exchange</a></li>
  <li><a href="#part-7-breadth-first-traversal-improved-currency-exchange" id="toc-item-clojure-zippers-en-part-7-breadth-first-traversal-improved-currency-exchange">Part 7. Breadth-First Traversal. Improved Currency Exchange</a></li>
  <li><a href="#part-8-summary" id="toc-item-clojure-zippers-en-part-8-summary">Part 8. Summary</a>    <ul>
      <li><a href="#html" id="toc-item-clojure-zippers-en-html">HTML</a></li>
      <li><a href="#data-and-serialization" id="toc-item-clojure-zippers-en-data-and-serialization">Data and Serialization</a></li>
      <li><a href="#other-uses" id="toc-item-clojure-zippers-en-other-uses">Other Uses</a></li>
      <li><a href="#third-party-libraries" id="toc-item-clojure-zippers-en-third-party-libraries">Third-party Libraries</a></li>
      <li><a href="#summary" id="toc-item-clojure-zippers-en-summary">Summary</a></li>
    </ul>
  </li>
</ul>

<h2 id="part-1-the-basics-of-navigation">Part 1. The Basics of Navigation</h2>

<p><em>In this article, we will discuss zippers in the Clojure language. These are an unusual way
to work with collections. Using a zipper, you can traverse a data structure arbitrarily and modify its content as well as search in it. A zipper is a powerful abstraction that pays off over time. However, it is not as straightforward as regular tools and requires training to deal with.</em></p>

<p>Let’s talk about a zipper in simple terms. It is a wrapper that offers a variety of data manipulations. Let’s list the main ones:</p>

<ul>
  <li>moving vertically: down to children or up to a parent;</li>
  <li>moving horizontally: left or right among children;</li>
  <li>traversal of the entire data structure;</li>
  <li>adding, editing and deleting nodes.</li>
</ul>


                    <p><a href="/en/clojure-zippers/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <span class="page_number ">Страница 1 из 54</span>
        
        <a href="/page2" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
