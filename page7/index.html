<!DOCTYPE html>
<html lang="ru">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Ivan Grishaev's blog</title>
  <meta name="description" content="Writing on programming, education, books and negotiations.
">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/custom.css">
  <link rel="canonical" href="https://grishaev.me/page7/">
  <link rel="alternate" type="application/rss+xml" title="Ivan Grishaev's blog" href="https://grishaev.me/feed.xml">

  <link rel="shortcut icon" type="image/x-icon" href="/assets/static/favicons/favicon.ico">

  <script type="text/javascript" src="/assets/typo.js"></script>

</head>


  <body>
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-33533163-2', 'auto');
    ga('send', 'pageview');

</script>

    <header class="site-header">

    <div class="wrapper flex-container">

        <div>
            <a href="/">
                <img src="/assets/static/photo-round-small.png" alt="Ivan Grishaev">
            </a>
        </div>

        <div class="flex-container-vert" style="margin-left: 15px; width: 80%">

            <div class="flex-container full-width">
                <p style="margin-bottom: 5px">Ivan Grishaev's blog</p>
                <div class="flex-huge"></div>
                <div >
<form id="search-form"
      target="_blank"
      style="display: inline"
      method="get"
      action="https://www.google.com/search">

    <input name="sitesearch"
           value="grishaev.me"
           type="hidden">

    <input type="text"
           required="required"
           name="q"
           placeholder="Google search..."
           autocomplete="off">

    <button style="border: none; background-color: transparent; cursor: pointer;"
            type="submit">&#x1f50d;</button>

</form>
</div>
            </div>

            <p><small>Writing on programming, education, books and negotiations.
</small></p>

            <div class="flex-container">
                <a class="menu-item" href="/">Home</a>
                <a class="menu-item" href="/about/">About</a>
                <a class="menu-item" href="/bookshelf/">Bookshelf</a>
                <a class="menu-item" href="/feed.xml">RSS</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor" href="/tag/clojure/">Clojure</a>
                <a class="menu-item minor" href="/tag/emacs/">Emacs</a>
                <a class="menu-item minor" href="/tag/python/">Python</a>
                <a class="menu-item minor" href="/tag/programming/">Programming</a>
                <a class="menu-item minor" href="/interview/">Interview</a>
                <a class="menu-item minor" href="/video/">Video</a>
            </div>

            <div class="flex-container">
                <a class="menu-item minor hl" href="/clojure-in-prod/">Книга «Clojure на производстве»</a>
            </div>

        </div>
    </div>

</header>


    <div class="page-content">
      <div class="wrapper">
        <div class="home">

    <ul class="post-list">
        
        <li>

            <h2>
                <a class="post-link" href="/dropbox-ui/">Интерфейс Dropbox</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-07-06T00:00:00+00:00">
        Jul 6, 2020
    </time>

    <a href="/tag/life/" rel="tag">life</a>, <a href="/tag/ui/" rel="tag">ui</a>, <a href="/tag/dropbox/" rel="tag">dropbox</a>

</div>


            <div class="entry">
                
                    <p>У Никиты в статье <a href="https://tonsky.me/blog/syncthing/">Computers as I used to love
them</a> показана установка Dropbox. Легко
заметить, что некогда удобный софт стал жирным монстром, где вместо одного клика
нужно пять. Жаль, что Dropbox повторил судьбу Evernote и пал жертвой
маркетологов и иже с ими.</p>

<p>Недавно понадобилось кое-что с Дропбокса, и я поставил последний клиент. Прошел
ад с миллионом экранов – это, конечно, жесть. И добавлю один важный факт.</p>

<p>Дело в том, что Dropbox долгое время считали эталоном программы без
интерфейса. В этом был его козырь, с которым он влетел с двух ног. Разве до
Dropbox не было средств синхронизации? Были. Вот только Dropbox упростил процесс
до минимума. Видишь папку? Кидай туда файлы, и они появятся в другом месте. Все
на уровне операционной системы, копировать-вставить, перетащить мышкой. Не надо
ни к чему привыкать. Да, было окошко с настройками, но обычный юзер туда не
лазил — незачем.</p>

<p>Вы будете смеяться, но в каком-то лохматом году я делал обмен репликами в 1C на
базе Дропбокса. Один комп выгружал обновления в папку, второй подхватывал, как
только они там появились. Затем наоборот. Работало!</p>

<p>Очевидно, после ребрендинга в Dropbox взяли курс на уход от файловой
системы. Теперь на любой чих открывается Электрон-приложение, похожее на
очередной Slack или Teams. Это как бэ намек: вот новый гуй, бери, иначе отключим
газ.</p>

<p><img src="https://s3.amazonaws.com/igrishaev.public/1059232/86610024-6c965a00-bfb5-11ea-8080-df0e297a5b4e.png" /></p>

<p>Хорошо это или плохо, судить не нам. Прежняя модель была удобной, но, возможно,
в ней бизнес вышел на плато-фазу, а деньги на шеф-повара нужны. Синхронизация
файлов, в общем-то, вещь простая, и рано или поздно наступает насыщение. Все
довольны, все работает, а поскольку Dropbox — не банк и не мобильный оператор,
предложить ему больше нечего. Даже блокчейн не подключишь и машын
лерниг. Кажется, они делали почтовый клиент, но закрыли его.</p>

<p>Морали нет, просто наблюдение. Больше Dropbox не подходит на роль программы без
интерфейса. Ушла эпоха.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/clj-book-habr/">Анонс книги на Хабре</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-07-01T00:00:00+00:00">
        Jul 1, 2020
    </time>

    <a href="/tag/book/" rel="tag">book</a>

</div>


            <div class="entry">
                
                    <p><a href="https://habr.com/ru/post/508630/">Разместил на Хабре</a> анонс книги. Помогите
вывести новость на главную.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/hardcover/">Она такая твёрдая</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-06-26T00:00:00+00:00">
        Jun 26, 2020
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Такая же будет у вас, <a href="/clj-book-preorder/">если закажете</a>. Ещё не поздно.</p>

<p><img src="https://s3.amazonaws.com/igrishaev.public/1059232/85860614-be75fd80-b7c7-11ea-8553-3bde8d14b576.jpg" /></p>


                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/on-decision-making/">О принятии решений</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-06-24T00:00:00+00:00">
        Jun 24, 2020
    </time>

    <a href="/tag/life/" rel="tag">life</a>

</div>


            <div class="entry">
                
                    <p>Иногда в жизни приходится делать выбор, а вокруг никого, кто бы мог помочь. Я
имею в виду не выбор между двумя телефонами или машинами. Речь о чем-то таком,
что связано с жизнью в принципе. Мы тратим часы на размышления, нервиничаем,
заедаем стресс. Нерешенный выбор висит как меч над головой.</p>

<p>Я тоже долго страдал от этого, пока не открыл важные вещи. Пишу их даже не для
вас, а чтобы самому потом перечитывать.</p>

<p>Первое – моменты, когда вы не можете принять решение, нужно ценить. Это
означает, вы вышли из зоны комфорта, продвинулись на территорию, где не были
прежде. На самом деле не так часто бывает выбор, когда некому помочь, потому что
сюда не попадают материальные блага. Так что самое лучше – не кусать ногти, а
порадоваться: еще год назад такого выбора не было!</p>

<p>Второе – опыт важнее успеха. Еще раз, только подробнее – опыт, который вы
получите в результате выбора, гораздо ценнее успешного исхода. Предположим, вы
ошиблись, и надо было поступить не так. Из этого “не так” нужно извлечь пользу
– теперь вы знаете, как надо было, а другие не знают. Знание дает вам
преимущество перед другими: можно написать об этом в блоге, выступить на
конференции, а из множества “как” написать книгу.</p>

<p>Третье – свершение выбора важнее его исходов, потому что свершение – это
движение вперед. Даже если вы продвинулись не в том направлении, можно
скорректировать курс. Это лучше, чем бесконечно сидеть на одном месте.</p>

<p>В итоге, если у вас есть выбор, разумно подумать какое-то время, но не
затягивать. В противном случае выбор обернется в муку. Когда помнишь, что
ошибочное решение прибавляет знание, ошибаться не так уж страшно. Все, что не
касается необратимых последствий – жизни и здоровья – не стоит тех сожалений,
что мы так лелеем.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/clj-book-page/">Страница книги</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-06-23T00:00:00+00:00">
        Jun 23, 2020
    </time>

    <a href="/tag/book/" rel="tag">book</a>

</div>


            <div class="entry">
                
                    <p>У книги появилась <a href="/clojure-in-prod/">выделенная страница</a>. Всю информацию о ней
– что это такое, где купить, благодарности – буду собирать в одном
месте. Ссылку на нее вы можете шарить в соцсетях и месаджерах. Скоро сделаю
анонс на Хабре.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/clj-book-preorder/">Предзаказ книги</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-06-18T00:00:00+00:00">
        Jun 18, 2020
    </time>

    <a href="/tag/book/" rel="tag">book</a>

</div>


            <div class="entry">
                
                    
<p><strong>UPD (2021 Mar 20):</strong> Принимаю заказы и сейчас, осталась небольшая коробка
книжек. А если кончатся, напечатаю.</p>

<p><strong>UPD (2020 Dec 03):</strong> <a href="/clojure-in-prod/">Финальная версия книги</a> и вся информация о ней.</p>

<p>TL;DR: <strong>анонсирую предзаказ книги</strong>. Чтобы получить ее на лучших
условиях, сделайте следующее:</p>

<ul>
  <li>нажмите на кнопку оплаты Яндекс.Денег (ныне ЮMoney);</li>
  <li>укажите ФИО, емейл, телефон и адрес доставки (ниже я объясню, зачем эти
данные);</li>
  <li>оплатите картой или из кошелька;</li>
  <li>ждите доставки на указанный вами адрес.</li>
</ul>

<p>Сумма предзаказа 800 рублей. Сюда входит печать книги в твердой обложке
(примерно 500 рублей) и доставка (300 рублей в среднем по России). Ожидаемая
дата рассылки книг – через три недели.</p>

<p>В поле “адрес” <strong>впишите индекс</strong>, службы доставки без него страдают.</p>

<iframe src="https://yoomoney.ru/quickpay/button-widget?targets=%D0%9A%D0%BD%D0%B8%D0%B3%D0%B0%20%C2%ABClojure%20%D0%BD%D0%B0%20%D0%BF%D1%80%D0%BE%D0%B8%D0%B7%D0%B2%D0%BE%D0%B4%D1%81%D1%82%D0%B2%D0%B5%C2%BB&amp;default-sum=1000&amp;button-text=11&amp;any-card-payment-type=on&amp;button-size=l&amp;button-color=orange&amp;fio=on&amp;phone=on&amp;mail=on&amp;address=on&amp;successURL=https%3A%2F%2Fgrishaev.me%2F&amp;quickpay=small&amp;account=410012183974663&amp;" width="227" height="48" frameborder="0" allowtransparency="true" scrolling="no"></iframe>

<p>Подробности под катом.</p>


                    <p><a href="/clj-book-preorder/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/book-progress5/">Что там с книгой? — 5</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-06-16T00:00:00+00:00">
        Jun 16, 2020
    </time>

    <a href="/tag/book/" rel="tag">book</a>

</div>


            <div class="entry">
                
                    <p>Уже совсем скоро:</p>

<p><img src="https://s3.amazonaws.com/igrishaev.public/1059232/84793877-49a00800-affe-11ea-95a2-2d2c57486f9e.JPG" title="IMG_8783" /></p>


                    <p><a href="/book-progress5/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/assistant/">Ищу помощника</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-06-15T00:00:00+00:00">
        Jun 15, 2020
    </time>

    <a href="/tag/%D0%BF%D0%BE%D0%BC%D0%BE%D1%89%D0%BD%D0%B8%D0%BA/" rel="tag">помощник</a>

</div>


            <div class="entry">
                
                    <p>Я ищу помощника для работы над личными проектами. У меня скопились задачи,
разгрести которые некогда из-за основной работы, и я готов предложить их
вам. Работа платная. Планирую обеспечить задачами на несколько месяцев, дальше —
по обстоятельствам. Теперь подробнее.</p>

<p>Требования к вам:</p>

<ul>
  <li>Знание git: ветки, пулл-реквесты, мердж. Учетка на GitHub;</li>
  <li>Азы bash, make и прочих GNU-утилит;</li>
  <li>Владение текстовым редактором, чтобы выполнять монотонные штуки;</li>
  <li>Базовые знания Сlojure и Python;</li>
  <li>Желательно, чтобы у вас был Мак или Линукс (первое
предпочтительней). Возможно, получится и с Виндой, но тогда придется
настраивать Докеры/виртуалки и разбираться, почему что-то не работает;</li>
  <li>Будет супер, если вдруг вы знакомы с LaTeX.</li>
</ul>

<p>Задачи, которые готов предложить (по убыванию важности):</p>

<ul>
  <li>Адаптировать книгу о Сlojure под устройства с небольшим экраном (Kindle и
телефон). Нужно изменить форматирование кода на Сlojure;</li>
  <li>Оформить питонячьи скрипты в пакеты;</li>
  <li>Взяться за issue проекта <a href="https://github.com/igrishaev/etaoin">Etaoin</a>. Я не
прикасался к библиотеке почти год, а пользователи что-то пишут;</li>
  <li>Поработать над закрытым проектом на Сlojure.</li>
</ul>

<p>Работа не для состоявшихся профессионалов, а для человека уровня junior или
middle. Одновременно ее можно рассматривать как менторство: если что-то не
получается, я готов объяснить, в том числе голосом.</p>

<p>Как будем работать:</p>

<ul>
  <li>Сначала созваниваемся, я объясняю проект и как что работает;</li>
  <li>Добавляю вас в репозиторий и ставлю задачи. Описываю по шагам, что нужно
сделать.</li>
  <li>Вы делаете задачу в отдельной ветке. По ходу дела задаете вопросы в
комментариях к задаче, я отвечаю. Если что-то трудное, созваниваемся в Зуме
или где-то еще.</li>
  <li>Открываете PR, я смотрю и проверяю локально, если норм — мердж, задача
выполнена.</li>
  <li>Каждое утро коротко сообщаете о прогрессе: что сделали вчера, что планируете
сегодня.</li>
</ul>

<p>Все вопросы оплаты (сумма, частота, периодичность) обсуждаем в личной переписке.</p>

<p>Если вам это подходит, напишите мне письмо на адрес <code class="language-plaintext highlighter-rouge">ivan@grishaev.me</code> с темой
“Помощник” (или “Помощница”). Расскажите коротко о себе: чем занимаетесь и что
умеете из списка требований. Напишите свою часовую зону и желаемую сумму в
месяц: мне проще отталкиваться от ваших пожеланий.</p>

<p>Спасибо.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/swagger/">Что думаю о Swagger</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-06-09T00:00:00+00:00">
        Jun 9, 2020
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/swagger/" rel="tag">swagger</a>

</div>


            <div class="entry">
                
                    <p>Одна из самых бесполезных вещей в айти — это Swagger. Так называется система,
которая отображает REST-апихи в JSON-файле. Идея хорошая, но на практике
вымораживает мозг. Давно порывался написать о ее минусах, и вот на днях опять
подгорело.</p>

<p>Если вы внедряете в проекте Swagger, то скорее всего, занимаетесь ерундой. За
все годы работы мне приходилось внедрять его четыре раза, и каждый раз я не
видел от него пользы. Так, болтается какая-то хрень сбоку, отнимает время и
ресурсы, никто ее не смотрит. Поставьте скрипт аналитики и убедитесь, что в нем
от силы одно посещение в день.</p>

<p>Swagger это порождение мира node.js, столь мне отвратного. Это папка
node_modules с миллионом микро-файлов, хрупкие сборки и прочие фу. К счастью,
появились докер-образы, но и они не без греха. Так, образ swagger-ui <a href="https://github.com/swagger-api/swagger-ui/issues/5699">нельзя
запустить</a> в read-only файловой системе. Если у вас Кубернетис, придется
выкручиваться.</p>

<p>Усилия, направленные в русло Swagger, напоминают строительство
пирамид. Масштабно, неэффективно и никому не нужно. Верный признак ущербности в
том, что со всех сторон плодят еще более не нужные утилиты: убогий
онлайн-редактор, CLI и, конечно, ОБЛАЧНУЮ учетную запись. Для утилиты, которая
по JSON рисует HTML.</p>

<p>Те, кто топят за Swagger, не понимают, как устроена документация в фирмах. Дело
в том, что JSON не может нормально передать текст, он для этого не
предназначен. Использовать для документации язык, в котором нет мульти-строк,
средств акцента, ссылок и прочего — это прохладная идея.</p>

<p>Нормальная документация — это семейство markdown- или asciidoc-файлов,
объединенных в проект. Человек садится за редактор и пишет текст
ручками. Расставляет акценты, ссылки, сноски. Это трудная работа, но только так
получается достойная документация.</p>

<p>Конечно, я за то, чтобы процесс был автоматизирован. Приложение может сбрасывать
JSON-схемы в файлы, которые затем подхватит сборщик документации. Но текст
должен писать человек, и обязательно упомянуть все неочевидности, которые
найдутся при работе с апихой. А их, как правило, вагон: эту апишку можно вызвать
только при таком условии, параметры зависят друг от друга, и так далее. Описание
одного только поиска может занять два экрана с примерами. JSON-схема не передаст
всех нюансов.</p>

<p>Верный признак того, что Swagger это ущербная технология — им не пользуются
самостоятельные компании. За всю карьеру я ни разу не видел, чтобы условный
Гугл, Яндекс, Амазон и прочие показывали документацию через Swagger. В фирмах
разный подход, но как правило это HTML с написанным человеком текстом. Вот
несколько примеров:</p>

<ul>
  <li><a href="https://developer.uber.com/docs/riders/references/api">Убер</a></li>
  <li><a href="https://tech.yandex.com/money/doc/dg/reference/incoming-transfer-reject-docpage/">Яндекс.Касса</a></li>
  <li><a href="https://developers.google.com/photos/library/guides/list">Гугл.Фотки</a></li>
  <li><a href="https://developers.facebook.com/docs/graph-api/reference/event">Фейсбук</a></li>
  <li><a href="https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets">Твиттер</a></li>
</ul>

<p>Кто там еще? Вконтакт, Dropbox, банки (Тинек, Сбер)… ни одна значимая фирма не
пользуется Сваггером. По моим меркам это был бы позор уровня студента.</p>

<p>Стандартный шаблон Сваггера ужасен. Взгляните на <a href="https://petstore.swagger.io/">официальное демо</a>:</p>

<p><img src="https://s3.amazonaws.com/igrishaev.public/1059232/84140299-0e2f9780-aa5a-11ea-9074-4484cf4756ba.png" /></p>

<p>Тут красненький, тут желтенький, зеленый, выпадашечки, блин, цирк. Школьное
поделие, а не документация. Этот шаблон не вписывается ни в один дизайн, каждый
элемент чужероден. Нужно несколько дней на то, чтобы сверстать свой
шаблон. Предлагать клиентам Сваггер — значит заведомо не уважать их.</p>

<p>Кроме убогого шаблона, Swagger предлагает утилиту для генерации кода
приложения. Давайте честно: кто захочет строить проект на базе кодогенерации,
написанной неизвестно кем? Этот код однозначно уйдет в урну. Конечно, генерация
пригодится студентам для курсовой работы по предмету “введение в
веб-разработку”, но и только.</p>

<p>В общем, прекратите страдать фигней. Хотите нормальную документацию — поднимайте
проект на Asciidoc, Wiki, GitBook, что угодно. Это трудно и требует навыков
выражать свои мысли понятно. Может, пока апиха в разработке и меняется каждые
два дня, нет смысла писать документацию. Но не вываливайте на клиентов интерфейс
Сваггера. В нем отчетливо слышна машинная природа, и по всем признакам ясно, что
эта страница не для людей.</p>

                
            </div>

        </li>
        
        <li>

            <h2>
                <a class="post-link" href="/spec-dict/">Dictionary-like Specs in Clojure</a>
            </h2>

            
<div class="post-meta">

    <time class="post-time"
          datetime="2020-05-29T00:00:00+00:00">
        May 29, 2020
    </time>

    <a href="/tag/programming/" rel="tag">programming</a>, <a href="/tag/clojure/" rel="tag">clojure</a>

</div>


            <div class="entry">
                
                    <p><em>TLDR: this post is a copy of readme file from the <a href="https://github.com/igrishaev/spec-dict">GitHub
repo</a>.</em></p>

<p>Maps are quite common in Clojure, and thus <code class="language-plaintext highlighter-rouge">s/keys</code> specs too. Here is a common
example:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">:profile/url</span><span class="w">    </span><span class="nb">string?</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">:profile/rating</span><span class="w"> </span><span class="n">int?</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">::profile</span><span class="w">
  </span><span class="p">(</span><span class="nf">s/keys</span><span class="w"> </span><span class="no">:req-un</span><span class="w"> </span><span class="p">[</span><span class="no">:profile/url</span><span class="w">
                   </span><span class="no">:profile/rating</span><span class="p">]))</span><span class="w">

</span><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">:user/name</span><span class="w">    </span><span class="nb">string?</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">:user/age</span><span class="w">     </span><span class="n">int?</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">:user/profile</span><span class="w"> </span><span class="no">::profile</span><span class="p">)</span><span class="w">
</span><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">::user</span><span class="w">
  </span><span class="p">(</span><span class="nf">s/keys</span><span class="w"> </span><span class="no">:req-un</span><span class="w"> </span><span class="p">[</span><span class="no">:user/name</span><span class="w">
                   </span><span class="no">:user/age</span><span class="w">
                   </span><span class="no">:user/profile</span><span class="p">]))</span><span class="w">
</span></code></pre></div></div>

<p>What’s wrong with it? Namely:</p>

<ul>
  <li>each key requires its own spec, which is verbose;</li>
  <li>keys without a namespace still need it to declare a spec;</li>
  <li>for the top level map you use the current namespace, but for children you have
to specify it manually, which leads to spec overriding (not only you have
declared <code class="language-plaintext highlighter-rouge">:user/name</code>);</li>
  <li>keys are only keywords which is fine in 99%, but still;</li>
  <li>there is no a strict version of <code class="language-plaintext highlighter-rouge">s/keys</code> which fails when extra keys were
passed. Doing it manually looks messy.</li>
</ul>

<p>Now imagine if it would have been like this:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">::user</span><span class="w">
  </span><span class="p">{</span><span class="no">:name</span><span class="w"> </span><span class="nb">string?</span><span class="w">
   </span><span class="no">:age</span><span class="w"> </span><span class="n">int?</span><span class="w">
   </span><span class="no">:profile</span><span class="w"> </span><span class="p">{</span><span class="no">:url?</span><span class="w"> </span><span class="nb">string?</span><span class="w">
             </span><span class="no">:rating</span><span class="w"> </span><span class="n">int?</span><span class="p">}})</span><span class="w">
</span></code></pre></div></div>

<p>or this (full keys):</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="nf">s/def</span><span class="w"> </span><span class="no">::user</span><span class="w">
  </span><span class="o">#</span><span class="no">:user</span><span class="p">{</span><span class="no">:name</span><span class="w"> </span><span class="nb">string?</span><span class="w">
         </span><span class="no">:age</span><span class="w"> </span><span class="n">int?</span><span class="w">
         </span><span class="no">:profile</span><span class="w"> </span><span class="o">#</span><span class="no">:profile</span><span class="p">{</span><span class="no">:url?</span><span class="w"> </span><span class="nb">string?</span><span class="w">
                            </span><span class="no">:rating</span><span class="w"> </span><span class="n">int?</span><span class="p">}})</span><span class="w">
</span></code></pre></div></div>

<p>This library is it to fix everything said above. Add it:</p>

<div class="language-clojure highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; deps</span><span class="w">
</span><span class="p">[</span><span class="n">spec-dict</span><span class="w"> </span><span class="s">"0.1.0"</span><span class="p">]</span><span class="w">

</span><span class="p">(</span><span class="nf">require</span><span class="w"> </span><span class="o">'</span><span class="p">[</span><span class="n">spec-dict</span><span class="w"> </span><span class="no">:refer</span><span class="w"> </span><span class="p">[</span><span class="n">dict</span><span class="w"> </span><span class="n">dict*</span><span class="p">]])</span><span class="w">
</span></code></pre></div></div>


                    <p><a href="/spec-dict/">Read more &rarr;</a></p>
                
            </div>

        </li>
        
    </ul>

    <h4>
        
        <a href="/page6" class="previous">&larr;</a>
        
        <span class="page_number ">Страница 7 из 54</span>
        
        <a href="/page8" class="next">&rarr;</a>
        
    </h4>

</div>

      </div>
    </div>

    <footer class="site-footer">

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li>Ivan Grishaev's blog</li>
          <li><a href="mailto:ivan@grishaev.me">ivan@grishaev.me</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">
            <li><a href="https://github.com/igrishaev">GitHub</a></li>
            <li><a href="tg://resolve?domain=igrishaev_blog">Telegram</a></li>
        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Writing on programming, education, books and negotiations.
</p>
      </div>
    </div>

  </div>

</footer>


  </body>

</html>
